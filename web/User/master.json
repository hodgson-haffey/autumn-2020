{
  "mods": {},
  "exp_mgmt": {
    "any_loaded": false,
    "authenticated": false,
    "current_manager": "",
    "experiment": "",
    "experiments": {
      "example": {
        "all_procs": {
          "procedure_1.csv": [
            [
              "item",
              "trial type",
              "max time",
              "text",
              "Shuffle 1",
              ""
            ],
            [
              "2",
              "instruct",
              "user",
              "This is the start of a new experiment.",
              "off",
              ""
            ],
            [
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "cond_array": [
          [
            "name",
            "notes",
            "stimuli",
            "procedure",
            "fullscreen",
            "welcome",
            "participant_id",
            "end_message",
            "start_message",
            "buffer",
            "scripts",
            ""
          ],
          [
            "condition_1",
            "You can put more detailed notes in this field",
            "stimuli_1.csv",
            "procedure_1.csv",
            "off",
            "",
            "on",
            "",
            "",
            "5",
            "",
            ""
          ],
          [
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
          ]
        ],
        "all_stims": {
          "stimuli_1.csv": [
            [
              "cue",
              "answer",
              ""
            ],
            [
              "A",
              "Apple",
              ""
            ],
            [
              "B",
              "Banana",
              ""
            ],
            [
              "",
              "",
              ""
            ]
          ]
        },
        "public_key": "N3CUeguxqRH/J+OTmwRWYRLC1Q6HCFAOjIXaCHD46yE=",
        "parsed_procs": {
          "procedure_1.csv": [
            {
              "item": "2",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the start of a new experiment.",
              "": "",
              "shuffle 1": "off"
            }
          ]
        },
        "surveys": {},
        "trialtypes": {
          "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>"
        },
        "procs_csv": {
          "procedure_1.csv": "item,trial type,max time,text,Shuffle 1,\r\n2,instruct,user,This is the start of a new experiment.,off,\r\n,,,,,"
        },
        "stims_csv": {
          "stimuli_1.csv": "cue,answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"
        },
        "conditions_csv": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,\r\n,,,,,,,,,,,",
        "conditions": [
          {
            "name": "condition_1",
            "notes": "You can put more detailed notes in this field",
            "stimuli": "stimuli_1.csv",
            "procedure": "procedure_1.csv",
            "fullscreen": "off",
            "welcome": "",
            "participant_id": "on",
            "end_message": "",
            "start_message": "",
            "buffer": "5",
            "scripts": "",
            "": ""
          }
        ]
      },
      "test": {
        "all_procs": {
          "procedure_1.csv": [
            [
              "item",
              "trial type",
              "max time",
              "text",
              "Shuffle 1",
              ""
            ],
            [
              "2",
              "instruct",
              "user",
              "This is the start of a new experiment. howdy",
              "off",
              ""
            ],
            [
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "cond_array": [
          [
            "name",
            "notes",
            "stimuli",
            "procedure",
            "fullscreen",
            "welcome",
            "participant_id",
            "end_message",
            "start_message",
            "buffer",
            "scripts",
            ""
          ],
          [
            "condition_1",
            "You can put more detailed notes in this field",
            "stimuli_1.csv",
            "procedure_1.csv",
            "off",
            "",
            "on",
            "",
            "",
            "5",
            "",
            ""
          ],
          [
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
          ]
        ],
        "all_stims": {
          "stimuli_1.csv": [
            [
              "cue",
              "answer",
              ""
            ],
            [
              "A",
              "Apple",
              ""
            ],
            [
              "B",
              "Banana",
              ""
            ],
            [
              "",
              "",
              ""
            ]
          ]
        },
        "public_key": "N3CUeguxqRH/J+OTmwRWYRLC1Q6HCFAOjIXaCHD46yE=",
        "parsed_procs": {
          "procedure_1.csv": [
            {
              "item": "2",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the start of a new experiment. howdy",
              "": "",
              "shuffle 1": "off"
            }
          ]
        },
        "surveys": {},
        "trialtypes": {
          "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>"
        },
        "procs_csv": {
          "procedure_1.csv": "item,trial type,max time,text,Shuffle 1,\r\n2,instruct,user,This is the start of a new experiment. howdy,off,\r\n,,,,,"
        },
        "stims_csv": {
          "stimuli_1.csv": "cue,answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"
        },
        "conditions_csv": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,\r\n,,,,,,,,,,,",
        "conditions": [
          {
            "name": "condition_1",
            "notes": "You can put more detailed notes in this field",
            "stimuli": "stimuli_1.csv",
            "procedure": "procedure_1.csv",
            "fullscreen": "off",
            "welcome": "",
            "participant_id": "on",
            "end_message": "",
            "start_message": "",
            "buffer": "5",
            "scripts": "",
            "": ""
          }
        ]
      },
      "nbackt": {
        "all_procs": {
          "procedure_1.csv": [
            [
              "Item",
              "Trial Type",
              "Max Time",
              "Text",
              "Shuffle 1",
              "Shuffle 2",
              "survey",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "information sheet.csv",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "consent_form.csv",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "<span style='font-size:16'><b>Practice of the Letters Task<br></b></span></span></span>\n<br>\n<u><b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation</b><u></u>.<br></u>\n<br>\n Firstly, we are going to have a practice of a task that you will complete 'for real' later on. This task is called the <b>Letters Task</b>. <br>\n<br>\nThis task will require you to look at letters on the screen presented one at a time. <br>\nYou will need to choose whether the current letter matches a letter presented some letters back.<br>\n<br>\nYou are going to complete <u>3 practice rounds</u> of the Letters Task.<br><br>\n\n To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"n\" and \"m\" keys.<br>\n<br>\nAre you ready for the instructions for Round 1 of your practice?",
              "",
              "",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Practice Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "off",
              "",
              ""
            ],
            [
              "2 to 26",
              "nback",
              "user",
              "This is the start of practice Round 1.",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Practice Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "off",
              "",
              ""
            ],
            [
              "27 to 51",
              "nback",
              "user",
              "This is the start of Practice Round 2.",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Practice Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "off",
              "",
              ""
            ],
            [
              "52 to 76",
              "nback",
              "user",
              "This is the start of Practice Round 3.",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "This is the end of the Letters Task practice.",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "demographics_example.csv",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "panas.csv",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "ffq.csv",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "bond_lader_vas_mood.csv",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Welcome to the Letters Task. This task will require you to look at letters on the screen presented one at a time. You will need to choose whether the current letter matches a letter presented some letters back. You are going to complete 3 rounds of the Letters Task. To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"n\" and \"m\" keys. Are you ready for the instructions for Round 1?",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "block1",
              "",
              ""
            ],
            [
              "2 to 26",
              "nback",
              "user",
              "This is the start of Round 1.",
              "off",
              "block1",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "block2",
              "",
              ""
            ],
            [
              "27 to 51",
              "nback",
              "user",
              "This is the start of Round 2.",
              "off",
              "block2",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "off",
              "block3",
              "",
              ""
            ],
            [
              "52 to 76",
              "nback",
              "user",
              "This is the start of Round 3.",
              "off",
              "block3",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "This is the end of the Letters Task.",
              "off",
              "off",
              "",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "phq8.csv",
              ""
            ],
            [
              "0",
              "survey",
              "",
              "",
              "",
              "",
              "debrief.csv",
              ""
            ],
            [
              "",
              "",
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "cond_array": [
          [
            "Name",
            "Notes",
            "Stimuli",
            "Procedure",
            "fullscreen",
            "welcome",
            "participant_id",
            "end_message",
            "start_message",
            "buffer",
            ""
          ],
          [
            "condition_1",
            "You can put more detailed notes in this field",
            "stimuli_1.csv",
            "procedure_1.csv",
            "off",
            "",
            "on",
            "",
            "",
            "5",
            ""
          ],
          [
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
          ]
        ],
        "all_stims": {
          "stimuli_1.csv": [
            [
              "Cue",
              "Answer",
              "Match",
              ""
            ],
            [
              "S",
              "n",
              "no",
              ""
            ],
            [
              "W",
              "n",
              "no",
              ""
            ],
            [
              "Q",
              "n",
              "no",
              ""
            ],
            [
              "Q",
              "m",
              "yes",
              ""
            ],
            [
              "F",
              "n",
              "no",
              ""
            ],
            [
              "F",
              "m",
              "yes",
              ""
            ],
            [
              "Q",
              "n",
              "no",
              ""
            ],
            [
              "K",
              "n",
              "no",
              ""
            ],
            [
              "K",
              "m",
              "yes",
              ""
            ],
            [
              "B",
              "n",
              "no",
              ""
            ],
            [
              "Y",
              "n",
              "no",
              ""
            ],
            [
              "Y",
              "m",
              "yes",
              ""
            ],
            [
              "Z",
              "n",
              "no",
              ""
            ],
            [
              "Z",
              "m",
              "yes",
              ""
            ],
            [
              "L",
              "n",
              "no",
              ""
            ],
            [
              "Z",
              "n",
              "no",
              ""
            ],
            [
              "S",
              "n",
              "no",
              ""
            ],
            [
              "S",
              "m",
              "yes",
              ""
            ],
            [
              "Y",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "m",
              "yes",
              ""
            ],
            [
              "T",
              "n",
              "no",
              ""
            ],
            [
              "H",
              "n",
              "no",
              ""
            ],
            [
              "P",
              "n",
              "no",
              ""
            ],
            [
              "Z",
              "n",
              "no",
              ""
            ],
            [
              "P",
              "n",
              "no",
              ""
            ],
            [
              "G",
              "n",
              "no",
              ""
            ],
            [
              "C",
              "n",
              "no",
              ""
            ],
            [
              "G",
              "m",
              "yes",
              ""
            ],
            [
              "B",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "n",
              "no",
              ""
            ],
            [
              "R",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "m",
              "yes",
              ""
            ],
            [
              "R",
              "m",
              "yes",
              ""
            ],
            [
              "N",
              "n",
              "no",
              ""
            ],
            [
              "F",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "n",
              "no",
              ""
            ],
            [
              "H",
              "n",
              "no",
              ""
            ],
            [
              "J",
              "m",
              "yes",
              ""
            ],
            [
              "V",
              "n",
              "no",
              ""
            ],
            [
              "Z",
              "n",
              "no",
              ""
            ],
            [
              "V",
              "m",
              "yes",
              ""
            ],
            [
              "V",
              "n",
              "no",
              ""
            ],
            [
              "K",
              "n",
              "no",
              ""
            ],
            [
              "Q",
              "n",
              "no",
              ""
            ],
            [
              "K",
              "m",
              "yes",
              ""
            ],
            [
              "W",
              "n",
              "no",
              ""
            ],
            [
              "K",
              "m",
              "yes",
              ""
            ],
            [
              "P",
              "n",
              "no",
              ""
            ],
            [
              "S",
              "n",
              "no",
              ""
            ],
            [
              "L",
              "n",
              "no",
              ""
            ],
            [
              "C",
              "n",
              "no",
              ""
            ],
            [
              "S",
              "n",
              "no",
              ""
            ],
            [
              "Q",
              "n",
              "no",
              ""
            ],
            [
              "C",
              "m",
              "yes",
              ""
            ],
            [
              "M",
              "n",
              "no",
              ""
            ],
            [
              "V",
              "n",
              "no",
              ""
            ],
            [
              "T",
              "n",
              "no",
              ""
            ],
            [
              "M",
              "m",
              "yes",
              ""
            ],
            [
              "B",
              "n",
              "no",
              ""
            ],
            [
              "T",
              "m",
              "yes",
              ""
            ],
            [
              "V",
              "n",
              "no",
              ""
            ],
            [
              "M",
              "n",
              "no",
              ""
            ],
            [
              "V",
              "n",
              "no",
              ""
            ],
            [
              "B",
              "n",
              "no",
              ""
            ],
            [
              "M",
              "m",
              "yes",
              ""
            ],
            [
              "V",
              "m",
              "yes",
              ""
            ],
            [
              "X",
              "n",
              "no",
              ""
            ],
            [
              "Z",
              "n",
              "no",
              ""
            ],
            [
              "Y",
              "n",
              "no",
              ""
            ],
            [
              "X",
              "m",
              "yes",
              ""
            ],
            [
              "H",
              "n",
              "no",
              ""
            ],
            [
              "Y",
              "m",
              "yes",
              ""
            ],
            [
              "S",
              "n",
              "no",
              ""
            ],
            [
              "W",
              "n",
              "no",
              ""
            ],
            [
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "public_key": "N3CUeguxqRH/J+OTmwRWYRLC1Q6HCFAOjIXaCHD46yE=",
        "save_script": "https://script.google.com/macros/s/AKfycbxUdmSrh-QuHISYJuFloHuS6BrQDQ9nmtWziXyQTohACL1BdXo/exec",
        "parsed_procs": {
          "procedure_1.csv": [
            {
              "survey": "information sheet.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "consent_form.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "<span style='font-size:16'><b>Practice of the Letters Task<br></b></span></span></span>\n<br>\n<u><b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation</b><u></u>.<br></u>\n<br>\n Firstly, we are going to have a practice of a task that you will complete 'for real' later on. This task is called the <b>Letters Task</b>. <br>\n<br>\nThis task will require you to look at letters on the screen presented one at a time. <br>\nYou will need to choose whether the current letter matches a letter presented some letters back.<br>\n<br>\nYou are going to complete <u>3 practice rounds</u> of the Letters Task.<br><br>\n\n To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"n\" and \"m\" keys.<br>\n<br>\nAre you ready for the instructions for Round 1 of your practice?",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Practice Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "2 to 26",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of practice Round 1.",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Practice Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "27 to 51",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of Practice Round 2.",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Practice Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "52 to 76",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of Practice Round 3.",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the end of the Letters Task practice.",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "demographics_example.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "panas.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "ffq.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "bond_lader_vas_mood.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Welcome to the Letters Task. This task will require you to look at letters on the screen presented one at a time. You will need to choose whether the current letter matches a letter presented some letters back. You are going to complete 3 rounds of the Letters Task. To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"n\" and \"m\" keys. Are you ready for the instructions for Round 1?",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "block1"
            },
            {
              "survey": "",
              "": "",
              "item": "2 to 26",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of Round 1.",
              "shuffle 1": "off",
              "shuffle 2": "block1"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "block2"
            },
            {
              "survey": "",
              "": "",
              "item": "27 to 51",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of Round 2.",
              "shuffle 1": "off",
              "shuffle 2": "block2"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"m\" for \"match\". If not, press \"n\" for \"no match\". The first three trials will be \"no match\", so just press \"n\".",
              "shuffle 1": "off",
              "shuffle 2": "block3"
            },
            {
              "survey": "",
              "": "",
              "item": "52 to 76",
              "trial type": "nback",
              "max time": "user",
              "text": "This is the start of Round 3.",
              "shuffle 1": "off",
              "shuffle 2": "block3"
            },
            {
              "survey": "",
              "": "",
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the end of the Letters Task.",
              "shuffle 1": "off",
              "shuffle 2": "off"
            },
            {
              "survey": "phq8.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            },
            {
              "survey": "debrief.csv",
              "": "",
              "item": "0",
              "trial type": "survey",
              "max time": "",
              "text": "",
              "shuffle 1": "",
              "shuffle 2": ""
            }
          ]
        },
        "surveys": {
          "information sheet.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              null,
              null
            ],
            [
              "Information",
              "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
              "instruct",
              "",
              "",
              "Information",
              "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
              null
            ],
            [
              "info",
              "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. <b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation.</b> The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
              "instruct",
              "",
              "",
              "info",
              "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation. The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
              null
            ],
            [
              "proceed",
              "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
              "instruct",
              "Proceed",
              "no",
              "proceed",
              "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "consent_form.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              null
            ],
            [
              "title",
              "<b>Please select 'Yes' after each statement to confirm it has been read and agreed to.</b>",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "A1",
              "I have read and had explained to me by Hannah-Rose Human, Lyana Halawi or Tatiana Tavares the accompanying Information Sheet relating to the project on: the effect of flavonoid consumption on cognition and mood in young people",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A2",
              "I have had explained to me the purposes of the project and what will be required of me, and any questions I have had have been answered to my satisfaction. I agree to the arrangements described in the Information Sheet in so far as they relate to my participation. ",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A3",
              "I have had explained to me what information will be collected about me, what it will be used for, who it may be shared with, how it will be kept safe, and my rights in relation to my data. ",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A4",
              "I understand that participation is entirely voluntary and that I have the right to withdraw from the project any time, and that this will be without detriment. ",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A5",
              "I understand that the data collected from me in this study will be preserved and made available in anonymised form, so that they can be consulted and re-used by others. ",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A6",
              "I understand that this project has been reviewed by the University Research Ethics Committee and National Research Ethics committee where relevant and has been given a favourable ethical opinion for conduct. ",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "A8",
              "Please input your initials in place of a signature",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "A9",
              "Today's date (DD/MM/YY)",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "A10",
              "Date of birth (DD/MM/YY)",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "demographics_example.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              null
            ],
            [
              "About_you",
              "<b>Information about you</b>",
              "instruct",
              null,
              null,
              null
            ],
            [
              "Gender",
              "Gender",
              "likert",
              "Male|Female|Other|Prefer not to say",
              "No",
              null
            ],
            [
              "Age",
              "Age",
              "Number",
              "",
              "No",
              null
            ],
            [
              "Education",
              "Education (which level are you currently in, or is the highest you've completed)",
              "likert",
              "Some secondary school| Secondary school graduate| Some college, no degree| College graduate| University Bachelor degree|University Graduate degree (Master, Doctorate, etc.)",
              "No",
              null
            ],
            [
              "Native_Language",
              "What is your native language?",
              "Text",
              "",
              "No",
              null
            ],
            [
              "English_Fluency",
              "Do you speak English fluently?",
              "likert",
              "Yes|No",
              "No",
              null
            ],
            [
              "English_Age",
              "At what age did you start learning English? (write \"0\" if from birth)",
              "Number",
              "",
              "No",
              null
            ],
            [
              "Country",
              "What is your country of residence?",
              "Text",
              "",
              "No",
              null
            ],
            [
              "Handedness",
              "What is your preferred hand?",
              "Likert",
              "Left|Right|Both",
              "No",
              null
            ],
            [
              "Ethnicity",
              "If you would like to please state your ethnicity",
              "Text",
              "",
              "Yes",
              null
            ],
            [
              "Vision",
              "Do you have normal or corrected vision?",
              "Text",
              "",
              "No",
              null
            ],
            [
              "Exercise",
              "How often do you exercise?",
              "likert",
              "Less than 1 time per week|1 time per week|2-3 times per week|4-5 times per week|6+ times per week",
              "No",
              null
            ],
            [
              "Mental_Health_History",
              "Have you got any diagnosed mental health disorders?",
              "likert",
              "Yes|No",
              "No",
              null
            ],
            [
              "mental_Health_Details",
              "If yes, what is/are your diagnoses?",
              "Text",
              "",
              "",
              null
            ],
            [
              "Physical_health",
              "Have you got any diagnosed physical health disorders?",
              "likert",
              "Yes|No",
              "No",
              null
            ],
            [
              "Physical_health_details",
              "If yes, what is/are your diagnoses?",
              "Text",
              "",
              "",
              null
            ],
            [
              "Sleep",
              "How long, on average, do you sleep every night?",
              "likert",
              "Less than 5 hours|6-7 hours|8-9 hours|10+ hours",
              "No",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "panas.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Values",
              "Score: Positive_affect",
              "Score: Negative_affect",
              "Optional",
              null
            ],
            [
              "Instructions1",
              "Please rate how you currently feel. Choose one response that best describes how strongly each item applies to you RIGHT NOW:",
              "Instruct",
              "",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "AQ1",
              "Interested",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ2",
              "Distressed",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ3",
              "Excited",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ4",
              "Upset",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ5",
              "Strong",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ6",
              "Guilty",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ7",
              "Scared",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ8",
              "Hostile",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ9",
              "Enthusiastic",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ10",
              "Proud",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ11",
              "Irritable",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ12",
              "Alert",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ13",
              "Ashamed",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ14",
              "Inspired",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ15",
              "Nervous",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ16",
              "Determined",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ17",
              "Attentive",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ18",
              "Jittery",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ19",
              "Active",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ20",
              "Afraid",
              "likert",
              "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
              "1|1|0|-1|-1",
              "",
              "1",
              "No",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "ffq.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Values",
              "Score: High_Flavonoid_Foods",
              "Score: Junk_Food",
              "Score: Dairy",
              "Score: Alcohol",
              "Optional",
              null
            ],
            [
              "Instructions1",
              "Please estimate your average food use as best as you can, and please answer every question - do not leave ANY lines blank. PLEASE SELECT AN ANSWER FOR EVERY LINE.",
              "Instruct",
              "",
              "",
              "",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "AQ1",
              "Pizza",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ2",
              "Low fat yogurt, fromage (125g carton)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ3",
              "Full fat or Greek yogurt (125g carton)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ4",
              "Dairy desserts (125g carton)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ5",
              "Cheese, e.g. Cheddar, Brie, Edam (medium serving)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ6",
              " Cottage cheese, low fat soft cheese (medium serving)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "1",
              "",
              "No",
              null
            ],
            [
              "AQ7",
              "Sweet biscuits, chocolate, e.g. digestive (one)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ8",
              "Sweet biscuits, plain e.g. Nice, ginger (one)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ9",
              "Cakes e.g. fruit, sponge, home baked",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ10",
              "Cakes  e.g. fruit, sponge, ready made",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ11",
              "Buns, pastries e.g. scones, flapjacks, homebaked",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ12",
              "Buns, pastries e.g. croissants, doughnuts, ready made",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ13",
              "Fruit pies, tarts, crumbles, home baked ",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ14",
              "Fruit pies, tarts, crumbles, ready made",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ15",
              "Sponge puddings, home baked",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ16",
              "Sponge puddings, ready made",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ17",
              "Milk puddings, e.g. rice, custard, trifle ",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ18",
              "Ice cream, choc ices",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ19",
              "Dark Chocolates, single or squares",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ20",
              "Sweets, toffees, mints",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ21",
              "Crisps or other packet snacks, e.g. Wotsits",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ22",
              "Leafy Green Vegetable soups (bowl)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ23",
              "Black tea (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ24",
              "Green tea (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ25",
              "Fruit tea (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ26",
              "White tea (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ27",
              "Other tea (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ28",
              "Coffee, instant or ground (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ29",
              "Cocoa, hot chocolate (cup)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ30",
              "White wine (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ31",
              "Red wine (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ32",
              "Rose wine (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ33",
              "Beer, lager or cider (half pint)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ34",
              "Port, sherry, vermouth, liqueurs (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ35",
              "Spirits, e.g. gin, brandy, whisky, vodka (single)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "",
              "",
              "1",
              "No",
              null
            ],
            [
              "AQ36",
              "Low calorie or diet fizzy soft drinks (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ37",
              "Fizzy soft drinks, e.g. Coca cola, lemonade (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              " ",
              "1",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ38",
              "Pure fruit juice (100%) e.g. orange, apple juice (glass)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ388",
              "Apples",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              null,
              null,
              null,
              "No",
              null
            ],
            [
              "AQ39",
              "Oranges, satsumas, mandarins (1 fruit)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ40",
              "Grapefruit (medium serving)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ41",
              "Strawberries, raspberries, blueberries (medium serving)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ42",
              "Dried fruit - raisins, cranberries, blueberries  (medium serving)",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ43",
              "Broccoli, spring greens, kale",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ44",
              "Leeks",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ45",
              "Onions",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              "AQ46",
              "Tomatoes",
              "likert",
              "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
              "0|1|2|3|4|5|6|7|8",
              "1",
              "",
              "",
              "",
              "No",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "bond_lader_vas_mood.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Values",
              "Optional",
              null
            ],
            [
              "Instructions1",
              "Please rate the way you feel in terms of the dimensions given below, inputting a score from 0-100. Regard the term on the left hand side as 0 and the term on the right hand side as 100. Rate your feelings as they are AT THE MOMENT.",
              "Instruct",
              "",
              "",
              "",
              null
            ],
            [
              "AQ1",
              "Alert - Drowsy",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ2",
              "Calm - Excited",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ3",
              "Strong - Feeble",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ4",
              "Muzzy - Clear-Headed",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ5",
              "Well-Coordinated - Clumsy",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ6",
              "Lethargic - Energic",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ7",
              "Contended - Discontented",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ8",
              "Troubled - Tranquil",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ9",
              "Mentally Slow - Quick-Witted",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ10",
              "Tense - Relaxed",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ11",
              "Attentive - Dreamy",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ12",
              "Incompetent - Proficient",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ13",
              "Happy - Sad",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ14",
              "Antagonistic - Amicable",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ15",
              "Interested - Bored",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              "AQ16",
              "Withdrawn - Gregarious",
              "number",
              "",
              "0|100",
              "No",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "phq8.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Values",
              "Optional",
              null
            ],
            [
              "Instructions1",
              "Choose one response that best describes how strongly each item applies to you:",
              "Instruct",
              "",
              "",
              "",
              null
            ],
            [
              "AQ1",
              "Little interest or pleasure in doing things",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ2",
              "Feeling down, depressed, or hopeless",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ3",
              "Trouble falling or staying asleep, or sleeping too much",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ4",
              "Feeling tired or having little energy",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ5",
              "Poor appetite or overeating",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ6",
              "Feeling bad about yourself, or that you are a failure, or have let yourself or your family down",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ7",
              "Trouble concentrating on things, such as reading the newspaper or watching television",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              "AQ8",
              "Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual",
              "likert",
              "Not at all|Several days|More than half the days|Nearly every day",
              "0|1|2|3",
              "No",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "debrief.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              "",
              null
            ],
            [
              "Information",
              "<b>Debrief Sheet</b><br>\n<br>\n<b>Project title: The effect of flavonoid consumption on cognition and mood in young people.</b>",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "info",
              "Thank you for taking part in this study, we are very grateful for your contribution. ",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "This study aims to explore whether flavonoid intake is related to mood and cognition. Flavonoids are naturally occurring compounds found in foods such as berry and citrus fruits, leafy green vegetables, dark chocolate, tea and red wine. Previous research has found that flavonoids may have a beneficial effect on cognition and mood in children and older adults, however little research has investigated these effects in healthy young adults. In the current study, participants were asked to answer questionnaires on habitual diet and mood and were also asked to complete a cognitive task.",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "Your data will be securely stored and kept confidential. It will be automatically anonymized and cannot be traced back to you. If you choose to withdraw (see details on how to do this below), your data will not be used but will be stored along with the data of the other participants.",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "If you have any concerns about the research, please contact the project supervisor, Dr. Katie Barfoot.",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "Email: katie.barfoot@reading.ac.uk ",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "If you choose to withdraw, if you would like further information about the study or if you would like to know about the findings once the study is complete, then please contact one of the researchers, Hannah-Rose Human, Lyana Halawi or Tatiana Tavares, via email.",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "Email: h.human@student.reading.ac.uk",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "Email: l.halawi@student.reading.ac.uk",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "",
              "Email: t.fernandestavares@student.reading.ac.uk",
              "instruct",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "contact",
              "If taking part in this study has raised any specific concerns about your mental health then we would suggest you <b>contact your general practitioner (GP).</b> \nWe have also provided some <b>helpful links and contacts below</b> should you wish to seek further support.<br>\n<br>\n\n\n<b>Samaritans</b>: the Samaritans provide a 24/7 hotline for people to confidentially talk about their feelings and problems.<br>\n\nEmail: jo@Samaritans.org , Tel: 116 123<br>\n<br>\n\n\n<b>NHS mental health helplines:</b> https://www.nhs.uk/conditions/stress-anxiety-depression/mental-health-helplines/ <br>\n<br>\n\n\n<b>\nStudent Welfare Team:</b> students at the University of Reading have the opportunity to contact the Student Welfare Team to support them with difficulties they might be facing.\nWebsite: http://student.reading.ac.uk/essentials/_support-and-wellbeing/support-arrangements/welfare.aspx \nEmail: studentwelfare@reading.ac.uk",
              "instruct",
              "",
              "",
              "",
              "contact",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ]
        },
        "trialtypes": {
          "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>",
          "nback": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2020) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\n*/\n-->\n<style>\n#current_letter{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  height:600px;\n  text-align: center;\n  font-size:100px;\n  display:none;\n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  margin:auto;\n  width:600px;\n  height:600px;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"current_letter\">{{cue}}</div>\n</div>\n<input type=\"hidden\" name=\"response_letter\" id=\"response_letter\"/>\n<input type=\"hidden\" name=\"nback_rt\" id=\"nback_rt\"/>\n<script>\nTrial.set_timer(function(){\n  //Show the stimulus\n  $(\"#current_letter\").show();\n  baseline_time = (new Date()).getTime();  // this is just what the time is right now\n  //Accept the responses\n  var first_response = false;\n  $(window).bind('keydown', function(event) {\n    var this_key = String.fromCharCode(event.which).toLowerCase();\n  \tswitch(this_key){\n  \t  case \"m\":\n  \t  case \"n\":\n  \t    if(first_response == false){\n  \t      response_time = (new Date()).getTime();  // this is just what the time is right now\n  \t      $(\"#nback_rt\").val(response_time - baseline_time);\n  \t      first_response = true;\n  \t      $(\"#response_letter\").val(this_key);\n  \t    }\n  \t    break;\n  \t}\n  });\n  setTimeout(function(){\n    $(\"#current_letter\").hide();\n    \n    setTimeout(function(){\n      Trial.submit();\n    },2500);\n  },500);\n},0);\n\n\nsetTimeout(function(){\n    \n    \n    \n    \n    \n  },500);\n\n</script>\n\n",
          "practice": null,
          "nback_prepare": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2020) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\n*/\n-->\n<script>\nif(typeof(parent.parent.exp_json.storage) == \"undefined\"){\n  //prepare all trials\n  \n  letter_array = \"{{characters}}\".split(\"\");\n  \n  number_of_trials = {{number_of_trials}};\n  \n  array_repeats = Math.ceil(number_of_trials/letter_array.length);\n  \n  shuffled_letters = [];\n  for(var i = 0; i < array_repeats; i++){\n    shuffled_letters.concat(letter_array);\n  }\n  shuffled_letters = shuffle(shuffled_letters);\n  \n  \n  // insert matches\n  \n  \n  \n  \n\n  \n  for(var i = 0; i < {{letter_gap}}; i++){\n    letter_array.push(null);\n  }\n  letter_array.push(this_letter);\n  response_letter = null;\n} else {\n  letter_array = Trial.get(\"letter_array\");\n  letter_array.push(this_letter);\n  response_letter = letter_array.splice(0,1);\n}\n\n\nvar this_letter = \"{{cue}}\";\nvar letter_array;\n$(\"#current_letter\").html(this_letter);\n\n\n//solution from https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\nfunction shuffle(array) {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\n\n\n</script>\n\n",
          "survey": "<!--\r\n  Author: Dr. Anthony Haffey\r\n\r\n  Collector: Cat/Kitten release\r\n  A program for running experiments on the web\r\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\r\n\r\n\r\n  This program is free software: you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License version 3 as published by\r\n  the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n\r\n  Kitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n-->\r\n<style>\r\nbody{\r\n  background-color:#5F9EA0;\r\n  width:100%;\r\n  height:100%;\r\n}\r\ntd{\r\n  padding:10px;\r\n  vertical-align: top;\r\n}\r\n\r\n/*\r\n*\telements by id\r\n*/\r\n\r\n#content{\r\n  width:95%;\r\n}\r\n#proceed_button{\r\n  display:none;\r\n  float:right;\r\n}\r\n#this_survey_id{\r\n  padding:            20px;\r\n  display:            none;\r\n}\r\n#survey_outline{\r\n\tposition: \t\t\t\t\tfixed;\r\n  top: \t\t\t\t\t\t\t\t50%;\r\n  left: \t\t\t\t\t\t\t50%;\r\n\theight: \t\t\t\t\t\t90%;\r\n\toverflow: \t\t\t\t\tauto;\r\n\t-webkit-transform: \ttranslate(-50%, -50%);\r\n  transform: \t\t\t\t\ttranslate(-50%, -50%);\r\n  background-color: \twhite;\r\n\tmin-width:        \t900px;\r\n\tmax-width:        \t9000px;\r\n\tborder-radius:    \t20px;\r\n  border-color:     \t#069;\r\n  border-style:     \tsolid;\r\n  border-width:     \t5px;\r\n\tpadding:            10px;\r\n}\r\n#survey_tabs{\r\n  padding:            20px;\r\n}\r\n\r\n\r\n/*\r\n*\telements by class\r\n*/\r\n.feedback_span_multiple{\r\n  display: none;\r\n  margin:  10px;\r\n}\r\n.feedback_span_single{\r\n  display: none;\r\n  padding: 10px;\r\n}\r\n.likert_table td{\r\n  padding:    1px;\r\n  text-align: center;\r\n}\r\n.likert_table td:hover{\r\n  color: blue;\r\n}\r\n.score_total{\r\n  display: none;\r\n}\r\n.show_tab{\r\n  margin: 5px;\r\n}\r\n.survey_btn{\r\n\twhite-space: normal;\r\n\tword-wrap: \t initial;\r\n}\r\n.table_break{\r\n\twidth:    100%;\r\n\theight:   300px;\r\n\toverflow: auto;\r\n}\r\n\r\n\r\n/*\r\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\r\n*/\r\n::-webkit-scrollbar {\r\n  width: 14px;\r\n  height: 18px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  height: 6px;\r\n  border: 4px solid rgba(0, 0, 0, 0);\r\n  background-clip: padding-box;\r\n\t-webkit-border-radius: 7px;\r\n  background-color: rgba(0, 102, 153, 0.5);\r\n  -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);\r\n}\r\n::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n<div id=\"everything\">\r\n\t<div id=\"survey_outline\"></div>\r\n</div>\r\n<script>\r\n/////////////////////////\r\n// Retrieving settings //\r\n/////////////////////////\r\n\r\nif(typeof(settings) !== \"undefined\"){\r\n  settings = [settings];\r\n} else {\r\n  settings = {};\r\n}\r\n\r\n//////////////////////////////////\r\n// vertical vs. horizontal tabs //\r\n//////////////////////////////////\r\n\r\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\r\n  settings.tab_hor_vert = \"horizontal\";\r\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\r\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\r\n\r\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\r\n  $(\"#survey_outline\").html( '<table>'+\r\n                                '<tr>'+\r\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\r\n                                    '<div id=\"survey_tabs\"></div></td>' +\r\n                                  '<td>'+\r\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\r\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\r\n                                  '</td>'+\r\n                                '</tr>'+\r\n                              '</table>');\r\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\r\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\r\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\r\n} else {\r\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\r\n}\r\n</script>\r\n\r\n<span id=\"scales_span\"></span>\r\n\r\n<script>\r\n\r\n//////////////////////\r\n// Defining objects //\r\n//////////////////////\r\n\r\npage_break_management = {\r\n  breaks_remaining : 0,\r\n  breaks_index     : 0\r\n}\r\n\r\nproceed_object = {\r\n  type:[],\r\n  name:[],\r\n  break_no:[]\r\n};\r\n\r\nscoring_object={\r\n  scales:[],\r\n  scale_scores:[],\r\n  update_scales:function(this_survey){\r\n    headers = Object.keys(this_survey[0]);\r\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\r\n    var scales_html = '';\r\n    this.scales.forEach(function(element){\r\n      element = element.replace(\": \",\":\");\r\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\r\n    });\r\n    $(\"#scales_span\").html(scales_html);\r\n  }\r\n}\r\n\r\nsurvey_obj = {};\r\n\r\n\r\n/////////////////////\r\n// Element actions //\r\n/////////////////////\r\n\r\n/*\r\n$(function() {\r\n  $( \".datepicker\" ).datepicker({\r\n    dateFormat : 'mm/dd/yy',\r\n    changeMonth : true,\r\n    changeYear : true,\r\n    yearRange: '-100y:c+nn',\r\n    maxDate: '-1d'\r\n  });\r\n});\r\n*/\r\n\r\n\r\n$('#ExperimentContainer').css('transform','scale(1,1)');\r\n\r\n$(\"#proceed_button\").on(\"click\",function(){\r\n  var proceed = true;\r\n  var tabs    = document.getElementsByClassName('show_tab active');\r\n  if(tabs.length > 0){\r\n    var current_tab       = document.getElementsByClassName('show_tab active')[0]\r\n                                    .id\r\n                                    .replace(\"_button\", \"\")\r\n                                    .replace(\"tab_\",    \"\");\r\n    var response_elements = $('#table_'+current_tab).find('.response_element');\r\n\r\n  } else {\r\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\r\n  }\r\n\r\n  for(var i = 0; i < response_elements.length; i++){\r\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\r\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\r\n\r\n    if(this_optional.indexOf(\"no\") !== -1){\r\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\r\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\r\n        var min_resp_length = 1;\r\n      } else if(this_optional.length == 2) {\r\n        var min_resp_length = this_optional[1];\r\n      } else {\r\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\r\n        return false;\r\n      }\r\n    } else {\r\n      min_resp_length = 0;\r\n    }\r\n\r\n\r\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\r\n    if (quest_resp.length < min_resp_length){\r\n      proceed = false;\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\r\n    } else {\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\r\n    }\r\n  }\r\n\r\n  if(current_tab == survey_obj.tabs && proceed){\r\n    if(typeof(sql_surveys) == \"undefined\"){\r\n      //$(\".table_break\");\r\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\r\n\r\n      if($(\".table_break#table\"+next_table_no).length == 0){\r\n        if(typeof(Trial) !== \"undefined\"){\r\n          Trial.submit();\r\n        } else {\r\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\r\n        }\r\n      } else {\r\n        $(\".table_break\").hide();\r\n        $(\".table_break#table\" + next_table_no).show();\r\n      }\r\n    } else {\r\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\r\n    }\r\n  } else if(current_tab < survey_obj.tabs && proceed) {\r\n    current_tab ++;\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\r\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-dark\");\r\n    $(\"#tab_\"+current_tab+\"_button\").click();\r\n  } else if(proceed == false){\r\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\r\n  } else if(current_tab > survey_obj.tabs){\r\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\r\n  }\r\n});\r\n\r\n//by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\r\nString.prototype.replaceAll = function(str1, str2, ignore){\r\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\r\n}\r\n\r\n\r\n///////////////\r\n// Functions //\r\n///////////////\r\n\r\nfunction clean_item(this_item){\r\n  if(this_item.indexOf(\"'\") !== -1 |\r\n     this_item.indexOf('\"') !== -1){\r\n    bootbox.alert(\"Please avoid apostraphe's or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" + this_item);\r\n  }\r\n\r\n  /*\r\n  this_item = this_item.replaceAll(\"'\",\"\")\r\n                       .replaceAll('\"','');\r\n  */\r\n\r\n  return(this_item);\r\n}\r\n\r\nfunction load_survey(survey){\r\n  // are we in preview?\r\n  /////////////////////\r\n  if(typeof(parent.master_json) !== \"undefined\" && parent.master_json.surveys.preview){     // Yes\r\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\r\n    survey_obj.mods = parent.master_json.mods;                                //no need to be efficient in preview\r\n\r\n  } else {                                                                      // No\r\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\r\n\r\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\r\n      survey_content = parent.parent.exp_json.surveys[survey];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\r\n    } else if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n\t\t\t\t\t\t\ttypeof(parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")])){\r\n\t\t\tsurvey_content = parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\t\t}\telse {\r\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\r\n    }\r\n  }\r\n  process_returned_questionnaire(survey_content);\r\n}\r\n\r\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\r\n  if(feedback_array){                 //i.e. if it's not null\r\n    if(feedback_array.length > 1){\r\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    } else {\r\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction isJSON(str) {\r\n  try {\r\n    return JSON.parse(str);\r\n  } catch (e) {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction likert_update(this_element,this_response,this_value){\r\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\r\n  $(\".row_\"+row_no).removeClass(\"active\");\r\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\r\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\r\n  $(this_element).removeClass(\"btn-outline-primary\");\r\n  $(this_element).addClass(\"btn-primary\");\r\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\r\n  response_check(this_element);\r\n}\r\n\r\n\r\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\r\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\r\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\r\n    item_values.reverse();\r\n  }\r\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\r\n  var this_value    = item_values[item_answers.indexOf(this_response)];\r\n  $(\"#survey_\" + item + \"_score\").val(this_value);\r\n  if(typeof(this_value) !== \"undefined\"){\r\n    return parseFloat(this_value);\r\n  }\r\n}\r\n\r\nfunction process_returned_questionnaire(data){\r\n  survey_obj.data = data;\r\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\r\n                      header:true,\r\n                      beforeFirstChunk: function(chunk) {\r\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\r\n                        var headings = rows[0].toLowerCase();\r\n                        rows[0] = headings;\r\n                        return rows.join(\"\\r\\n\");\r\n                      },\r\n                    }).data;\r\n\r\n  var col_headers = Object.keys(survey_obj.data[0]);\r\n  survey_obj.scales = {};\r\n\r\n  col_headers.forEach(function(header){\r\n    if(header.indexOf(\"score:\")==0){\r\n      var original_header = header;\r\n      header = header.replace(\"score: \",\"\");\r\n      header = header.replace(\"score:\",\"\");\r\n\r\n      survey_obj.scales[header] = {};\r\n      survey_obj.scales[header].questions = {};\r\n\r\n      //identify which questions\r\n      for(var i = 1; i< survey_obj.data.length; i++){\r\n        row = survey_obj.data[i];\r\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\r\n          survey_obj.scales[header].questions[i] = row[original_header];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  write_survey(survey_obj.data,\"this_survey_id\");\r\n  $(\"#please_wait_div\").hide();\r\n  $(\"#proceed_button\").show();\r\n\r\n  $('html, body').animate({\r\n    scrollTop: $(\"#survey_outline\").offset().top\r\n  }, 1000);\r\n}\r\n\r\nfunction process_survey_question(this_row,row_no){\r\n\r\n  if(this_row.values == \"\"){\r\n    this_row.values = this_row.answers;\r\n  }\r\n\r\n  if(typeof(this_row[\"text\"]) !== \"undefined\" &&\r\n\t\t typeof(this_row[\"type\"]) !== \"undefined\" &&\r\n\t\t this_row['text'].toLowerCase() == \"page_break\" |\r\n\t\t this_row['type'].toLowerCase() == \"page_break\"){\r\n        page_break_management.breaks_remaining++;\r\n        question_td = \"</tr></table><table id='table\" + page_break_management.breaks_remaining + \"' style='display:none' class='table_break'></tr>\";\r\n  } else {\r\n\r\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\r\n      value_array = this_row[\"values\"].split(\"|\");\r\n    } else {\r\n      value_array='';\r\n    }\r\n\r\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\r\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\r\n    }\r\n\r\n    // class for scoring\r\n    this_class = \"\";\r\n    for(var i=0;i<scoring_object.scales.length;i++){\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\r\n      }\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\r\n      }\r\n    }\r\n\r\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\r\n\r\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\r\n\r\n\r\n    // Survey settings\r\n    ////////////////////\r\n\r\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(this_row[\"question_width\"]);\r\n\r\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\r\n        settings.feedback_before_response = true;\r\n    }\r\n\r\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\r\n        settings.lock_after_feedback = false;\r\n    }\r\n    var question_td='';\r\n\r\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    // Item types\r\n    ///////////////\r\n\r\n    if(typeof(survey_obj.mods) !== \"undefined\" &&\r\n\t\t\t typeof(survey_obj.mods[this_row.type]) !== \"undefined\"){\r\n\r\n      var mod_html = survey_obj.mods[this_row.type].contents;\r\n\r\n      //for each row variable, insert it into the mod if possible?\r\n      Object.keys(this_row).forEach(function(attribute){\r\n        mod_html = mod_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\r\n      });\r\n      question_td += mod_html;\r\n    } else {\r\n\r\n      switch(this_row[\"type\"].toLowerCase()){\r\n        case \"page_start\":\r\n          var tabs_html = $(\"#survey_tabs\").html();\r\n          if(settings.tab_hor_vert == \"horizontal\"){\r\n            span_div = \"span\";\r\n          } else if(settings.tab_hor_vert == \"vertical\"){\r\n            span_div = \"div\";\r\n          }\r\n          if(typeof(survey_obj.tabs) == \"undefined\"){\r\n            survey_obj.tabs = 0;\r\n          } else {\r\n            survey_obj.tabs++;\r\n          }\r\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\r\n            active_button = \"btn-outline-primary active\";\r\n          } else {\r\n            active_button = \"btn-secondary disabled\";\r\n          }\r\n          if(settings.tab_hor_vert == \"vertical\"){\r\n            var vert_btn_block = \"btn-block\";\r\n          } else {\r\n            var vert_btn_block = \"\";\r\n          }\r\n\r\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\r\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\r\n            '</label>'+\r\n          '</'+span_div+'>';\r\n\r\n          $(\"#survey_tabs\").html(tabs_html);\r\n\r\n          page_break_indexes = [];\r\n          survey_obj.data.forEach(function(this_row,this_index){\r\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\r\n              page_break_indexes.push(this_index);\r\n            }\r\n          });\r\n\r\n          if(survey_obj.tabs > 0){\r\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          } else {\r\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          }\r\n        break;\r\n\r\n        case \"checkbox\":\r\n        case \"checkbox_vertical\":\r\n          var options = this_row[\"answers\"].split(\"|\");\r\n          question_td +=  response_html;\r\n          for(var i=0; i<options.length;i++){\r\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\r\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                feedback_string +\r\n            '</div>';\r\n          }\r\n          break;\r\n\r\n          case \"checkbox_horizontal\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            question_td += response_html;\r\n            question_td += '<table><tr>';\r\n            for(var i=0; i<options.length;i++){\r\n              question_td +=  '<td>'+\r\n                                '<div class=\"custom-control custom-checkbox\">'+\r\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                '</div>'+\r\n                              '</td>';\r\n            }\r\n            question_td += '</tr></table>'+feedback_string;\r\n          break;\r\n\r\n          case \"checkbox_single\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var this_option = this_row[\"answers\"];\r\n            question_td +=  response_html +\r\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n                                '<label class=\"btn btn-outline-primary\">'+\r\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\r\n                                '</label>'+\r\n                            '</div>' + feedback_string;\r\n          break;\r\n\r\n          case \"date\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td+=   response_html+\r\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\r\n                              feedback_string;\r\n          break;\r\n\r\n          case \"dropdown\":\r\n\t\t\t\t\tcase \"select\":\r\n              feedback_string = generate_feedback_string(feedback_array,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t feedback_color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t row_no,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td += response_html +\r\n\t\t\t\t\t\t\t\t'<select ' +\r\n\t\t\t\t\t\t\t\t\t'class=\"custom-select ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"item_name\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'collector_button \"' +\r\n\t\t\t\t\t\t\t\t\t\t'onchange=\"response_check(this)\" ' +\r\n\t\t\t\t\t\t\t\t\t\t'name=\"survey_' + this_row[\"item_name\"].toLowerCase() + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<option selected disabled hidden>-- no option selected --</option>';\r\n              for(var i=0; i<options.length;i++){\r\n\t\t\t\t\t\t\t\tquestion_td += \"<option>\" + options[i] + \"</option>\";\r\n              }\r\n              question_td += '</select>' + feedback_string;\r\n          break;\r\n\r\n          case \"email\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"google_slide\":\r\n          case \"instruct\":\r\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\r\n          break;\r\n\r\n          // tidy up this code for nice looking buttons\r\n          case \"likert\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options  = this_row[\"answers\"].split(\"|\");\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"values\"]) == \"undefined\"){\r\n                this_row[\"values\"] = this_row[\"answers\"];\r\n              }\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"btn_width\"]) !== \"undefined\" && this_row[\"btn-width\"]  !== \"\"){\r\n\t\t\t\t\t\t\t\tvar btn_style = \"width:\" + this_row[\"btn_width\"];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar btn_style = \"\";\r\n\t\t\t\t\t\t\t}\r\n\r\n              if(typeof(this_row[\"side_width\"]) !== \"undefined\"){\r\n                var side_width = \"max-width:\" + this_row[\"side_width\"] + \";\" +\r\n                                 \"min-width:\" + this_row[\"side_width\"] + \";\";\r\n              } else {\r\n                var side_width = \"\";\r\n              }\r\n\r\n              var values   = this_row[\"values\"].split(\"|\");\r\n              question_td += \t\"<table class='likert_table'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td style='\" + side_width + \"'>\";\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t* Add side_text if it exists\r\n\t\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"side_text\"]) !== \"undefined\" &&\r\n\t\t\t\t\t\t\t\tthis_row[\"side_text\"] !== \"\"){\r\n\t\t\t\t\t\t\t\tside_text = this_row[\"side_text\"].split(\"|\");\r\n\t\t\t\t\t\t\t\tside_text = side_text.map(function(this_side){\r\n\t\t\t\t\t\t\t\t\treturn \"<span style='\" + side_width + \" padding:20px;' class='text-primary'><b>\" + this_side + \"</b></span></td><td>\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tside_text = [\"\",\"\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tquestion_td += side_text[0];\r\n\r\n\t\t\t\t\t\t\tquestion_td +=  response_html +\r\n                              '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\r\n\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<options.length;i++){\r\n                var this_option = clean_item(options[i]);\r\n                question_td +=  '<button type=\"button\" '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'class=\"btn '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'survey_btn ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'btn-outline-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row[\"item_name\"] + '_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t '\"autocomplete=\"off\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'id = \"likert_' + row_no + '_' + i + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'style = \"' + btn_style + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'onclick=\"likert_update(this,\\''+this_option+'\\',\\''+values[i]+'\\')\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_option +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</button>';\r\n\r\n              }\r\n\t\t\t\t\t\t\tquestion_td +=  \"</div></td><td  style='\" + side_width + \"'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tside_text[1] +\r\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'></td>\"+\r\n                          \"</td>\"+\r\n                      \"</tr>\"+\r\n                  \"</table>\"+feedback_string;\r\n          break;\r\n\r\n          case \"number\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\r\n          break;\r\n\r\n          case \"para\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"radio\":\r\n          case \"radio_vertical\":\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            var values   = this_row[\"values\"].split(\"|\");\r\n            question_td +=  response_html;\r\n            for(var i=0; i<options.length;i++){\r\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n\r\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\r\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                  feedback_string +\r\n                              '</div>';\r\n\r\n\r\n            }\r\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\r\n          break;\r\n\r\n          case \"radio_horizontal\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td +=  response_html;\r\n              for(var i=0; i<options.length;i++){\r\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\r\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\r\n                                  '</div>'\r\n              }\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"report_score\":\r\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n          break;\r\n\r\n          case \"text\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n      }\r\n    }\r\n    if(feedback_array){\r\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\r\n    }\r\n  }\r\n//  question_td += '</td>';\r\n\r\n  if(typeof(this_row[\"type\"])== \"undefined\"){\r\n      return '';\r\n  } else {\r\n    if(this_row[\"type\"].toLowerCase() == \"instruct\"){\r\n      var this_row_html = \"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\";\r\n\t\t} else if(this_row[\"type\"].toLowerCase() == \"likert\"){\r\n\r\n\t\t\tif(typeof(this_row[\"side_by_side\"]) !== \"undefined\" &&\r\n\t\t\t\t this_row[\"side_by_side\"].toLowerCase() == \"yes\"){\r\n\r\n\t\t\t\tvar this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar this_row_html = \"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2' align='center'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquestion_td +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\";\r\n\r\n\t\t\t}\r\n\r\n\r\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\r\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\r\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\r\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\r\n    } else {\r\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\r\n        this_row_html = question_td;\r\n      }else {\r\n        var this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n      }\r\n    }\r\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\r\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\r\n        proceed_object.name.push(this_row[\"item_name\"]);\r\n        proceed_object.type.push(this_row[\"type\"]);\r\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\r\n      }\r\n    }\r\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\r\n      this_shuffle='none';\r\n    } else {\r\n      this_shuffle=this_row[\"shuffle\"];\r\n    }\r\n    return [this_row_html,this_shuffle];\r\n  }\r\n}\r\n\r\nfunction quest_resp_perc(quest_resp_rat){\r\n\tif(typeof(quest_resp_rat) == \"undefined\"){\r\n    row_resp_perc = \"50%\";\r\n    row_ques_perc = \"50%\";\r\n  } else {\r\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n  }\r\n  return [row_ques_perc,row_resp_perc];\r\n}\r\n\r\nfunction response_check(submitted_element){\r\n  console.dir(\"submitted_element\");\r\n  console.dir(submitted_element);\r\n  switch(submitted_element.type){\r\n    case \"checkbox\":\r\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\r\n      if(checked_responses.length){ //i.e. more than 0\r\n        var values = [];\r\n        for(var i = 0; i < checked_responses.length; i++){\r\n          values.push(checked_responses[i].value);\r\n        }\r\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\r\n      } else {\r\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\r\n      }\r\n      break;\r\n\r\n      case \"button\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\r\n      break;\r\n\r\n      case \"number\":\r\n      case \"select-one\":\r\n      case \"text\":\r\n      case \"textarea\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n\r\n\r\n      case \"radio\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n    }\r\n    update_score();\r\n}\r\n\r\nfunction retrieve_feedback(this_row){\r\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\r\n    feedback_array = this_row[\"feedback\"].split(\"|\");\r\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\r\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\r\n    }\r\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\r\n  } else {\r\n    feedback_array = null;\r\n    feedback_color = '';\r\n  }\r\n  return [feedback_array,feedback_color];\r\n}\r\n\r\nfunction retrieve_row_no_item_name(this_element){\r\n  var these_classes = this_element.className.split(\" \");\r\n  var row_no;\r\n  var item_name;\r\n  these_classes.forEach(function(this_class){\r\n    if (this_class.indexOf('row_') > -1) {\r\n      row_no = this_class.replace(\"row_\",\"\");\r\n    }\r\n    if (this_class.indexOf('_item') > -1) {\r\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\r\n    }\r\n  });\r\n  return [row_no,item_name];\r\n}\r\n\r\nfunction reveal_answers(this_element){\r\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\r\n  response_present = this_response == \"\" ? false : true;\r\n\r\n  if(settings.feedback_before_response == false && response_present == false){\r\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\r\n  } else {\r\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\r\n      if(settings.lock_after_feedback){\r\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\r\n        $(\".\"+item_class).prop(\"disabled\",true);\r\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).html(\"Locked\");\r\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\r\n        $(\"#\"+this_element.id).addClass(\"disabled\");\r\n      } else {\r\n        $(\"#\"+this_element.id).html(\"Hide\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n      }\r\n    } else {\r\n      $(\"#\"+this_element.id).html(\"Show\");\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\r\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\r\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\r\n    }\r\n  }\r\n}\r\n\r\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\r\n  var tmp, current, top = array.length;\r\n  if(top) while(--top) {\r\n    current = Math.floor(Math.random() * (top + 1));\r\n    tmp = array[current];\r\n    array[current] = array[top];\r\n    array[top] = tmp;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction update_score(){\r\n  var scales = Object.keys(survey_obj.scales);\r\n  scales.forEach(function(scale){\r\n    this_scale = survey_obj.scales[scale];\r\n    var questions = Object.keys(this_scale.questions);\r\n    var this_score = 0;\r\n    complete_score = true;\r\n\r\n    questions.forEach(function(row_no){\r\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\r\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\r\n      var normal_reverse = this_scale.questions[row_no];\r\n\r\n      if(normal_reverse.indexOf(\"-\") == -1){\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\r\n        }\r\n      } else {\r\n        values_reverse = normal_reverse.split(\"-\");\r\n        values_col     = values_reverse[0].toLowerCase();\r\n        normal_reverse = values_reverse[1];\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\r\n        }\r\n      }\r\n      if(typeof(this_value) !== \"undefined\"){\r\n        this_score += multiplier * this_value;\r\n      } else {\r\n        complete_score = false;\r\n      }\r\n    });\r\n    if(complete_score){\r\n      $(\".score_\"+scale).addClass(\"bg-success\");\r\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\r\n    } else {\r\n      $(\".score_\"+scale).removeClass(\"text-success\");\r\n      $(\".score_\"+scale).addClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\r\n    }\r\n    $(\".score_\"+scale).val(this_score);\r\n  });\r\n}\r\n\r\nfunction write_survey(this_survey,this_id){\r\n  scoring_object.update_scales(this_survey);\r\n  this_survey_html = \"<table class='table_break' id='table0'>\";\r\n  this_survey_object={\r\n    content:[],\r\n    shuffle:[],\r\n    content_new_order:[],\r\n    shuffled_content:[],\r\n    shuffled_arrays:{},\r\n  }\r\n\r\n  this_survey_html += \"<tr>\";\r\n  for(i = 0; i < this_survey.length; i++){\r\n    this_row = this_survey[i];\r\n    row_html = process_survey_question(this_row,i);\r\n\t\tthis_survey_object.content.push(row_html[0]);\r\n    this_survey_object.shuffle.push(row_html[1]);\r\n\t}\r\n\r\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\r\n\r\n\tfor(var i=0;i<unique_shuffles.length;i++){\r\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\r\n      unique_shuffles[i] !== \"none\" &&\r\n      unique_shuffles[i] !== \"\"){\r\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\r\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\r\n  \t       return this_survey_object.content[index];\r\n    \t   }\r\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\r\n    \tnew_order = shuffle(shuffled_content);\r\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\r\n    }\r\n\t}\r\n\r\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\r\n\tfor(var i=0;i<this_survey_object.content.length;i++){\r\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\r\n    if(this_index !== -1){\r\n      //take first item off relevant list and delete item\r\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\r\n      this_survey_object.content_new_order[i]=this_item;\r\n    } else {\r\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\r\n    }\r\n\t}\r\n\r\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\r\n\tquestions_in_order += \"</tr>\";\r\n\r\n\tthis_survey_html += questions_in_order;\r\n\tthis_survey_html += \"</table>\";\r\n\r\n\t$(\"#\" + this_id).html(this_survey_html);\r\n\r\n\t$(\"#\" + this_id).show(1000,function(){\r\n\t\t// Set all buttons to the max width\r\n\t\t/*\r\n\t\tvar maxWidth = 0;\r\n\t\t$('.btn').each(function(index, element) {\r\n\t\t\tvar curWidth = $(element).width();\r\n\t\t\tif (maxWidth < curWidth ) {\r\n\t\t\t\tmaxWidth = curWidth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.survey_btn').each(function(i) {\r\n\t\t\t$(this).delay(200).animate({\r\n\t\t\t\t\"width\" : maxWidth\r\n\t\t\t});\r\n\t\t});\r\n\t\t*/\r\n\t});\r\n\r\n\t//scroll to top\r\n\r\n\r\n\t$(\".show_tab\").on(\"click\",function(){\r\n    if(this.className.indexOf(\"disabled\") == -1){\r\n      $(\".show_tab\").removeClass(\"active\");\r\n      $(\".survey_page\").hide();\r\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\r\n    } else {\r\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\r\n    }\r\n\t});\r\n  $('[data-toggle=\"tooltip\"]').tooltip();\r\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\r\n}\r\n\r\n//////////////////\r\n// Load survey  //\r\n//////////////////\r\ncurrent_survey = \"{{survey}}\";\r\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\r\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\r\n    load_survey(current_survey);\r\n  },100);\r\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\r\n  load_survey(current_survey);\r\n}\r\n\r\n\r\n</script>\r\n"
        },
        "python_procs": {
          "procedure_1.csv": "Item,Trial Type,Max Time,Text,Shuffle 1,\r\n0,instruct,user,\"You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"not\"\". The first three trials will be \"\"not\"\", so just press \"\"n\"\".\",off,\r\n2 to 11,nback,user,This is the start of a new experiment.,off,\r\n,,,,,"
        },
        "python_conditions": "Name,Notes,Stimuli,Procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,random,,,5,\r\n,,,,,,,,,,",
        "python_stims": {
          "stimuli_1.csv": "Cue,Answer,Match,\r\nO,n,no,\r\nR,n,no,\r\nM,n,no,\r\nO,m,yes,\r\nY,n,no,\r\nR,m,yes,\r\nC,n,no,\r\nY,m,yes,\r\nQ,n,no,\r\nC,m,yes,\r\n,,,"
        },
        "conditions": [
          {
            "name": "condition_1",
            "notes": "You can put more detailed notes in this field",
            "stimuli": "stimuli_1.csv",
            "procedure": "procedure_1.csv",
            "fullscreen": "off",
            "welcome": "",
            "participant_id": "on",
            "end_message": "",
            "start_message": "",
            "buffer": "5",
            "": ""
          }
        ],
        "data_scripts": {
          "free": [
            "https://ocollector.org/StoreData.php"
          ],
          "ocollector.org": "https://ocollector.org/StoreData7.php"
        },
        "location": "https://www.dropbox.com/s/kxobf2txelfayc4/nback.json?dl=0",
        "boosts": {},
        "mods": {},
        "procs_csv": {
          "procedure_1.csv": "Item,Trial Type,Max Time,Text,Shuffle 1,Shuffle 2,survey,\r\n0,survey,,,,,information sheet.csv,\r\n0,survey,,,,,consent_form.csv,\r\n0,instruct,user,\"<span style='font-size:16'><b>Practice of the Letters Task<br></b></span></span></span>\n<br>\n<u><b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation</b><u></u>.<br></u>\n<br>\n Firstly, we are going to have a practice of a task that you will complete 'for real' later on. This task is called the <b>Letters Task</b>. <br>\n<br>\nThis task will require you to look at letters on the screen presented one at a time. <br>\nYou will need to choose whether the current letter matches a letter presented some letters back.<br>\n<br>\nYou are going to complete <u>3 practice rounds</u> of the Letters Task.<br><br>\n\n To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"\"n\"\" and \"\"m\"\" keys.<br>\n<br>\nAre you ready for the instructions for Round 1 of your practice?\",,,,\r\n0,instruct,user,\"Practice Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,off,,\r\n2 to 26,nback,user,This is the start of practice Round 1.,off,off,,\r\n0,instruct,user,\"Practice Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,off,,\r\n27 to 51,nback,user,This is the start of Practice Round 2.,off,off,,\r\n0,instruct,user,\"Practice Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,off,,\r\n52 to 76,nback,user,This is the start of Practice Round 3.,off,off,,\r\n0,instruct,user,This is the end of the Letters Task practice.,off,off,,\r\n0,survey,,,,,demographics_example.csv,\r\n0,survey,,,,,panas.csv,\r\n0,survey,,,,,ffq.csv,\r\n0,survey,,,,,bond_lader_vas_mood.csv,\r\n0,instruct,user,\"Welcome to the Letters Task. This task will require you to look at letters on the screen presented one at a time. You will need to choose whether the current letter matches a letter presented some letters back. You are going to complete 3 rounds of the Letters Task. To prepare, please place your dominant hand on the keyboard with your index and middle fingers resting on the \"\"n\"\" and \"\"m\"\" keys. Are you ready for the instructions for Round 1?\",off,off,,\r\n0,instruct,user,\"Round 1:  You are about to be presented with a series of letters. If the letter presented matches the one 1 letter before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,block1,,\r\n2 to 26,nback,user,This is the start of Round 1.,off,block1,,\r\n0,instruct,user,\"Round 2: You are about to be presented with a series of letters. If the letter presented matches the one 2 letters before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,block2,,\r\n27 to 51,nback,user,This is the start of Round 2.,off,block2,,\r\n0,instruct,user,\"Round 3: You are about to be presented with a series of letters. If the letter presented matches the one 3 letters before, then press \"\"m\"\" for \"\"match\"\". If not, press \"\"n\"\" for \"\"no match\"\". The first three trials will be \"\"no match\"\", so just press \"\"n\"\".\",off,block3,,\r\n52 to 76,nback,user,This is the start of Round 3.,off,block3,,\r\n0,instruct,user,This is the end of the Letters Task.,off,off,,\r\n0,survey,,,,,phq8.csv,\r\n0,survey,,,,,debrief.csv,\r\n,,,,,,,"
        },
        "stims_csv": {
          "stimuli_1.csv": "Cue,Answer,Match,\r\nS,n,no,\r\nW,n,no,\r\nQ,n,no,\r\nQ,m,yes,\r\nF,n,no,\r\nF,m,yes,\r\nQ,n,no,\r\nK,n,no,\r\nK,m,yes,\r\nB,n,no,\r\nY,n,no,\r\nY,m,yes,\r\nZ,n,no,\r\nZ,m,yes,\r\nL,n,no,\r\nZ,n,no,\r\nS,n,no,\r\nS,m,yes,\r\nY,n,no,\r\nJ,n,no,\r\nJ,m,yes,\r\nT,n,no,\r\nH,n,no,\r\nP,n,no,\r\nZ,n,no,\r\nP,n,no,\r\nG,n,no,\r\nC,n,no,\r\nG,m,yes,\r\nB,n,no,\r\nJ,n,no,\r\nR,n,no,\r\nJ,m,yes,\r\nR,m,yes,\r\nN,n,no,\r\nF,n,no,\r\nJ,n,no,\r\nH,n,no,\r\nJ,m,yes,\r\nV,n,no,\r\nZ,n,no,\r\nV,m,yes,\r\nV,n,no,\r\nK,n,no,\r\nQ,n,no,\r\nK,m,yes,\r\nW,n,no,\r\nK,m,yes,\r\nP,n,no,\r\nS,n,no,\r\nL,n,no,\r\nC,n,no,\r\nS,n,no,\r\nQ,n,no,\r\nC,m,yes,\r\nM,n,no,\r\nV,n,no,\r\nT,n,no,\r\nM,m,yes,\r\nB,n,no,\r\nT,m,yes,\r\nV,n,no,\r\nM,n,no,\r\nV,n,no,\r\nB,n,no,\r\nM,m,yes,\r\nV,m,yes,\r\nX,n,no,\r\nZ,n,no,\r\nY,n,no,\r\nX,m,yes,\r\nH,n,no,\r\nY,m,yes,\r\nS,n,no,\r\nW,n,no,\r\n,,,"
        },
        "conditions_csv": "Name,Notes,Stimuli,Procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,\r\n,,,,,,,,,,"
      },
      "t1": {
        "all_procs": {
          "procedure_1.csv": [
            [
              "item",
              "trial type",
              "max time",
              "text",
              "Shuffle 1",
              "survey",
              ""
            ],
            [
              "2",
              "instruct",
              "user",
              "This is the start of a new experiment.",
              "off",
              "",
              ""
            ],
            [
              "0",
              "survey",
              "user",
              "",
              "off",
              "t1_consent form.csv",
              ""
            ],
            [
              "",
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "cond_array": [
          [
            "name",
            "notes",
            "stimuli",
            "procedure",
            "fullscreen",
            "welcome",
            "participant_id",
            "end_message",
            "start_message",
            "buffer",
            "scripts",
            ""
          ],
          [
            "condition_1",
            "You can put more detailed notes in this field",
            "stimuli_1.csv",
            "procedure_1.csv",
            "off",
            "",
            "on",
            "",
            "",
            "5",
            "",
            ""
          ],
          [
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
          ]
        ],
        "all_stims": {
          "stimuli_1.csv": [
            [
              "cue",
              "answer",
              ""
            ],
            [
              "A",
              "Apple",
              ""
            ],
            [
              "B",
              "Banana",
              ""
            ],
            [
              "",
              "",
              ""
            ]
          ]
        },
        "public_key": "N3CUeguxqRH/J+OTmwRWYRLC1Q6HCFAOjIXaCHD46yE=",
        "parsed_procs": {
          "procedure_1.csv": [
            {
              "item": "2",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the start of a new experiment.",
              "survey": "",
              "": "",
              "shuffle 1": "off"
            },
            {
              "item": "0",
              "trial type": "survey",
              "max time": "user",
              "text": "",
              "survey": "t1_consent form.csv",
              "": "",
              "shuffle 1": "off"
            }
          ]
        },
        "surveys": {
          "t1_consent form.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              null
            ],
            [
              "title",
              "Consent Form: Please select 'Yes' after each statement to confirm it has been read and agreed to.</b>",
              "",
              "",
              "",
              "",
              null
            ],
            [
              "C1",
              "I was offered a telephone briefing by the researchers, and I have read the accompanying Information Sheet relating to the project on doctor hydration, well-being and competence.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C2",
              "I have had explained to me the purposes of the project and what will be required of me, and any questions I have had have been answered to my satisfaction. I agree to the arrangements described in the Information Sheet in so far as they relate to my participation.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C3",
              "I have had explained to me what information will be collected about me, what it will be used for, who it may be shared with, how it will be kept safe, and my rights in relation to my data.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C4",
              "I understand that participation is entirely voluntary and that I have the right to withdraw from the project any time, and that this will be without detriment.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C5",
              "I understand that the data collected from me in this study will be preserved and made available in anonymised form, so that they can be consulted and re-used by others.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C6",
              "If any concerns about my physical or psychological safety during the course of this study, I will be contacted initially. If there are further concerns about my safety following that contact regarding my ability to source appropriate support or self-management, I authorise the investigator to consult my General Practitioner in order to identify further support for me.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C7",
              "I understand that this project has been reviewed by the University of Reading Research Ethics Committee, and has been given a favourable ethical opinion for conduct.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C8",
              "I have been provided contact details for the researchers and understand I may contact them if I have any concerns, or require further information.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C9",
              "I understand that my anonymous survey responses may be used for publication and made available to other researchers for verification or further analysis after the study is completed.",
              "likert",
              "Yes | No",
              "no",
              null,
              null
            ],
            [
              "C10",
              "Please input your initials in place of a signature",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "C11",
              "Participant ID",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "C12",
              "Today's date (DD/MM/YY)",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "C13",
              "Date of birth (DD/MM/YY)",
              "Text",
              null,
              "no",
              null,
              null
            ],
            [
              "",
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ],
          "t0_screening_questionnaire.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              "side_by_side",
              "btn_width",
              null
            ],
            [
              "Info",
              "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
              "instruct",
              null,
              null,
              null,
              null,
              "",
              null
            ],
            [
              "Country",
              "What is your country of residence?",
              "Text",
              "",
              "No",
              "",
              "",
              "",
              null
            ],
            [
              "Age",
              "Age",
              "Number",
              "",
              "No",
              "",
              "",
              "",
              ""
            ],
            [
              "Occupation",
              "What is your professional occupation",
              "Dropdown",
              "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
              "No",
              null,
              null,
              null,
              null
            ],
            [
              "NHS",
              "Are you currently in employment within the NHS",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Health",
              "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
              "Likert",
              "Left|Right|Both",
              "No",
              "",
              "yes",
              "100px",
              ""
            ],
            [
              "Medications",
              "Are you currently taking any medications?",
              "Likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Consent_to_contact",
              "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Telephone_briefing",
              "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Contact",
              "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
              "Text",
              null,
              "No",
              null,
              null,
              null,
              null
            ],
            [
              "Submit",
              "Please click 'Proceed' to submit your responses. Thank you",
              "instruct",
              null,
              null,
              null,
              null,
              null,
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ]
        },
        "trialtypes": {
          "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>",
          "survey": "<!--\r\n  Author: Dr. Anthony Haffey\r\n\r\n  Collector: Cat/Kitten release\r\n  A program for running experiments on the web\r\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\r\n\r\n\r\n  This program is free software: you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License version 3 as published by\r\n  the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n\r\n  Kitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n-->\r\n<style>\r\nbody{\r\n  background-color:#5F9EA0;\r\n  width:100%;\r\n  height:100%;\r\n}\r\ntd{\r\n  padding:10px;\r\n  vertical-align: top;\r\n}\r\n\r\n/*\r\n*\telements by id\r\n*/\r\n\r\n#content{\r\n  width:95%;\r\n}\r\n#proceed_button{\r\n  display:none;\r\n  float:right;\r\n}\r\n#this_survey_id{\r\n  padding:            20px;\r\n  display:            none;\r\n}\r\n#survey_outline{\r\n\tposition: \t\t\t\t\tfixed;\r\n  top: \t\t\t\t\t\t\t\t50%;\r\n  left: \t\t\t\t\t\t\t50%;\r\n\theight: \t\t\t\t\t\t90%;\r\n\toverflow: \t\t\t\t\tauto;\r\n\t-webkit-transform: \ttranslate(-50%, -50%);\r\n  transform: \t\t\t\t\ttranslate(-50%, -50%);\r\n  background-color: \twhite;\r\n\tmin-width:        \t900px;\r\n\tmax-width:        \t9000px;\r\n\tborder-radius:    \t20px;\r\n  border-color:     \t#069;\r\n  border-style:     \tsolid;\r\n  border-width:     \t5px;\r\n\tpadding:            10px;\r\n}\r\n#survey_tabs{\r\n  padding:            20px;\r\n}\r\n\r\n\r\n/*\r\n*\telements by class\r\n*/\r\n.feedback_span_multiple{\r\n  display: none;\r\n  margin:  10px;\r\n}\r\n.feedback_span_single{\r\n  display: none;\r\n  padding: 10px;\r\n}\r\n.likert_table td{\r\n  padding:    1px;\r\n  text-align: center;\r\n}\r\n.likert_table td:hover{\r\n  color: blue;\r\n}\r\n.score_total{\r\n  display: none;\r\n}\r\n.show_tab{\r\n  margin: 5px;\r\n}\r\n.survey_btn{\r\n\twhite-space: normal;\r\n\tword-wrap: \t initial;\r\n}\r\n.table_break{\r\n\twidth:    100%;\r\n\theight:   300px;\r\n\toverflow: auto;\r\n}\r\n\r\n\r\n/*\r\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\r\n*/\r\n::-webkit-scrollbar {\r\n  width: 14px;\r\n  height: 18px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  height: 6px;\r\n  border: 4px solid rgba(0, 0, 0, 0);\r\n  background-clip: padding-box;\r\n\t-webkit-border-radius: 7px;\r\n  background-color: rgba(0, 102, 153, 0.5);\r\n  -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);\r\n}\r\n::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n<div id=\"everything\">\r\n\t<div id=\"survey_outline\"></div>\r\n</div>\r\n<script>\r\n/////////////////////////\r\n// Retrieving settings //\r\n/////////////////////////\r\n\r\nif(typeof(settings) !== \"undefined\"){\r\n  settings = [settings];\r\n} else {\r\n  settings = {};\r\n}\r\n\r\n//////////////////////////////////\r\n// vertical vs. horizontal tabs //\r\n//////////////////////////////////\r\n\r\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\r\n  settings.tab_hor_vert = \"horizontal\";\r\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\r\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\r\n\r\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\r\n  $(\"#survey_outline\").html( '<table>'+\r\n                                '<tr>'+\r\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\r\n                                    '<div id=\"survey_tabs\"></div></td>' +\r\n                                  '<td>'+\r\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\r\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\r\n                                  '</td>'+\r\n                                '</tr>'+\r\n                              '</table>');\r\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\r\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\r\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\r\n} else {\r\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\r\n}\r\n</script>\r\n\r\n<span id=\"scales_span\"></span>\r\n\r\n<script>\r\n\r\n//////////////////////\r\n// Defining objects //\r\n//////////////////////\r\n\r\npage_break_management = {\r\n  breaks_remaining : 0,\r\n  breaks_index     : 0\r\n}\r\n\r\nproceed_object = {\r\n  type:[],\r\n  name:[],\r\n  break_no:[]\r\n};\r\n\r\nscoring_object={\r\n  scales:[],\r\n  scale_scores:[],\r\n  update_scales:function(this_survey){\r\n    headers = Object.keys(this_survey[0]);\r\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\r\n    var scales_html = '';\r\n    this.scales.forEach(function(element){\r\n      element = element.replace(\": \",\":\");\r\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\r\n    });\r\n    $(\"#scales_span\").html(scales_html);\r\n  }\r\n}\r\n\r\nsurvey_obj = {};\r\n\r\n\r\n/////////////////////\r\n// Element actions //\r\n/////////////////////\r\n\r\n/*\r\n$(function() {\r\n  $( \".datepicker\" ).datepicker({\r\n    dateFormat : 'mm/dd/yy',\r\n    changeMonth : true,\r\n    changeYear : true,\r\n    yearRange: '-100y:c+nn',\r\n    maxDate: '-1d'\r\n  });\r\n});\r\n*/\r\n\r\n\r\n$('#ExperimentContainer').css('transform','scale(1,1)');\r\n\r\n$(\"#proceed_button\").on(\"click\",function(){\r\n  var proceed = true;\r\n  var tabs    = document.getElementsByClassName('show_tab active');\r\n  if(tabs.length > 0){\r\n    var current_tab       = document.getElementsByClassName('show_tab active')[0]\r\n                                    .id\r\n                                    .replace(\"_button\", \"\")\r\n                                    .replace(\"tab_\",    \"\");\r\n    var response_elements = $('#table_'+current_tab).find('.response_element');\r\n\r\n  } else {\r\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\r\n  }\r\n\r\n  for(var i = 0; i < response_elements.length; i++){\r\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\r\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\r\n\r\n    if(this_optional.indexOf(\"no\") !== -1){\r\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\r\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\r\n        var min_resp_length = 1;\r\n      } else if(this_optional.length == 2) {\r\n        var min_resp_length = this_optional[1];\r\n      } else {\r\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\r\n        return false;\r\n      }\r\n    } else {\r\n      min_resp_length = 0;\r\n    }\r\n\r\n\r\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\r\n    if (quest_resp.length < min_resp_length){\r\n      proceed = false;\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\r\n    } else {\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\r\n    }\r\n  }\r\n\r\n  if(current_tab == survey_obj.tabs && proceed){\r\n    if(typeof(sql_surveys) == \"undefined\"){\r\n      //$(\".table_break\");\r\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\r\n\r\n      if($(\".table_break#table\"+next_table_no).length == 0){\r\n        if(typeof(Trial) !== \"undefined\"){\r\n          Trial.submit();\r\n        } else {\r\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\r\n        }\r\n      } else {\r\n        $(\".table_break\").hide();\r\n        $(\".table_break#table\" + next_table_no).show();\r\n      }\r\n    } else {\r\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\r\n    }\r\n  } else if(current_tab < survey_obj.tabs && proceed) {\r\n    current_tab ++;\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\r\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-dark\");\r\n    $(\"#tab_\"+current_tab+\"_button\").click();\r\n  } else if(proceed == false){\r\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\r\n  } else if(current_tab > survey_obj.tabs){\r\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\r\n  }\r\n});\r\n\r\n//by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\r\nString.prototype.replaceAll = function(str1, str2, ignore){\r\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\r\n}\r\n\r\n\r\n///////////////\r\n// Functions //\r\n///////////////\r\n\r\nfunction clean_item(this_item){\r\n  if(this_item.indexOf(\"'\") !== -1 |\r\n     this_item.indexOf('\"') !== -1){\r\n    bootbox.alert(\"Please avoid apostraphe's or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" + this_item);\r\n  }\r\n\r\n  /*\r\n  this_item = this_item.replaceAll(\"'\",\"\")\r\n                       .replaceAll('\"','');\r\n  */\r\n\r\n  return(this_item);\r\n}\r\n\r\nfunction load_survey(survey){\r\n  // are we in preview?\r\n  /////////////////////\r\n  if(typeof(parent.master_json) !== \"undefined\" && parent.master_json.surveys.preview){     // Yes\r\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\r\n    survey_obj.mods = parent.master_json.mods;                                //no need to be efficient in preview\r\n\r\n  } else {                                                                      // No\r\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\r\n\r\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\r\n      survey_content = parent.parent.exp_json.surveys[survey];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\r\n    } else if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n\t\t\t\t\t\t\ttypeof(parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")])){\r\n\t\t\tsurvey_content = parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\t\t}\telse {\r\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\r\n    }\r\n  }\r\n  process_returned_questionnaire(survey_content);\r\n}\r\n\r\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\r\n  if(feedback_array){                 //i.e. if it's not null\r\n    if(feedback_array.length > 1){\r\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    } else {\r\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction isJSON(str) {\r\n  try {\r\n    return JSON.parse(str);\r\n  } catch (e) {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction likert_update(this_element,this_response,this_value){\r\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\r\n  $(\".row_\"+row_no).removeClass(\"active\");\r\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\r\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\r\n  $(this_element).removeClass(\"btn-outline-primary\");\r\n  $(this_element).addClass(\"btn-primary\");\r\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\r\n  response_check(this_element);\r\n}\r\n\r\n\r\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\r\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\r\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\r\n    item_values.reverse();\r\n  }\r\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\r\n  var this_value    = item_values[item_answers.indexOf(this_response)];\r\n  $(\"#survey_\" + item + \"_score\").val(this_value);\r\n  if(typeof(this_value) !== \"undefined\"){\r\n    return parseFloat(this_value);\r\n  }\r\n}\r\n\r\nfunction process_returned_questionnaire(data){\r\n  survey_obj.data = data;\r\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\r\n                      header:true,\r\n                      beforeFirstChunk: function(chunk) {\r\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\r\n                        var headings = rows[0].toLowerCase();\r\n                        rows[0] = headings;\r\n                        return rows.join(\"\\r\\n\");\r\n                      },\r\n                    }).data;\r\n\r\n  var col_headers = Object.keys(survey_obj.data[0]);\r\n  survey_obj.scales = {};\r\n\r\n  col_headers.forEach(function(header){\r\n    if(header.indexOf(\"score:\")==0){\r\n      var original_header = header;\r\n      header = header.replace(\"score: \",\"\");\r\n      header = header.replace(\"score:\",\"\");\r\n\r\n      survey_obj.scales[header] = {};\r\n      survey_obj.scales[header].questions = {};\r\n\r\n      //identify which questions\r\n      for(var i = 1; i< survey_obj.data.length; i++){\r\n        row = survey_obj.data[i];\r\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\r\n          survey_obj.scales[header].questions[i] = row[original_header];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  write_survey(survey_obj.data,\"this_survey_id\");\r\n  $(\"#please_wait_div\").hide();\r\n  $(\"#proceed_button\").show();\r\n\r\n  $('html, body').animate({\r\n    scrollTop: $(\"#survey_outline\").offset().top\r\n  }, 1000);\r\n}\r\n\r\nfunction process_survey_question(this_row,row_no){\r\n\r\n  if(this_row.values == \"\"){\r\n    this_row.values = this_row.answers;\r\n  }\r\n\r\n  if(typeof(this_row[\"text\"]) !== \"undefined\" &&\r\n\t\t typeof(this_row[\"type\"]) !== \"undefined\" &&\r\n\t\t this_row['text'].toLowerCase() == \"page_break\" |\r\n\t\t this_row['type'].toLowerCase() == \"page_break\"){\r\n        page_break_management.breaks_remaining++;\r\n        question_td = \"</tr></table><table id='table\" + page_break_management.breaks_remaining + \"' style='display:none' class='table_break'></tr>\";\r\n  } else {\r\n\r\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\r\n      value_array = this_row[\"values\"].split(\"|\");\r\n    } else {\r\n      value_array='';\r\n    }\r\n\r\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\r\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\r\n    }\r\n\r\n    // class for scoring\r\n    this_class = \"\";\r\n    for(var i=0;i<scoring_object.scales.length;i++){\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\r\n      }\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\r\n      }\r\n    }\r\n\r\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\r\n\r\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\r\n\r\n\r\n    // Survey settings\r\n    ////////////////////\r\n\r\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(this_row[\"question_width\"]);\r\n\r\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\r\n        settings.feedback_before_response = true;\r\n    }\r\n\r\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\r\n        settings.lock_after_feedback = false;\r\n    }\r\n    var question_td='';\r\n\r\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    // Item types\r\n    ///////////////\r\n\r\n    if(typeof(survey_obj.mods) !== \"undefined\" &&\r\n\t\t\t typeof(survey_obj.mods[this_row.type]) !== \"undefined\"){\r\n\r\n      var mod_html = survey_obj.mods[this_row.type].contents;\r\n\r\n      //for each row variable, insert it into the mod if possible?\r\n      Object.keys(this_row).forEach(function(attribute){\r\n        mod_html = mod_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\r\n      });\r\n      question_td += mod_html;\r\n    } else {\r\n\r\n      switch(this_row[\"type\"].toLowerCase()){\r\n        case \"page_start\":\r\n          var tabs_html = $(\"#survey_tabs\").html();\r\n          if(settings.tab_hor_vert == \"horizontal\"){\r\n            span_div = \"span\";\r\n          } else if(settings.tab_hor_vert == \"vertical\"){\r\n            span_div = \"div\";\r\n          }\r\n          if(typeof(survey_obj.tabs) == \"undefined\"){\r\n            survey_obj.tabs = 0;\r\n          } else {\r\n            survey_obj.tabs++;\r\n          }\r\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\r\n            active_button = \"btn-outline-primary active\";\r\n          } else {\r\n            active_button = \"btn-secondary disabled\";\r\n          }\r\n          if(settings.tab_hor_vert == \"vertical\"){\r\n            var vert_btn_block = \"btn-block\";\r\n          } else {\r\n            var vert_btn_block = \"\";\r\n          }\r\n\r\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\r\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\r\n            '</label>'+\r\n          '</'+span_div+'>';\r\n\r\n          $(\"#survey_tabs\").html(tabs_html);\r\n\r\n          page_break_indexes = [];\r\n          survey_obj.data.forEach(function(this_row,this_index){\r\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\r\n              page_break_indexes.push(this_index);\r\n            }\r\n          });\r\n\r\n          if(survey_obj.tabs > 0){\r\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          } else {\r\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          }\r\n        break;\r\n\r\n        case \"checkbox\":\r\n        case \"checkbox_vertical\":\r\n          var options = this_row[\"answers\"].split(\"|\");\r\n          question_td +=  response_html;\r\n          for(var i=0; i<options.length;i++){\r\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\r\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                feedback_string +\r\n            '</div>';\r\n          }\r\n          break;\r\n\r\n          case \"checkbox_horizontal\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            question_td += response_html;\r\n            question_td += '<table><tr>';\r\n            for(var i=0; i<options.length;i++){\r\n              question_td +=  '<td>'+\r\n                                '<div class=\"custom-control custom-checkbox\">'+\r\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                '</div>'+\r\n                              '</td>';\r\n            }\r\n            question_td += '</tr></table>'+feedback_string;\r\n          break;\r\n\r\n          case \"checkbox_single\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var this_option = this_row[\"answers\"];\r\n            question_td +=  response_html +\r\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n                                '<label class=\"btn btn-outline-primary\">'+\r\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\r\n                                '</label>'+\r\n                            '</div>' + feedback_string;\r\n          break;\r\n\r\n          case \"date\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td+=   response_html+\r\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\r\n                              feedback_string;\r\n          break;\r\n\r\n          case \"dropdown\":\r\n\t\t\t\t\tcase \"select\":\r\n              feedback_string = generate_feedback_string(feedback_array,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t feedback_color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t row_no,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td += response_html +\r\n\t\t\t\t\t\t\t\t'<select ' +\r\n\t\t\t\t\t\t\t\t\t'class=\"custom-select ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"item_name\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'collector_button \"' +\r\n\t\t\t\t\t\t\t\t\t\t'onchange=\"response_check(this)\" ' +\r\n\t\t\t\t\t\t\t\t\t\t'name=\"survey_' + this_row[\"item_name\"].toLowerCase() + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<option selected disabled hidden>-- no option selected --</option>';\r\n              for(var i=0; i<options.length;i++){\r\n\t\t\t\t\t\t\t\tquestion_td += \"<option>\" + options[i] + \"</option>\";\r\n              }\r\n              question_td += '</select>' + feedback_string;\r\n          break;\r\n\r\n          case \"email\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"google_slide\":\r\n          case \"instruct\":\r\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\r\n          break;\r\n\r\n          // tidy up this code for nice looking buttons\r\n          case \"likert\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options  = this_row[\"answers\"].split(\"|\");\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"values\"]) == \"undefined\"){\r\n                this_row[\"values\"] = this_row[\"answers\"];\r\n              }\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"btn_width\"]) !== \"undefined\" && this_row[\"btn-width\"]  !== \"\"){\r\n\t\t\t\t\t\t\t\tvar btn_style = \"width:\" + this_row[\"btn_width\"];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar btn_style = \"\";\r\n\t\t\t\t\t\t\t}\r\n\r\n              if(typeof(this_row[\"side_width\"]) !== \"undefined\"){\r\n                var side_width = \"max-width:\" + this_row[\"side_width\"] + \";\" +\r\n                                 \"min-width:\" + this_row[\"side_width\"] + \";\";\r\n              } else {\r\n                var side_width = \"\";\r\n              }\r\n\r\n              var values   = this_row[\"values\"].split(\"|\");\r\n              question_td += \t\"<table class='likert_table'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td style='\" + side_width + \"'>\";\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t* Add side_text if it exists\r\n\t\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"side_text\"]) !== \"undefined\" &&\r\n\t\t\t\t\t\t\t\tthis_row[\"side_text\"] !== \"\"){\r\n\t\t\t\t\t\t\t\tside_text = this_row[\"side_text\"].split(\"|\");\r\n\t\t\t\t\t\t\t\tside_text = side_text.map(function(this_side){\r\n\t\t\t\t\t\t\t\t\treturn \"<span style='\" + side_width + \" padding:20px;' class='text-primary'><b>\" + this_side + \"</b></span></td><td>\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tside_text = [\"\",\"\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tquestion_td += side_text[0];\r\n\r\n\t\t\t\t\t\t\tquestion_td +=  response_html +\r\n                              '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\r\n\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<options.length;i++){\r\n                var this_option = clean_item(options[i]);\r\n                question_td +=  '<button type=\"button\" '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'class=\"btn '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'survey_btn ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'btn-outline-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row[\"item_name\"] + '_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t '\"autocomplete=\"off\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'id = \"likert_' + row_no + '_' + i + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'style = \"' + btn_style + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'onclick=\"likert_update(this,\\''+this_option+'\\',\\''+values[i]+'\\')\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_option +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</button>';\r\n\r\n              }\r\n\t\t\t\t\t\t\tquestion_td +=  \"</div></td><td  style='\" + side_width + \"'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tside_text[1] +\r\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'></td>\"+\r\n                          \"</td>\"+\r\n                      \"</tr>\"+\r\n                  \"</table>\"+feedback_string;\r\n          break;\r\n\r\n          case \"number\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\r\n          break;\r\n\r\n          case \"para\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"radio\":\r\n          case \"radio_vertical\":\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            var values   = this_row[\"values\"].split(\"|\");\r\n            question_td +=  response_html;\r\n            for(var i=0; i<options.length;i++){\r\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n\r\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\r\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                  feedback_string +\r\n                              '</div>';\r\n\r\n\r\n            }\r\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\r\n          break;\r\n\r\n          case \"radio_horizontal\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td +=  response_html;\r\n              for(var i=0; i<options.length;i++){\r\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\r\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\r\n                                  '</div>'\r\n              }\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"report_score\":\r\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n          break;\r\n\r\n          case \"text\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n      }\r\n    }\r\n    if(feedback_array){\r\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\r\n    }\r\n  }\r\n//  question_td += '</td>';\r\n\r\n  if(typeof(this_row[\"type\"])== \"undefined\"){\r\n      return '';\r\n  } else {\r\n    if(this_row[\"type\"].toLowerCase() == \"instruct\"){\r\n      var this_row_html = \"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\";\r\n\t\t} else if(this_row[\"type\"].toLowerCase() == \"likert\"){\r\n\r\n\t\t\tif(typeof(this_row[\"side_by_side\"]) !== \"undefined\" &&\r\n\t\t\t\t this_row[\"side_by_side\"].toLowerCase() == \"yes\"){\r\n\r\n\t\t\t\tvar this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar this_row_html = \"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2' align='center'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquestion_td +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\";\r\n\r\n\t\t\t}\r\n\r\n\r\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\r\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\r\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\r\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\r\n    } else {\r\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\r\n        this_row_html = question_td;\r\n      }else {\r\n        var this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n      }\r\n    }\r\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\r\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\r\n        proceed_object.name.push(this_row[\"item_name\"]);\r\n        proceed_object.type.push(this_row[\"type\"]);\r\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\r\n      }\r\n    }\r\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\r\n      this_shuffle='none';\r\n    } else {\r\n      this_shuffle=this_row[\"shuffle\"];\r\n    }\r\n    return [this_row_html,this_shuffle];\r\n  }\r\n}\r\n\r\nfunction quest_resp_perc(quest_resp_rat){\r\n\tif(typeof(quest_resp_rat) == \"undefined\"){\r\n    row_resp_perc = \"50%\";\r\n    row_ques_perc = \"50%\";\r\n  } else {\r\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n  }\r\n  return [row_ques_perc,row_resp_perc];\r\n}\r\n\r\nfunction response_check(submitted_element){\r\n  console.dir(\"submitted_element\");\r\n  console.dir(submitted_element);\r\n  switch(submitted_element.type){\r\n    case \"checkbox\":\r\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\r\n      if(checked_responses.length){ //i.e. more than 0\r\n        var values = [];\r\n        for(var i = 0; i < checked_responses.length; i++){\r\n          values.push(checked_responses[i].value);\r\n        }\r\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\r\n      } else {\r\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\r\n      }\r\n      break;\r\n\r\n      case \"button\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\r\n      break;\r\n\r\n      case \"number\":\r\n      case \"select-one\":\r\n      case \"text\":\r\n      case \"textarea\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n\r\n\r\n      case \"radio\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n    }\r\n    update_score();\r\n}\r\n\r\nfunction retrieve_feedback(this_row){\r\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\r\n    feedback_array = this_row[\"feedback\"].split(\"|\");\r\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\r\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\r\n    }\r\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\r\n  } else {\r\n    feedback_array = null;\r\n    feedback_color = '';\r\n  }\r\n  return [feedback_array,feedback_color];\r\n}\r\n\r\nfunction retrieve_row_no_item_name(this_element){\r\n  var these_classes = this_element.className.split(\" \");\r\n  var row_no;\r\n  var item_name;\r\n  these_classes.forEach(function(this_class){\r\n    if (this_class.indexOf('row_') > -1) {\r\n      row_no = this_class.replace(\"row_\",\"\");\r\n    }\r\n    if (this_class.indexOf('_item') > -1) {\r\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\r\n    }\r\n  });\r\n  return [row_no,item_name];\r\n}\r\n\r\nfunction reveal_answers(this_element){\r\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\r\n  response_present = this_response == \"\" ? false : true;\r\n\r\n  if(settings.feedback_before_response == false && response_present == false){\r\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\r\n  } else {\r\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\r\n      if(settings.lock_after_feedback){\r\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\r\n        $(\".\"+item_class).prop(\"disabled\",true);\r\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).html(\"Locked\");\r\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\r\n        $(\"#\"+this_element.id).addClass(\"disabled\");\r\n      } else {\r\n        $(\"#\"+this_element.id).html(\"Hide\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n      }\r\n    } else {\r\n      $(\"#\"+this_element.id).html(\"Show\");\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\r\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\r\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\r\n    }\r\n  }\r\n}\r\n\r\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\r\n  var tmp, current, top = array.length;\r\n  if(top) while(--top) {\r\n    current = Math.floor(Math.random() * (top + 1));\r\n    tmp = array[current];\r\n    array[current] = array[top];\r\n    array[top] = tmp;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction update_score(){\r\n  var scales = Object.keys(survey_obj.scales);\r\n  scales.forEach(function(scale){\r\n    this_scale = survey_obj.scales[scale];\r\n    var questions = Object.keys(this_scale.questions);\r\n    var this_score = 0;\r\n    complete_score = true;\r\n\r\n    questions.forEach(function(row_no){\r\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\r\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\r\n      var normal_reverse = this_scale.questions[row_no];\r\n\r\n      if(normal_reverse.indexOf(\"-\") == -1){\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\r\n        }\r\n      } else {\r\n        values_reverse = normal_reverse.split(\"-\");\r\n        values_col     = values_reverse[0].toLowerCase();\r\n        normal_reverse = values_reverse[1];\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\r\n        }\r\n      }\r\n      if(typeof(this_value) !== \"undefined\"){\r\n        this_score += multiplier * this_value;\r\n      } else {\r\n        complete_score = false;\r\n      }\r\n    });\r\n    if(complete_score){\r\n      $(\".score_\"+scale).addClass(\"bg-success\");\r\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\r\n    } else {\r\n      $(\".score_\"+scale).removeClass(\"text-success\");\r\n      $(\".score_\"+scale).addClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\r\n    }\r\n    $(\".score_\"+scale).val(this_score);\r\n  });\r\n}\r\n\r\nfunction write_survey(this_survey,this_id){\r\n  scoring_object.update_scales(this_survey);\r\n  this_survey_html = \"<table class='table_break' id='table0'>\";\r\n  this_survey_object={\r\n    content:[],\r\n    shuffle:[],\r\n    content_new_order:[],\r\n    shuffled_content:[],\r\n    shuffled_arrays:{},\r\n  }\r\n\r\n  this_survey_html += \"<tr>\";\r\n  for(i = 0; i < this_survey.length; i++){\r\n    this_row = this_survey[i];\r\n    row_html = process_survey_question(this_row,i);\r\n\t\tthis_survey_object.content.push(row_html[0]);\r\n    this_survey_object.shuffle.push(row_html[1]);\r\n\t}\r\n\r\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\r\n\r\n\tfor(var i=0;i<unique_shuffles.length;i++){\r\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\r\n      unique_shuffles[i] !== \"none\" &&\r\n      unique_shuffles[i] !== \"\"){\r\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\r\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\r\n  \t       return this_survey_object.content[index];\r\n    \t   }\r\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\r\n    \tnew_order = shuffle(shuffled_content);\r\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\r\n    }\r\n\t}\r\n\r\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\r\n\tfor(var i=0;i<this_survey_object.content.length;i++){\r\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\r\n    if(this_index !== -1){\r\n      //take first item off relevant list and delete item\r\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\r\n      this_survey_object.content_new_order[i]=this_item;\r\n    } else {\r\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\r\n    }\r\n\t}\r\n\r\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\r\n\tquestions_in_order += \"</tr>\";\r\n\r\n\tthis_survey_html += questions_in_order;\r\n\tthis_survey_html += \"</table>\";\r\n\r\n\t$(\"#\" + this_id).html(this_survey_html);\r\n\r\n\t$(\"#\" + this_id).show(1000,function(){\r\n\t\t// Set all buttons to the max width\r\n\t\t/*\r\n\t\tvar maxWidth = 0;\r\n\t\t$('.btn').each(function(index, element) {\r\n\t\t\tvar curWidth = $(element).width();\r\n\t\t\tif (maxWidth < curWidth ) {\r\n\t\t\t\tmaxWidth = curWidth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.survey_btn').each(function(i) {\r\n\t\t\t$(this).delay(200).animate({\r\n\t\t\t\t\"width\" : maxWidth\r\n\t\t\t});\r\n\t\t});\r\n\t\t*/\r\n\t});\r\n\r\n\t//scroll to top\r\n\r\n\r\n\t$(\".show_tab\").on(\"click\",function(){\r\n    if(this.className.indexOf(\"disabled\") == -1){\r\n      $(\".show_tab\").removeClass(\"active\");\r\n      $(\".survey_page\").hide();\r\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\r\n    } else {\r\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\r\n    }\r\n\t});\r\n  $('[data-toggle=\"tooltip\"]').tooltip();\r\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\r\n}\r\n\r\n//////////////////\r\n// Load survey  //\r\n//////////////////\r\ncurrent_survey = \"{{survey}}\";\r\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\r\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\r\n    load_survey(current_survey);\r\n  },100);\r\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\r\n  load_survey(current_survey);\r\n}\r\n\r\n\r\n</script>\r\n"
        },
        "procs_csv": {
          "procedure_1.csv": "item,trial type,max time,text,Shuffle 1,survey,\r\n2,instruct,user,This is the start of a new experiment.,off,,\r\n0,survey,user,,off,t1_consent form.csv,\r\n,,,,,,"
        },
        "stims_csv": {
          "stimuli_1.csv": "cue,answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"
        },
        "conditions_csv": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,\r\n,,,,,,,,,,,",
        "mods": {},
        "conditions": [
          {
            "name": "condition_1",
            "notes": "You can put more detailed notes in this field",
            "stimuli": "stimuli_1.csv",
            "procedure": "procedure_1.csv",
            "fullscreen": "off",
            "welcome": "",
            "participant_id": "on",
            "end_message": "",
            "start_message": "",
            "buffer": "5",
            "scripts": "",
            "": ""
          }
        ]
      },
      "screening": {
        "all_procs": {
          "procedure_1.csv": [
            [
              "item",
              "trial type",
              "max time",
              "text",
              "Shuffle 1",
              "survey",
              ""
            ],
            [
              "2",
              "instruct",
              "user",
              "This is the start of a new experiment.",
              "off",
              "",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Information Sheet",
              "off",
              "information sheet.csv",
              ""
            ],
            [
              "0",
              "instruct",
              "user",
              "Screening Questionnaire",
              "off",
              "t0_screening_questionnaire.csv",
              ""
            ],
            [
              "",
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          ]
        },
        "cond_array": [
          [
            "name",
            "notes",
            "stimuli",
            "procedure",
            "fullscreen",
            "welcome",
            "participant_id",
            "end_message",
            "start_message",
            "buffer",
            "scripts",
            ""
          ],
          [
            "condition_1",
            "You can put more detailed notes in this field",
            "stimuli_1.csv",
            "procedure_1.csv",
            "off",
            "",
            "on",
            "",
            "",
            "5",
            "",
            ""
          ],
          [
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
          ]
        ],
        "all_stims": {
          "stimuli_1.csv": [
            [
              "cue",
              "answer",
              ""
            ],
            [
              "A",
              "Apple",
              ""
            ],
            [
              "B",
              "Banana",
              ""
            ],
            [
              "",
              "",
              ""
            ]
          ]
        },
        "public_key": "HiuOHuPSLVabH6VS3kRG4dPh/S+hpGhmvsOZoZlZNzM=",
        "parsed_procs": {
          "procedure_1.csv": [
            {
              "item": "2",
              "trial type": "instruct",
              "max time": "user",
              "text": "This is the start of a new experiment.",
              "survey": "",
              "": "",
              "shuffle 1": "off"
            },
            {
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Information Sheet",
              "survey": "information sheet.csv",
              "": "",
              "shuffle 1": "off"
            },
            {
              "item": "0",
              "trial type": "instruct",
              "max time": "user",
              "text": "Screening Questionnaire",
              "survey": "t0_screening_questionnaire.csv",
              "": "",
              "shuffle 1": "off"
            }
          ]
        },
        "surveys": {
          "information sheet.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              null,
              null
            ],
            [
              "Information",
              "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
              "instruct",
              "",
              "",
              "Information",
              "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
              null
            ],
            [
              "info",
              "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. <b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation.</b> The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
              "instruct",
              "",
              "",
              "info",
              "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation. The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
              null
            ],
            [
              "proceed",
              "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
              "instruct",
              "Proceed",
              "no",
              "proceed",
              "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ],
          "t0_screening_questionnaire.csv": [
            [
              "item_name",
              "text",
              "Type",
              "Answers",
              "Optional",
              "Values",
              "side_by_side",
              "btn_width",
              null
            ],
            [
              "Info",
              "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
              "instruct",
              null,
              null,
              null,
              null,
              "",
              null
            ],
            [
              "Country",
              "What is your country of residence?",
              "Text",
              "",
              "No",
              "",
              "",
              "",
              null
            ],
            [
              "Age",
              "Age",
              "Number",
              "",
              "No",
              "",
              "",
              "",
              ""
            ],
            [
              "Occupation",
              "What is your professional occupation",
              "Dropdown",
              "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
              "No",
              null,
              null,
              null,
              null
            ],
            [
              "NHS",
              "Are you currently in employment within the NHS",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Health",
              "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
              "Likert",
              "Left|Right|Both",
              "No",
              "",
              "yes",
              "100px",
              ""
            ],
            [
              "Medications",
              "Are you currently taking any medications?",
              "Likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Consent_to_contact",
              "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Telephone_briefing",
              "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
              "likert",
              "Yes|No",
              "No",
              null,
              "yes",
              "200px",
              null
            ],
            [
              "Contact",
              "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
              "Text",
              null,
              "No",
              null,
              null,
              null,
              null
            ],
            [
              "Submit",
              "Please click 'Proceed' to submit your responses. Thank you",
              "instruct",
              null,
              null,
              null,
              null,
              null,
              null
            ],
            [
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null,
              null
            ]
          ]
        },
        "trialtypes": {
          "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>"
        },
        "procs_csv": {
          "procedure_1.csv": "item,trial type,max time,text,Shuffle 1,survey,\r\n2,instruct,user,This is the start of a new experiment.,off,,\r\n0,instruct,user,Information Sheet,off,information sheet.csv,\r\n0,instruct,user,Screening Questionnaire,off,t0_screening_questionnaire.csv,\r\n,,,,,,"
        },
        "stims_csv": {
          "stimuli_1.csv": "cue,answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"
        },
        "conditions_csv": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,\r\n,,,,,,,,,,,",
        "conditions": [
          {
            "name": "condition_1",
            "notes": "You can put more detailed notes in this field",
            "stimuli": "stimuli_1.csv",
            "procedure": "procedure_1.csv",
            "fullscreen": "off",
            "welcome": "",
            "participant_id": "on",
            "end_message": "",
            "start_message": "",
            "buffer": "5",
            "scripts": "",
            "": ""
          }
        ],
        "mods": {},
        "location": "hodgson-haffey/autumn-2020",
        "storage_scripts": {
          "ocollector.org": "https://ocollector.org/StoreData10_aodirnkcu73hsjd8.php"
        }
      }
    },
    "incomp_process": false,
    "pipe_position": 0,
    "pipe_direction": "",
    "versions": []
  },
  "github": {
    "organisation": "haffey-studies",
    "repository": "test9",
    "organisations": {
      "haffey-studies": {
        "repositories": {
          "test9": {}
        }
      }
    }
  },
  "surveys": {
    "preview": true,
    "user_surveys": {
      "information sheet.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          null,
          null
        ],
        [
          "Information",
          "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
          "instruct",
          "",
          "",
          "Information",
          "<b>Title of Study: Investigating The Effect of Flavonoid Consumption on Cognition and Mood in Young People</b>",
          null
        ],
        [
          "info",
          "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. <b>It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation.</b> The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
          "instruct",
          "",
          "",
          "info",
          "We would be grateful to you if you could assist us by participating in our online study exploring whether a diet rich in flavonoids is associated with mood and cognitive task performance. Flavonoids are naturally-occurring compounds found in foods such as berry & citrus fruits, leafy green vegetables, tea, chocolate and red wine. Previous research has shown that consumption of flavonoid-rich foods may improve cognition and mood.<br>\n\n<br>\nThe study will be completed online via a weblink and will not require any changes in diet. Your participation will be done in one sitting from any location where you have access to the internet. It is advised that you complete the study on a laptop, desktop or tablet device for best screen presentation. The study will take approximately 30 minutes, during which time you will complete a cognitive task and a set of questionnaires asking general information about you and asking questions about your mood and diet. <br>\n<br>\n\n\nYour data will be kept confidential and securely stored, with only an anonymous number identifying it. All information will be destroyed after a period of 5 years from the completion of the project. Taking part in this study is completely voluntary; you may withdraw at any time without having to give any reason. Please feel free to ask any questions that you may have about this study at any point. \n<br><br>\nIf you score above threshold for risk of depression you will be notified via email. Upon completion of the study all participants will be provided with mood & depression support links.<br><br>\n\nThis application has been reviewed by the University Research Ethics Committee and has been given a favourable ethical opinion for conduct.\n\nIf you have any questions or concerns then please get in contact with the study supervisor Dr Katie Barfoot through this email katie.barfoot@reading.ac.uk \n\nThank you for your help.",
          null
        ],
        [
          "proceed",
          "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
          "instruct",
          "Proceed",
          "no",
          "proceed",
          "<b> Would you like to proceed?</b><span style='font-size:16'></span>",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "consent_form.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          null
        ],
        [
          "title",
          "<b>Please select 'Yes' after each statement to confirm it has been read and agreed to.</b>",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "A1",
          "I have read and had explained to me by Hannah-Rose Human, Lyana Halawi or Tatiana Tavares the accompanying Information Sheet relating to the project on: the effect of flavonoid consumption on cognition and mood in young people",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A2",
          "I have had explained to me the purposes of the project and what will be required of me, and any questions I have had have been answered to my satisfaction. I agree to the arrangements described in the Information Sheet in so far as they relate to my participation. ",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A3",
          "I have had explained to me what information will be collected about me, what it will be used for, who it may be shared with, how it will be kept safe, and my rights in relation to my data. ",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A4",
          "I understand that participation is entirely voluntary and that I have the right to withdraw from the project any time, and that this will be without detriment. ",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A5",
          "I understand that the data collected from me in this study will be preserved and made available in anonymised form, so that they can be consulted and re-used by others. ",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A6",
          "I understand that this project has been reviewed by the University Research Ethics Committee and National Research Ethics committee where relevant and has been given a favourable ethical opinion for conduct. ",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "A8",
          "Please input your initials in place of a signature",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "A9",
          "Today's date (DD/MM/YY)",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "A10",
          "Date of birth (DD/MM/YY)",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "demographics_example.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          null
        ],
        [
          "About_you",
          "<b>Information about you</b>",
          "instruct",
          null,
          null,
          null
        ],
        [
          "Gender",
          "Gender",
          "likert",
          "Male|Female|Other|Prefer not to say",
          "No",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          null
        ],
        [
          "Education",
          "Education (which level are you currently in, or is the highest you've completed)",
          "likert",
          "Some secondary school| Secondary school graduate| Some college, no degree| College graduate| University Bachelor degree|University Graduate degree (Master, Doctorate, etc.)",
          "No",
          null
        ],
        [
          "Native_Language",
          "What is your native language?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "English_Fluency",
          "Do you speak English fluently?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "English_Age",
          "At what age did you start learning English? (write \"0\" if from birth)",
          "Number",
          "",
          "No",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "Handedness",
          "What is your preferred hand?",
          "Likert",
          "Left|Right|Both",
          "No",
          null
        ],
        [
          "Ethnicity",
          "If you would like to please state your ethnicity",
          "Text",
          "",
          "Yes",
          null
        ],
        [
          "Vision",
          "Do you have normal or corrected vision?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "Exercise",
          "How often do you exercise?",
          "likert",
          "Less than 1 time per week|1 time per week|2-3 times per week|4-5 times per week|6+ times per week",
          "No",
          null
        ],
        [
          "Mental_Health_History",
          "Have you got any diagnosed mental health disorders?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "mental_Health_Details",
          "If yes, what is/are your diagnoses?",
          "Text",
          "",
          "",
          null
        ],
        [
          "Physical_health",
          "Have you got any diagnosed physical health disorders?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "Physical_health_details",
          "If yes, what is/are your diagnoses?",
          "Text",
          "",
          "",
          null
        ],
        [
          "Sleep",
          "How long, on average, do you sleep every night?",
          "likert",
          "Less than 5 hours|6-7 hours|8-9 hours|10+ hours",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "panas.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: Positive_affect",
          "Score: Negative_affect",
          "Optional",
          null
        ],
        [
          "Instructions1",
          "Please rate how you currently feel. Choose one response that best describes how strongly each item applies to you RIGHT NOW:",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "AQ1",
          "Interested",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ2",
          "Distressed",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ3",
          "Excited",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ4",
          "Upset",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ5",
          "Strong",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ6",
          "Guilty",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ7",
          "Scared",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ8",
          "Hostile",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ9",
          "Enthusiastic",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ10",
          "Proud",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ11",
          "Irritable",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ12",
          "Alert",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ13",
          "Ashamed",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ14",
          "Inspired",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ15",
          "Nervous",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ16",
          "Determined",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ17",
          "Attentive",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ18",
          "Jittery",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ19",
          "Active",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ20",
          "Afraid",
          "likert",
          "Extremely|Quite a bit|Moderately|A little|Very slightly or not at all",
          "1|1|0|-1|-1",
          "",
          "1",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "ffq.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: High_Flavonoid_Foods",
          "Score: Junk_Food",
          "Score: Dairy",
          "Score: Alcohol",
          "Optional",
          null
        ],
        [
          "Instructions1",
          "Please estimate your average food use as best as you can, and please answer every question - do not leave ANY lines blank. PLEASE SELECT AN ANSWER FOR EVERY LINE.",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "AQ1",
          "Pizza",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ2",
          "Low fat yogurt, fromage (125g carton)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ3",
          "Full fat or Greek yogurt (125g carton)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ4",
          "Dairy desserts (125g carton)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ5",
          "Cheese, e.g. Cheddar, Brie, Edam (medium serving)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ6",
          " Cottage cheese, low fat soft cheese (medium serving)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "1",
          "",
          "No",
          null
        ],
        [
          "AQ7",
          "Sweet biscuits, chocolate, e.g. digestive (one)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ8",
          "Sweet biscuits, plain e.g. Nice, ginger (one)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ9",
          "Cakes e.g. fruit, sponge, home baked",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ10",
          "Cakes  e.g. fruit, sponge, ready made",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ11",
          "Buns, pastries e.g. scones, flapjacks, homebaked",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ12",
          "Buns, pastries e.g. croissants, doughnuts, ready made",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ13",
          "Fruit pies, tarts, crumbles, home baked ",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ14",
          "Fruit pies, tarts, crumbles, ready made",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ15",
          "Sponge puddings, home baked",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ16",
          "Sponge puddings, ready made",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ17",
          "Milk puddings, e.g. rice, custard, trifle ",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ18",
          "Ice cream, choc ices",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ19",
          "Dark Chocolates, single or squares",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ20",
          "Sweets, toffees, mints",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ21",
          "Crisps or other packet snacks, e.g. Wotsits",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ22",
          "Leafy Green Vegetable soups (bowl)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ23",
          "Black tea (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ24",
          "Green tea (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ25",
          "Fruit tea (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ26",
          "White tea (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ27",
          "Other tea (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ28",
          "Coffee, instant or ground (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ29",
          "Cocoa, hot chocolate (cup)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ30",
          "White wine (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ31",
          "Red wine (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ32",
          "Rose wine (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ33",
          "Beer, lager or cider (half pint)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ34",
          "Port, sherry, vermouth, liqueurs (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ35",
          "Spirits, e.g. gin, brandy, whisky, vodka (single)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "",
          "",
          "1",
          "No",
          null
        ],
        [
          "AQ36",
          "Low calorie or diet fizzy soft drinks (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ37",
          "Fizzy soft drinks, e.g. Coca cola, lemonade (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          " ",
          "1",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ38",
          "Pure fruit juice (100%) e.g. orange, apple juice (glass)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ388",
          "Apples",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          null,
          null,
          null,
          "No",
          null
        ],
        [
          "AQ39",
          "Oranges, satsumas, mandarins (1 fruit)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ40",
          "Grapefruit (medium serving)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ41",
          "Strawberries, raspberries, blueberries (medium serving)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ42",
          "Dried fruit - raisins, cranberries, blueberries  (medium serving)",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ43",
          "Broccoli, spring greens, kale",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ44",
          "Leeks",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ45",
          "Onions",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          "AQ46",
          "Tomatoes",
          "likert",
          "Never or less than once/month|1-3 per month|Once a week|2-4 per week|5-6 per week|Once a day|2-3 per day|4-5 per day|6+ per day",
          "0|1|2|3|4|5|6|7|8",
          "1",
          "",
          "",
          "",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "bond_lader_vas_mood.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          null
        ],
        [
          "Instructions1",
          "Please rate the way you feel in terms of the dimensions given below, inputting a score from 0-100. Regard the term on the left hand side as 0 and the term on the right hand side as 100. Rate your feelings as they are AT THE MOMENT.",
          "Instruct",
          "",
          "",
          "",
          null
        ],
        [
          "AQ1",
          "Alert - Drowsy",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ2",
          "Calm - Excited",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ3",
          "Strong - Feeble",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ4",
          "Muzzy - Clear-Headed",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ5",
          "Well-Coordinated - Clumsy",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ6",
          "Lethargic - Energic",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ7",
          "Contended - Discontented",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ8",
          "Troubled - Tranquil",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ9",
          "Mentally Slow - Quick-Witted",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ10",
          "Tense - Relaxed",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ11",
          "Attentive - Dreamy",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ12",
          "Incompetent - Proficient",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ13",
          "Happy - Sad",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ14",
          "Antagonistic - Amicable",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ15",
          "Interested - Bored",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          "AQ16",
          "Withdrawn - Gregarious",
          "number",
          "",
          "0|100",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "phq8.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          null
        ],
        [
          "Instructions1",
          "Choose one response that best describes how strongly each item applies to you:",
          "Instruct",
          "",
          "",
          "",
          null
        ],
        [
          "AQ1",
          "Little interest or pleasure in doing things",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ2",
          "Feeling down, depressed, or hopeless",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ3",
          "Trouble falling or staying asleep, or sleeping too much",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ4",
          "Feeling tired or having little energy",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ5",
          "Poor appetite or overeating",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ6",
          "Feeling bad about yourself, or that you are a failure, or have let yourself or your family down",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ7",
          "Trouble concentrating on things, such as reading the newspaper or watching television",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          "AQ8",
          "Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual",
          "likert",
          "Not at all|Several days|More than half the days|Nearly every day",
          "0|1|2|3",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "debrief.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "",
          null
        ],
        [
          "Information",
          "<b>Debrief Sheet</b><br>\n<br>\n<b>Project title: The effect of flavonoid consumption on cognition and mood in young people.</b>",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "info",
          "Thank you for taking part in this study, we are very grateful for your contribution. ",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "This study aims to explore whether flavonoid intake is related to mood and cognition. Flavonoids are naturally occurring compounds found in foods such as berry and citrus fruits, leafy green vegetables, dark chocolate, tea and red wine. Previous research has found that flavonoids may have a beneficial effect on cognition and mood in children and older adults, however little research has investigated these effects in healthy young adults. In the current study, participants were asked to answer questionnaires on habitual diet and mood and were also asked to complete a cognitive task.",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "Your data will be securely stored and kept confidential. It will be automatically anonymized and cannot be traced back to you. If you choose to withdraw (see details on how to do this below), your data will not be used but will be stored along with the data of the other participants.",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "If you have any concerns about the research, please contact the project supervisor, Dr. Katie Barfoot.",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "Email: katie.barfoot@reading.ac.uk ",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "If you choose to withdraw, if you would like further information about the study or if you would like to know about the findings once the study is complete, then please contact one of the researchers, Hannah-Rose Human, Lyana Halawi or Tatiana Tavares, via email.",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "Email: h.human@student.reading.ac.uk",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "Email: l.halawi@student.reading.ac.uk",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "",
          "Email: t.fernandestavares@student.reading.ac.uk",
          "instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "contact",
          "If taking part in this study has raised any specific concerns about your mental health then we would suggest you <b>contact your general practitioner (GP).</b> \nWe have also provided some <b>helpful links and contacts below</b> should you wish to seek further support.<br>\n<br>\n\n\n<b>Samaritans</b>: the Samaritans provide a 24/7 hotline for people to confidentially talk about their feelings and problems.<br>\n\nEmail: jo@Samaritans.org , Tel: 116 123<br>\n<br>\n\n\n<b>NHS mental health helplines:</b> https://www.nhs.uk/conditions/stress-anxiety-depression/mental-health-helplines/ <br>\n<br>\n\n\n<b>\nStudent Welfare Team:</b> students at the University of Reading have the opportunity to contact the Student Welfare Team to support them with difficulties they might be facing.\nWebsite: http://student.reading.ac.uk/essentials/_support-and-wellbeing/support-arrangements/welfare.aspx \nEmail: studentwelfare@reading.ac.uk",
          "instruct",
          "",
          "",
          "",
          "contact",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "new_info_sheet.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          "side_by_side",
          null
        ],
        [
          "Instructions1",
          "<h1>PARTICIPANT INFORMATION SHEET </h1>\n\n<h2>Title of Project:  <u><span style='color:#f20707'>[[Your project title]]</span></u>.</h2>\n\n<h3>Name of Lead Investigator:  <span style='color:#f20707'>[[Investigator]]</span> ([[<span style='color:#f20707'>Institute</span>]]) </h3>\n\n<h4>Invitation paragraph</h4>\nYou have been invited to take part in a research study.  Before you decide whether to take part it is important for you to understand why the research is being done and what it will involve.  Please take time to read the following information carefully and discuss it with friends and relatives if you wish to. Ask us if there is anything that is not clear or if you would like more information. Take time to decide whether you wish to take part or not.  Thank you for reading this.<br><br>\n\n<h4>What is the study about?</h4>\n<span style='color:#f20707'>[[describe your experiment here]]</span>.<br><br>\n\n<h4>What does the study involve?</h4>\n<span style='color:#f20707'>[[what the participant will do]]</span> <br><br>\n\n<h4>Why have I been chosen?</h4>\n<span style='color:#f20707'>[[criterion, e.g. age, etc.]]</span>  <br><br>\n\n<h4>Do I have to take part?</h4>\nIt is up to you to decide whether or not to take part.  If you do decide to take part you will be given this information sheet to keep and be asked to sign a consent form.  If you decide to take part you are still free to withdraw at any time during the data collection without giving a reason.<br><br>\n\n<h4>I am interested in taking part, what do I do next?</h4>\nPlease find a quiet room with minimal distractions. Please ensure you have a good internet connection on a PC / laptop / tablet device. <span style='color:#070ff2'>[[optional: Please do not run the study on a mobile phone]]</span>. Make sure that you have about <span style='color:#f20707'>[[time needed]]</span> minutes time to complete the study. Once ready please follow the link to the online study.<br><br>\n\n<h4>What if I agree to take part and then change my mind?</h4>\nThat is fine. If you decide to withdraw you would need to provide your participation ID to the researchers. The researcher will then delete all the data generated by that ID from their computers. <br><br>\n\n<h4>What are the possible disadvantages and risks of taking part?</h4>\n <span style='color:#f20707'>[[describe risks etc. here]]</span><br><br>\n\n<h4>What are the possible benefits of taking part? </h4>\n<span style='color:#f20707'>[[benefits here]]</span> <br><br>\n\n<h4>Who can I complain to?</h4>\nIf you have a complaint regarding anything to do with this study, you can initially approach the lead investigator <span style='color:#f20707'>[[lead investigator]]</span> (<span style='color:#f20707'>[[lead_investigator_email]]</span>).  If this achieves no satisfactory outcome, you should then contact <span style='color:#f20707'>[[person to contact next]]</span><br><br>\n\n<h4>Will my taking part in this study be kept confidential?</h4>\nAll information which is collected about you during the course of the research will be kept on a password protected database and is strictly confidential. You will be given an ID code which will be used instead of your name. Your data will be shared with the following collaborators: <br> <span style='color:#f20707'>[[list of collaborators]]</span>\n<br><br>\n\n<span style='color:#070ff2'>[[optional: Your anonymised data can be shared with other research teams interested in understating it further.]]</span><br>\nThe raw data will be stored for up to 10 years after a study has been completed.<br> Members of the faculty human research ethics committee may require access to check that the study has been conducted in accordance with the approval. <br>\n\n\n<h4>What will happen to the results of the research study?</h4>\nThe results based on performance of the group of participants will be then analysed and submitted for publication in peer reviewed scientific journals. <br><br>\n\n<h4>Who is organising and funding the research?</h4>\n<br><br><span style='color:#f20707'>[[information about researchers and funders here]]</span>\n\n<h4>Who has reviewed the study?</h4>\nThis study has been reviewed and approved by <span style='color:#f20707'>[[your ethics committee]]</span>.<br><br>\n<br>\n<h4>How is data secured?</h4>\nData is encrypted in Collector on the participant's computer. This data cannot be decrypted without the researcher's password. For more information, go to: <a target=\"_blank\" href=\"https://some-open-solutions.github.io/collector/encryption.html\">https://some-open-solutions.github.io/collector/encryption.html</a>\n<h4>Contact for Further Information</h4>\n<span style='color:#f20707'>[[your contact information]]</span>",
          "Instruct",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "Info_Accept",
          "I understand these instructions and am happy to continue",
          "likert",
          "Agree",
          "1",
          "No",
          "yes",
          null
        ],
        [
          "",
          null
        ]
      ],
      "demographic_test.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          null
        ],
        [
          "About_you",
          "<b>Information about you</b>",
          "instruct",
          null,
          null,
          null
        ],
        [
          "Gender",
          "Gender",
          "likert",
          "Male|Female|Other|Prefer not to say",
          "No",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          null
        ],
        [
          "Education",
          "Education (which level are you currently in, or is the highest you've completed)",
          "likert",
          "Some secondary school| Secondary school graduate| Some college, no degree| College graduate| University Bachelor degree|University Graduate degree (Master, Doctorate, etc.)",
          "No",
          null
        ],
        [
          "Native_Language",
          "What is your native language?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "English_Fluency",
          "Do you speak English fluently?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "English_Age",
          "At what age did you start learning English? (write \"0\" if from birth)",
          "Number",
          "",
          "No",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "Handedness",
          "What is your preferred hand?",
          "Likert",
          "Left|Right|Both",
          "No",
          null
        ],
        [
          "Ethnicity",
          "If you would like to please state your ethnicity",
          "Text",
          "",
          "Yes",
          null
        ],
        [
          "Vision",
          "Do you have normal or corrected vision?",
          "Text",
          "",
          "No",
          null
        ],
        [
          "Exercise",
          "How often do you exercise?",
          "likert",
          "Less than 1 time per week|1 time per week|2-3 times per week|4-5 times per week|6+ times per week",
          "No",
          null
        ],
        [
          "Mental_Health_History",
          "Have you got any diagnosed mental health disorders?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "mental_Health_Details",
          "If yes, what is/are your diagnoses?",
          "Text",
          "",
          "",
          null
        ],
        [
          "Physical_health",
          "Have you got any diagnosed physical health disorders?",
          "likert",
          "Yes|No",
          "No",
          null
        ],
        [
          "Physical_health_details",
          "If yes, what is/are your diagnoses?",
          "Text",
          "",
          "",
          null
        ],
        [
          "Sleep",
          "How long, on average, do you sleep every night?",
          "likert",
          "Less than 5 hours|6-7 hours|8-9 hours|10+ hours",
          "No",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "questionnaire_t.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: AQ_Test",
          "Score: Social_Skill",
          "Score: Attention_switching",
          "Score: Communication",
          "Score: Imagination",
          "Score: Attention_to_detail",
          "Optional",
          "btn_width",
          null
        ],
        [
          "Instructions1",
          "<span style='color:#006699'><span style='font-size:20px'>Choose one response that best describes how strongly each item applies to you:</span></span>",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "AQ1",
          "I prefer to do things with others rather than on my own.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ2",
          "I prefer to do things the same way over and over again.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ3",
          "If I try to imagine something, I find it very easy to create a picture in my mind.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ4",
          "I frequently get so strongly absorbed in one thing that I lose sight of other things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ5",
          "I often notice small sounds when others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ6",
          "I usually notice car number plates or similar strings of information.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ7",
          "Other people frequently tell me that what I've said is impolite, even though I think it is polite.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ8",
          "When I'm reading a story, I can easily imagine what the characters might look like.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ9",
          "I am fascinated by dates.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ10",
          "In a social group, I can easily keep track of several different people's conversations.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ11",
          "I find social situations easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ12",
          "I tend to notice details that others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ13",
          "I would rather go to a library than a party.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ14",
          "I find making up stories easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ15",
          "I find myself drawn more strongly to people than to things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ16",
          "I tend to have very strong interests which I get upset about if I can't pursue.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ17",
          "I enjoy social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ18",
          "When I talk, it isn't always easy for others to get a word in edgeways.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ19",
          "I am fascinated by numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ20",
          "When I'm reading a story, I find it difficult to work out the characters' intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ21",
          "I don't particularly enjoy reading fiction.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ22",
          "I find it hard to make new friends.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ23",
          "I notice patterns in things all the time.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "AQ24",
          "I would rather go to the theatre than a museum.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ25",
          "It does not upset me if my daily routine is disturbed.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ26",
          "I frequently find that I don't know how to keep a conversation going.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ27",
          "I find it easy to 'read between the lines' when someone is talking to me.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ28",
          "I usually concentrate more on the whole picture, rather than the small details.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px",
          null
        ],
        [
          "AQ29",
          "I am not very good at remembering phone numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px",
          null
        ],
        [
          "AQ30",
          "I don't usually notice small changes in a situation, or a person's appearance.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px",
          null
        ],
        [
          "AQ31",
          "I know how to tell if someone listening to me is getting bored.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ32",
          "I find it easy to do more than one thing at once.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ33",
          "When I talk on the phone, I'm not sure when it's my turn to speak.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ34",
          "I enjoy doing things spontaneously.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ35",
          "I am often the last to understand the point of a joke.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ36",
          "I find it easy to work out what someone is thinking or feeling just by looking at their face.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ37",
          "If there is an interruption, I can switch back to what I was doing very quickly.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ38",
          "I am good at social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ39",
          "People often tell me that I keep going on and on about the same thing.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ40",
          "When I was young, I used to enjoy playing games involving pretending with other children.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ41",
          "I like to collect information about categories of things (e.g. types of car, types of bird, types of train, types of plant, etc.).",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ42",
          "I find it difficult to imagine what it would be like to be someone else.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ43",
          "I like to plan any activities I participate in carefully.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ44",
          "I enjoy social occasions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ45",
          "I find it difficult to work out people's intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ46",
          "New situations make me anxious.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ47",
          "I enjoy meeting new people.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ48",
          "I am a good diplomat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "AQ49",
          "I am not very good at remembering people's date of birth.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px",
          null
        ],
        [
          "AQ50",
          "I find it very easy to play games with children that involve pretending.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "",
          null
        ]
      ],
      "t1_demographics.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          "",
          null
        ],
        [
          "Handedness",
          "What is your preferred hand?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px",
          null
        ],
        [
          "ethnicity",
          "If you would like to please state your ethnicity",
          "Text",
          "",
          "Yes",
          "",
          "",
          "",
          null
        ],
        [
          "Sex",
          "Sex",
          "likert",
          "Male|Female|Other",
          "No",
          null,
          "yes",
          "100px",
          null
        ],
        [
          "Gender",
          "Please self identify your gender:",
          "Text",
          "Male|Female|Other",
          "No",
          "",
          "yes",
          "100px",
          ""
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          "",
          ""
        ],
        [
          "Occupation",
          "What is your professional occupation",
          "Dropdown",
          "Some high school| High school graduate| Some college, no degree| Associate's degree| Bachelor's degree|Graduate degree (Master's, Doctorate, etc.)",
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "NHS",
          "Are you currently in employment within the NHS",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "t0_screening_questionnaire.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width",
          null
        ],
        [
          "Info",
          "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
          "instruct",
          null,
          null,
          null,
          null,
          "",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          "",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          "",
          ""
        ],
        [
          "Occupation",
          "What is your professional occupation",
          "Dropdown",
          "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "NHS",
          "Are you currently in employment within the NHS",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Health",
          "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px",
          ""
        ],
        [
          "Medications",
          "Are you currently taking any medications?",
          "Likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Consent_to_contact",
          "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Telephone_briefing",
          "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Contact",
          "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
          "Text",
          null,
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "Submit",
          "Please click 'Proceed' to submit your responses. Thank you",
          "instruct",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "t1_proqol-5.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: AQ_Test",
          "Score: Compassion Satisfaction Scale",
          "Score: Burnout Scale",
          "Score: Secondary Traumatic Stress Scale",
          "Optional",
          "btn_width",
          null
        ],
        [
          "Instructions1",
          "<span style='color:#006699'><span style='font-size:20px'>As a doctor; when you help people you have direct contact with their lives. As you may have found, your\ncompassion for those you help can affect you in positive and negative ways. Below are some questions\nabout your experiences, both positive and negative. Consider each of the following\nquestions about you and your current work situation. Select the number that honestly reflects how\nfrequently you experienced these things in the last 30 days. :</span></span>",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "ProQ1",
          "I am happy",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "r1",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ2",
          "I am preoccupied with more than patient I help",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ3",
          "I get satisfaction from being able to help patients",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ4",
          "I feel connected to others",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "r1",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ5",
          "I jump or am startled by unexpected sounds",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ6",
          "I feel invigorated after working with patients",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ7",
          "I find it difficult to separate my personal life from my life as a doctor",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ8",
          "I am not as productive at work because I am losing sleep over traumatic experiences of a patient",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ9",
          "I think that I might have been affected by the traumatic stress of those I help",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ10",
          "I feel trapped by my job as a doctor",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ11",
          "Because of my work, I have felt \"on edge\" about various things",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ12",
          "I like my work as a doctor",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ13",
          "I feel depressed because of the traumatic experiences of the people I help",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ14",
          "I feel as though I am experiencing the trauma of someone I have helped",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ15",
          "I have beliefs that sustain me",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "r1",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ16",
          "I am pleased with how I am able to keep up with professional techniques and protocols",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ17",
          "I am the person I always wanted to be",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "r1",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ18",
          "My work makes me feel satisfied",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ19",
          "I feel worn out because of my work as a doctor",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ20",
          "I have happy thoughts and feelings about patients, and how I could help them",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ21",
          "I feel overwhelmed because my workload seems endless",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ22",
          "I believe I can make a difference through my work",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ23",
          "I avoid certain activities or situations because they remind me of frightening experiences of the patients I help",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ24",
          "I am proud of what I can do to [help]",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ25",
          "As a result of my work, I have intrusive, frightening thoughts",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ26",
          "I feel \"bogged down\" by the system",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ27",
          "I have thoughts that I am a \"success\" as a doctor",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ28",
          "I can't recall important parts of my work with trauma victims",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "",
          "",
          "1",
          "No",
          "100px",
          null
        ],
        [
          "ProQ29",
          "I am a very caring person",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "r1",
          "",
          "r1",
          "",
          "No",
          "100px",
          null
        ],
        [
          "ProQ30",
          "I am happy that I chose to do this work",
          "likert",
          "Never|Rarely|Sometimes|Often|Very Often",
          "1|2|3|4|5",
          "1",
          "1",
          "",
          "",
          "",
          "100px",
          null
        ],
        [
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          null
        ]
      ],
      "t1_consent form.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          null
        ],
        [
          "title",
          "Consent Form: Please select 'Yes' after each statement to confirm it has been read and agreed to.</b>",
          "",
          "",
          "",
          "",
          null
        ],
        [
          "C1",
          "I was offered a telephone briefing by the researchers, and I have read the accompanying Information Sheet relating to the project on doctor hydration, well-being and competence.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C2",
          "I have had explained to me the purposes of the project and what will be required of me, and any questions I have had have been answered to my satisfaction. I agree to the arrangements described in the Information Sheet in so far as they relate to my participation.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C3",
          "I have had explained to me what information will be collected about me, what it will be used for, who it may be shared with, how it will be kept safe, and my rights in relation to my data.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C4",
          "I understand that participation is entirely voluntary and that I have the right to withdraw from the project any time, and that this will be without detriment.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C5",
          "I understand that the data collected from me in this study will be preserved and made available in anonymised form, so that they can be consulted and re-used by others.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C6",
          "If any concerns about my physical or psychological safety during the course of this study, I will be contacted initially. If there are further concerns about my safety following that contact regarding my ability to source appropriate support or self-management, I authorise the investigator to consult my General Practitioner in order to identify further support for me.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C7",
          "I understand that this project has been reviewed by the University of Reading Research Ethics Committee, and has been given a favourable ethical opinion for conduct.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C8",
          "I have been provided contact details for the researchers and understand I may contact them if I have any concerns, or require further information.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C9",
          "I understand that my anonymous survey responses may be used for publication and made available to other researchers for verification or further analysis after the study is completed.",
          "likert",
          "Yes | No",
          "no",
          null,
          null
        ],
        [
          "C10",
          "Please input your initials in place of a signature",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "C11",
          "Participant ID",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "C12",
          "Today's date (DD/MM/YY)",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "C13",
          "Date of birth (DD/MM/YY)",
          "Text",
          null,
          "no",
          null,
          null
        ],
        [
          "",
          "",
          "",
          "",
          "",
          "",
          ""
        ]
      ],
      "t1_information_sheet.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          "side_by_side",
          null
        ],
        [
          "",
          "<h1>PARTICIPANT INFORMATION SHEET </h1>"
        ],
        [
          null,
          "<h2> Exploration of the association between hydration status and competence in doctors<u><span style='color:#f20707'</span></u>.</h2>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>Invitation</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>You are invited to participate in a research project being undertaken by the School of Psychology and Clinical Language Sciences at the University of Reading. This study has been reviewed by the University of Reading Research Ethics Committee (project reference: ____________, end date: ______) and has been given a favourable ethical opinion for conduct. Before you decide whether you want to participate, it is important for you to understand why the research is being undertaken, and what your participation will involve. Please take time to read the following information carefully. If there is anything that is unclear or you would like further information please contact via the details listed below</span>.<br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>What is the study about?</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>The purpose of this research is to explore the association between hydration and competence in doctors.  The impact of hydration on a doctors work and wellbeing is currently not well understood by researchers, therefore all the varied perspectives we can learn about are valuable</span>.<br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>Criteria</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>This study invites adults currently in employment as a doctor by the National Health Service in the United Kingdom. Due to your specific health needs, we cannot recruit If you are pregnant or breastfeeding. Nor can we include doctors with current renal, cardiac, pulmonary, hepatic, digestive, thyroid, neurological or haematological disease, in addition to anyone taking medications (either prescribed or over-the-counter) that influence weight, fluid, or electrolyte balance</span>.<br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>What does the study involve?</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'> Once you have read this information sheet and if you interested in participating, you are invited to complete a brief online screening questionnaire and contact form. If you are eligible, a researcher will contact you with a formal invitation to participate and a consent form. Please indicate on the screening questionnaire if you would like a telephone discussion with the researcher to discuss any questions you may have prior to making a decision whether or not to participate, alternatively, you can email any queries to the contact details below. If you are eligible and decide to participate, you will be emailed a participant ID code, and a link to an online survey platform including the consent form. You will receive a testing pack in the post including sample pots, urinalysis reagent strips and comprehensive self-testing and online reporting instructions. You will be asked to complete online surveys on three occasions that you will access in private via a home laptop or PC. The first can be completed at any time convenient for you, the second and third must be completed when you return home following a working shift. The survey links will be accessible for three weeks, and you will receive two reminder invitations. In addition to the surveys, you will be asked to undertake self-assessed urinalysis using reagent labsticks. The self-administered urinalysis method is quick, non-invasive and you will be able to dispose of the sample immediately following input of your results. You will be required to provide a fluid record based over the duration of your working shift. On completion of the study you will be provided with a debriefing and offered a telephone debriefing (on request)</span> <br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>Do I have to take part?</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>You may stop at any time, and refrain from answering any questions that you are uncomfortable answering. Participation is both voluntary and anonymous. Once responses have been submitted, they can be withdrawn for up to a month by providing your participant ID and requesting removal of data. On completion of this survey you will not be required or asked to provide any further commitment to this research study, however you can opt to be notified of any future research that may be relevant to you</span> <br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>What are the possible disadvantages and risks of taking part?</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>This study invites you to think reflectively about your personal and professional experiences, this may have positive and negative emotional responses. Your urinalysis results are non-diagnostic but may indicate health needs (e.g. dehydration), you will be given details of the healthy-range scores and advised to seek medical guidance if you need further support to meet your health needs. If you do experience any distress as a result of your participation please contact the researchers, who will signpost any support resources and services and provide any further debriefing that may be helpful. Alternatively; a list of resources will be provided at the end of this survey if you would prefer to seek support anonymously.</span><br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>What are the possible benefits of taking part? </h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'> The aim of this study is to capture your professional experiences. Results from this study may be published to inform future research and support professional and public awareness of any identified needs. Publication of the results from this study may allow dissemination of valuable information that may prompt support and understanding for the needs of medical staff.</span> <br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>Confidentiality, data and your rights</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>Participation in this study is entirely voluntary. If you decline or withdraw participation you will not be disadvantaged in any way. This research will be written up as part of a thesis, and therefore deposited in print and online in the University of Reading archives. It may also be published as original research in a peer-reviewed scientific journal to facilitate future research and clinical care. No personally identifiable information will be included in any of these publications. Data will be handled in accordance with the Data Protection Act. All of the information you provide will be stored anonymously in an encrypted format on a secure server. Data will be stored on a password protected file, as with any electronic storage there is always potential risk of data intrusion e.g. through hacking. However, every foreseeable measure will be undertaken to protect the participants and data in this study from outside agents. In very rare circumstances where a participant flags up a risk of unmanageable harm to themselves or others, we may need to seek individual care for the person to ensure safety.  Following completion of the study, survey responses will be retained for a minimum of five years or until an indefinite time following publication of research, whereupon it can be used for further research and analysis.</span><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<h4>Contact information</h4>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          "<span style='color:#f20707'>Research is performed in the public interest and adheres to the guidelines set out by our organisational and governing bodies. Participation is voluntary. If you have any questions about this process please contact researcher Kirsty Hodgson by emailing k.l.hodgson@pgr.reading.ac.uk Alternatively, supervisors Dr Alln Laville (a.laville@reading.ac.uk) and Dr Daniel Lamport (daniel.lamport@reading.ac.uk) at the School of Psychology and Clinical Language Sciences may be contacted if you have any concerns about this study.  If following this process, you wish to raise a complaint, please contact the Research Ethics Committee at the University of Reading urec@reading.ac.uk <br><br>",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          "Info_Accept",
          "I understand these instructions and am happy to continue",
          "likert",
          "Agree",
          "1",
          "No",
          "yes",
          ""
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "screening_questionnaire_hydration_s1": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width",
          null
        ],
        [
          "Info",
          "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
          "instruct",
          null,
          null,
          null,
          null,
          "",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          "",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          "",
          ""
        ],
        [
          "Occupation",
          "What is your professional occupation",
          "Dropdown",
          "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "NHS",
          "Are you currently in employment within the NHS",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Health",
          "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px",
          ""
        ],
        [
          "Medications",
          "Are you currently taking any medications?",
          "Likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Consent_to_contact",
          "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Telephone_briefing",
          "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Contact",
          "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
          "Text",
          null,
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "Submit",
          "Please click 'Proceed' to submit your responses. Thank you",
          "instruct",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "hydration_screening_questionnaire": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width",
          null
        ],
        [
          "Info",
          "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
          "instruct",
          null,
          null,
          null,
          null,
          "",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          "",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          "",
          ""
        ],
        [
          "Occupation",
          "What is your professional occupation",
          "Dropdown",
          "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "NHS",
          "Are you currently in employment within the NHS",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Health",
          "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px",
          ""
        ],
        [
          "Medications",
          "Are you currently taking any medications?",
          "Likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Consent_to_contact",
          "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Telephone_briefing",
          "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Contact",
          "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
          "Text",
          null,
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "Submit",
          "Please click 'Proceed' to submit your responses. Thank you",
          "instruct",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ],
      "h_screening_survey": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width",
          null
        ],
        [
          "Info",
          "<h1>Screening Questionnaire</h1><br>\n<img src=\"../User/Stimuli/images/OIP.jpg\"/>",
          "instruct",
          null,
          null,
          null,
          null,
          "",
          null
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          "",
          null
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          "",
          ""
        ],
        [
          "Occupation",
          "What is your professional occupation",
          "Dropdown",
          "Medical Student| Junior Doctor| Qualified Doctor| Retired Doctor| Other",
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "NHS",
          "Are you currently in employment within the NHS",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Health",
          "Do you have any diagnosed chronic or acute health conditions (either physical or psychiatric)?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px",
          ""
        ],
        [
          "Medications",
          "Are you currently taking any medications?",
          "Likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Consent_to_contact",
          "Are you willing to be contacted via email by a researcher from the University to further discuss further participation?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Telephone_briefing",
          "Would you like a telephone discussion with a researcher to discuss any questions or concerns (if yes, please provide both email and phone number below)?",
          "likert",
          "Yes|No",
          "No",
          null,
          "yes",
          "200px",
          null
        ],
        [
          "Contact",
          "If you answered yes to the above, please provide your email address (required) and telephone number (optional) and if you are eligible a researcher will be in touch soon.",
          "Text",
          null,
          "No",
          null,
          null,
          null,
          null
        ],
        [
          "Submit",
          "Please click 'Proceed' to submit your responses. Thank you",
          "instruct",
          null,
          null,
          null,
          null,
          null,
          null
        ],
        [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          null
        ]
      ]
    },
    "default_surveys": {
      "autism_quotient.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: AQ_Test",
          "Score: Social_Skill",
          "Score: Attention_switching",
          "Score: Communication",
          "Score: Imagination",
          "Score: Attention_to_detail",
          "Optional",
          "btn_width"
        ],
        [
          "Instructions1",
          "<span style='color:#006699'><span style='font-size:20px'>Choose one response that best describes how strongly each item applies to you:</span></span>",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          ""
        ],
        [
          "AQ1",
          "I prefer to do things with others rather than on my own.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ2",
          "I prefer to do things the same way over and over again.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ3",
          "If I try to imagine something, I find it very easy to create a picture in my mind.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ4",
          "I frequently get so strongly absorbed in one thing that I lose sight of other things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ5",
          "I often notice small sounds when others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ6",
          "I usually notice car number plates or similar strings of information.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ7",
          "Other people frequently tell me that what I've said is impolite, even though I think it is polite.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ8",
          "When I'm reading a story, I can easily imagine what the characters might look like.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ9",
          "I am fascinated by dates.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ10",
          "In a social group, I can easily keep track of several different people's conversations.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ11",
          "I find social situations easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ12",
          "I tend to notice details that others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ13",
          "I would rather go to a library than a party.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ14",
          "I find making up stories easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ15",
          "I find myself drawn more strongly to people than to things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ16",
          "I tend to have very strong interests which I get upset about if I can't pursue.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ17",
          "I enjoy social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ18",
          "When I talk, it isn't always easy for others to get a word in edgeways.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ19",
          "I am fascinated by numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ20",
          "When I'm reading a story, I find it difficult to work out the characters' intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ21",
          "I don't particularly enjoy reading fiction.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ22",
          "I find it hard to make new friends.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ23",
          "I notice patterns in things all the time.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ24",
          "I would rather go to the theatre than a museum.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ25",
          "It does not upset me if my daily routine is disturbed.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ26",
          "I frequently find that I don't know how to keep a conversation going.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ27",
          "I find it easy to 'read between the lines' when someone is talking to me.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ28",
          "I usually concentrate more on the whole picture, rather than the small details.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ29",
          "I am not very good at remembering phone numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ30",
          "I don't usually notice small changes in a situation, or a person's appearance.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ31",
          "I know how to tell if someone listening to me is getting bored.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ32",
          "I find it easy to do more than one thing at once.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ33",
          "When I talk on the phone, I'm not sure when it's my turn to speak.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ34",
          "I enjoy doing things spontaneously.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ35",
          "I am often the last to understand the point of a joke.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ36",
          "I find it easy to work out what someone is thinking or feeling just by looking at their face.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ37",
          "If there is an interruption, I can switch back to what I was doing very quickly.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ38",
          "I am good at social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ39",
          "People often tell me that I keep going on and on about the same thing.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ40",
          "When I was young, I used to enjoy playing games involving pretending with other children.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ41",
          "I like to collect information about categories of things (e.g. types of car, types of bird, types of train, types of plant, etc.).",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ42",
          "I find it difficult to imagine what it would be like to be someone else.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ43",
          "I like to plan any activities I participate in carefully.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ44",
          "I enjoy social occasions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ45",
          "I find it difficult to work out people's intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ46",
          "New situations make me anxious.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ47",
          "I enjoy meeting new people.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ48",
          "I am a good diplomat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ49",
          "I am not very good at remembering people's date of birth.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ50",
          "I find it very easy to play games with children that involve pretending.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          ""
        ]
      ],
      "demographics.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width"
        ],
        [
          "Gender",
          "Gender",
          "likert",
          "Male|Female|Other",
          "No",
          "",
          "yes",
          "100px"
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Education",
          "Education (which level are you currently in, or is the highest you've completed)",
          "Dropdown",
          "Some high school| High school graduate| Some college, no degree| Associate's degree| Bachelor's degree|Graduate degree (Master's, Doctorate, etc.)",
          "No",
          "",
          "",
          ""
        ],
        [
          "English_Fluency",
          "Do you speak English fluently?",
          "likert",
          "Yes|No",
          "No",
          "",
          "yes",
          "200px"
        ],
        [
          "English_Age",
          "At what age did you start learning English? (write \"0\" if from birth)",
          "Number",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Handedness",
          "What is your preferred hand?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px"
        ],
        [
          "ethnicity",
          "If you would like to please state your ethnicity",
          "Text",
          "",
          "Yes",
          "",
          "",
          ""
        ],
        [
          ""
        ]
      ],
      "empathy_quotient_40.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: EQ_Test",
          "Score: Cognitive",
          "Score: Social_Skills",
          "Score: Emotional_Reactivity",
          "optional"
        ],
        [
          "Instructions1",
          "Choose one response that best describes how strongly each item applies to you:",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          ""
        ],
        [
          "EQ1",
          "I can easily tell if someone else wants to enter a conversation.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ4",
          "I find it difficult to explain to others things that I understand easily, when they dont understand it the first time.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ6",
          "I really enjoy caring for other people.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ8",
          "I find it hard to know what to do in a social situation.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ10",
          "People often tell me that I went too far in driving my point home in a discussion.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ11",
          "It doesnt bother me too much if I am late meeting a friend.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ12",
          "Friendships and relationships are just too difficult, so I tend not to bother with them.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ14",
          "I often find it difficult to judge if something is rude or polite.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ15",
          "In a conversation, I tend to focus on my own thoughts rather than on what my listener might be thinking.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ18",
          "When I was a child, I enjoyed cutting up worms to see what would happen.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ19",
          "I can pick up quickly if someone says one thing but means another.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ21",
          "It is hard for me to see why some things upset people so much.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ22",
          "I find it easy to put myself in somebody elses shoes.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ25",
          "I am good at predicting how someone will feel.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ26",
          "I am quick to spot when someone in a group is feeling awkward or uncomfortable.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ27",
          "If I say something that someone else is offended by, I think that thats their problem, not mine.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ28",
          "If anyone asked me if I liked their haircut, I would reply truthfully, even if I didnt like it.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ29",
          "I cant always see why someone should have felt offended by a remark.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ32",
          "Seeing people cry doesnt really upset me.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ34",
          "I am very blunt, which some people take to be rudeness, even though this is unintentional.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ35",
          "I do not tend to find social situations confusing.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "1",
          "",
          "no"
        ],
        [
          "EQ36",
          "Other people tell me I am good at understanding how they are feeling and what they are thinking.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ37",
          "When I talk to people, I tend to talk about their experiences rather than my own.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ38",
          "It upsets me to see an animal in pain.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ39",
          "I am able to make decisions without being influenced by peoples feelings.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ41",
          "I can easily tell if someone else is interested or bored with what I am saying.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ42",
          "I get upset if I see people suffering on news programs.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ43",
          "Friends usually talk to me about their problems as they say that I am very understanding.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ44",
          "I can sense if I am intruding, even if the other person doesnt tell me.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ46",
          "People sometimes tell me that I have gone too far with teasing.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ48",
          "Other people often say that I am insensitive, though I dont always see why.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ49",
          "If I see a stranger in a group, I think that it is up to them to make an effort to join in.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ50",
          "I usually stay emotionally detached when watching a film.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ52",
          "I can tune into how someone else feels rapidly and intuitively.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ54",
          "I can easily work out what another person might want to talk about.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ55",
          "I can tell if someone is masking their true emotion.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ57",
          "I dont consciously work out the rules of social situations.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "1",
          "",
          "no"
        ],
        [
          "EQ58",
          "I am good at predicting what someone will do.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ59",
          "I tend to get emotionally involved with a friends problems.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ60",
          "I can usually appreciate the other persons viewpoint, even if I dont agree with it.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          ""
        ]
      ],
      "info_sheet.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          "side_by_side"
        ],
        [
          "Instructions1",
          "<h1>PARTICIPANT INFORMATION SHEET </h1>\n\n<h2>Title of Project:  <u><span style='color:#f20707'>[[Your project title]]</span></u>.</h2>\n\n<h3>Name of Lead Investigator:  <span style='color:#f20707'>[[Investigator]]</span> ([[<span style='color:#f20707'>Institute</span>]]) </h3>\n\n<h4>Invitation paragraph</h4>\nYou have been invited to take part in a research study.  Before you decide whether to take part it is important for you to understand why the research is being done and what it will involve.  Please take time to read the following information carefully and discuss it with friends and relatives if you wish to. Ask us if there is anything that is not clear or if you would like more information. Take time to decide whether you wish to take part or not.  Thank you for reading this.<br><br>\n\n<h4>What is the study about?</h4>\n<span style='color:#f20707'>[[describe your experiment here]]</span>.<br><br>\n\n<h4>What does the study involve?</h4>\n<span style='color:#f20707'>[[what the participant will do]]</span> <br><br>\n\n<h4>Why have I been chosen?</h4>\n<span style='color:#f20707'>[[criterion, e.g. age, etc.]]</span>  <br><br>\n\n<h4>Do I have to take part?</h4>\nIt is up to you to decide whether or not to take part.  If you do decide to take part you will be given this information sheet to keep and be asked to sign a consent form.  If you decide to take part you are still free to withdraw at any time during the data collection without giving a reason.<br><br>\n\n<h4>I am interested in taking part, what do I do next?</h4>\nPlease find a quiet room with minimal distractions. Please ensure you have a good internet connection on a PC / laptop / tablet device. <span style='color:#070ff2'>[[optional: Please do not run the study on a mobile phone]]</span>. Make sure that you have about <span style='color:#f20707'>[[time needed]]</span> minutes time to complete the study. Once ready please follow the link to the online study.<br><br>\n\n<h4>What if I agree to take part and then change my mind?</h4>\nThat is fine. If you decide to withdraw you would need to provide your participation ID to the researchers. The researcher will then delete all the data generated by that ID from their computers. <br><br>\n\n<h4>What are the possible disadvantages and risks of taking part?</h4>\n <span style='color:#f20707'>[[describe risks etc. here]]</span><br><br>\n\n<h4>What are the possible benefits of taking part? </h4>\n<span style='color:#f20707'>[[benefits here]]</span> <br><br>\n\n<h4>Who can I complain to?</h4>\nIf you have a complaint regarding anything to do with this study, you can initially approach the lead investigator <span style='color:#f20707'>[[lead investigator]]</span> (<span style='color:#f20707'>[[lead_investigator_email]]</span>).  If this achieves no satisfactory outcome, you should then contact <span style='color:#f20707'>[[person to contact next]]</span><br><br>\n\n<h4>Will my taking part in this study be kept confidential?</h4>\nAll information which is collected about you during the course of the research will be kept on a password protected database and is strictly confidential. You will be given an ID code which will be used instead of your name. Your data will be shared with the following collaborators: <br> <span style='color:#f20707'>[[list of collaborators]]</span>\n<br><br>\n\n<span style='color:#070ff2'>[[optional: Your anonymised data can be shared with other research teams interested in understating it further.]]</span><br>\nThe raw data will be stored for up to 10 years after a study has been completed.<br> Members of the faculty human research ethics committee may require access to check that the study has been conducted in accordance with the approval. <br>\n\n\n<h4>What will happen to the results of the research study?</h4>\nThe results based on performance of the group of participants will be then analysed and submitted for publication in peer reviewed scientific journals. <br><br>\n\n<h4>Who is organising and funding the research?</h4>\n<br><br><span style='color:#f20707'>[[information about researchers and funders here]]</span>\n\n<h4>Who has reviewed the study?</h4>\nThis study has been reviewed and approved by <span style='color:#f20707'>[[your ethics committee]]</span>.<br><br>\n<br>\n<h4>How is data secured?</h4>\nData is encrypted in Collector on the participant's computer. This data cannot be decrypted without the researcher's password. For more information, go to: <a target=\"_blank\" href=\"https://some-open-solutions.github.io/collector/encryption.html\">https://some-open-solutions.github.io/collector/encryption.html</a>\n<h4>Contact for Further Information</h4>\n<span style='color:#f20707'>[[your contact information]]</span>",
          "Instruct",
          "",
          "",
          "",
          ""
        ],
        [
          "Info_Accept",
          "I understand these instructions and am happy to continue",
          "likert",
          "Agree",
          "1",
          "No",
          "yes"
        ],
        [
          ""
        ]
      ]
    }
  },
  "trialtypes": {
    "default_trialtypes": {
      "text": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019-20) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n{{text}}",
      "survey": "<!--\r\n  Author: Dr. Anthony Haffey\r\n\r\n  Collector: Cat/Kitten release\r\n  A program for running experiments on the web\r\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\r\n\r\n\r\n  This program is free software: you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License version 3 as published by\r\n  the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n\r\n  Kitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n-->\r\n<style>\r\nbody{\r\n  background-color:#5F9EA0;\r\n  width:100%;\r\n  height:100%;\r\n}\r\ntd{\r\n  padding:10px;\r\n  vertical-align: top;\r\n}\r\n\r\n/*\r\n*\telements by id\r\n*/\r\n\r\n#content{\r\n  width:95%;\r\n}\r\n#proceed_button{\r\n  display:none;\r\n  float:right;\r\n}\r\n#this_survey_id{\r\n  padding:            20px;\r\n  display:            none;\r\n}\r\n#survey_outline{\r\n\tposition: \t\t\t\t\tfixed;\r\n  top: \t\t\t\t\t\t\t\t50%;\r\n  left: \t\t\t\t\t\t\t50%;\r\n\theight: \t\t\t\t\t\t90%;\r\n\toverflow: \t\t\t\t\tauto;\r\n\t-webkit-transform: \ttranslate(-50%, -50%);\r\n  transform: \t\t\t\t\ttranslate(-50%, -50%);\r\n  background-color: \twhite;\r\n\tmin-width:        \t900px;\r\n\tmax-width:        \t9000px;\r\n\tborder-radius:    \t20px;\r\n  border-color:     \t#069;\r\n  border-style:     \tsolid;\r\n  border-width:     \t5px;\r\n\tpadding:            10px;\r\n}\r\n#survey_tabs{\r\n  padding:            20px;\r\n}\r\n\r\n\r\n/*\r\n*\telements by class\r\n*/\r\n.feedback_span_multiple{\r\n  display: none;\r\n  margin:  10px;\r\n}\r\n.feedback_span_single{\r\n  display: none;\r\n  padding: 10px;\r\n}\r\n.likert_table td{\r\n  padding:    1px;\r\n  text-align: center;\r\n}\r\n.likert_table td:hover{\r\n  color: blue;\r\n}\r\n.score_total{\r\n  display: none;\r\n}\r\n.show_tab{\r\n  margin: 5px;\r\n}\r\n.survey_btn{\r\n\twhite-space: normal;\r\n\tword-wrap: \t initial;\r\n}\r\n.table_break{\r\n\twidth:    100%;\r\n\theight:   300px;\r\n\toverflow: auto;\r\n}\r\n\r\n\r\n/*\r\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\r\n*/\r\n::-webkit-scrollbar {\r\n  width: 14px;\r\n  height: 18px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  height: 6px;\r\n  border: 4px solid rgba(0, 0, 0, 0);\r\n  background-clip: padding-box;\r\n\t-webkit-border-radius: 7px;\r\n  background-color: rgba(0, 102, 153, 0.5);\r\n  -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);\r\n}\r\n::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n<div id=\"everything\">\r\n\t<div id=\"survey_outline\"></div>\r\n</div>\r\n<script>\r\n/////////////////////////\r\n// Retrieving settings //\r\n/////////////////////////\r\n\r\nif(typeof(settings) !== \"undefined\"){\r\n  settings = [settings];\r\n} else {\r\n  settings = {};\r\n}\r\n\r\n//////////////////////////////////\r\n// vertical vs. horizontal tabs //\r\n//////////////////////////////////\r\n\r\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\r\n  settings.tab_hor_vert = \"horizontal\";\r\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\r\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\r\n\r\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\r\n  $(\"#survey_outline\").html( '<table>'+\r\n                                '<tr>'+\r\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\r\n                                    '<div id=\"survey_tabs\"></div></td>' +\r\n                                  '<td>'+\r\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\r\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\r\n                                  '</td>'+\r\n                                '</tr>'+\r\n                              '</table>');\r\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\r\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\r\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\r\n} else {\r\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\r\n}\r\n</script>\r\n\r\n<span id=\"scales_span\"></span>\r\n\r\n<script>\r\n\r\n//////////////////////\r\n// Defining objects //\r\n//////////////////////\r\n\r\npage_break_management = {\r\n  breaks_remaining : 0,\r\n  breaks_index     : 0\r\n}\r\n\r\nproceed_object = {\r\n  type:[],\r\n  name:[],\r\n  break_no:[]\r\n};\r\n\r\nscoring_object={\r\n  scales:[],\r\n  scale_scores:[],\r\n  update_scales:function(this_survey){\r\n    headers = Object.keys(this_survey[0]);\r\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\r\n    var scales_html = '';\r\n    this.scales.forEach(function(element){\r\n      element = element.replace(\": \",\":\");\r\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\r\n    });\r\n    $(\"#scales_span\").html(scales_html);\r\n  }\r\n}\r\n\r\nsurvey_obj = {};\r\n\r\n\r\n/////////////////////\r\n// Element actions //\r\n/////////////////////\r\n\r\n/*\r\n$(function() {\r\n  $( \".datepicker\" ).datepicker({\r\n    dateFormat : 'mm/dd/yy',\r\n    changeMonth : true,\r\n    changeYear : true,\r\n    yearRange: '-100y:c+nn',\r\n    maxDate: '-1d'\r\n  });\r\n});\r\n*/\r\n\r\n\r\n$('#ExperimentContainer').css('transform','scale(1,1)');\r\n\r\n$(\"#proceed_button\").on(\"click\",function(){\r\n  var proceed = true;\r\n  var tabs    = document.getElementsByClassName('show_tab active');\r\n  if(tabs.length > 0){\r\n    var current_tab       = document.getElementsByClassName('show_tab active')[0]\r\n                                    .id\r\n                                    .replace(\"_button\", \"\")\r\n                                    .replace(\"tab_\",    \"\");\r\n    var response_elements = $('#table_'+current_tab).find('.response_element');\r\n\r\n  } else {\r\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\r\n  }\r\n\r\n  for(var i = 0; i < response_elements.length; i++){\r\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\r\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\r\n\r\n    if(this_optional.indexOf(\"no\") !== -1){\r\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\r\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\r\n        var min_resp_length = 1;\r\n      } else if(this_optional.length == 2) {\r\n        var min_resp_length = this_optional[1];\r\n      } else {\r\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\r\n        return false;\r\n      }\r\n    } else {\r\n      min_resp_length = 0;\r\n    }\r\n\r\n\r\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\r\n    if (quest_resp.length < min_resp_length){\r\n      proceed = false;\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\r\n    } else {\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\r\n    }\r\n  }\r\n\r\n  if(current_tab == survey_obj.tabs && proceed){\r\n    if(typeof(sql_surveys) == \"undefined\"){\r\n      //$(\".table_break\");\r\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\r\n\r\n      if($(\".table_break#table\"+next_table_no).length == 0){\r\n        if(typeof(Trial) !== \"undefined\"){\r\n          Trial.submit();\r\n        } else {\r\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\r\n        }\r\n      } else {\r\n        $(\".table_break\").hide();\r\n        $(\".table_break#table\" + next_table_no).show();\r\n      }\r\n    } else {\r\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\r\n    }\r\n  } else if(current_tab < survey_obj.tabs && proceed) {\r\n    current_tab ++;\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\r\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-dark\");\r\n    $(\"#tab_\"+current_tab+\"_button\").click();\r\n  } else if(proceed == false){\r\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\r\n  } else if(current_tab > survey_obj.tabs){\r\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\r\n  }\r\n});\r\n\r\n//by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\r\nString.prototype.replaceAll = function(str1, str2, ignore){\r\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\r\n}\r\n\r\n\r\n///////////////\r\n// Functions //\r\n///////////////\r\n\r\nfunction clean_item(this_item){\r\n  if(this_item.indexOf(\"'\") !== -1 |\r\n     this_item.indexOf('\"') !== -1){\r\n    bootbox.alert(\"Please avoid apostraphe's or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" + this_item);\r\n  }\r\n\r\n  /*\r\n  this_item = this_item.replaceAll(\"'\",\"\")\r\n                       .replaceAll('\"','');\r\n  */\r\n\r\n  return(this_item);\r\n}\r\n\r\nfunction load_survey(survey){\r\n  // are we in preview?\r\n  /////////////////////\r\n  if(typeof(parent.master_json) !== \"undefined\" && parent.master_json.surveys.preview){     // Yes\r\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\r\n    survey_obj.mods = parent.master_json.mods;                                //no need to be efficient in preview\r\n\r\n  } else {                                                                      // No\r\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\r\n\r\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\r\n      survey_content = parent.parent.exp_json.surveys[survey];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\r\n    } else if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n\t\t\t\t\t\t\ttypeof(parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")])){\r\n\t\t\tsurvey_content = parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\t\t}\telse {\r\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\r\n    }\r\n  }\r\n  process_returned_questionnaire(survey_content);\r\n}\r\n\r\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\r\n  if(feedback_array){                 //i.e. if it's not null\r\n    if(feedback_array.length > 1){\r\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    } else {\r\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction isJSON(str) {\r\n  try {\r\n    return JSON.parse(str);\r\n  } catch (e) {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction likert_update(this_element,this_response,this_value){\r\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\r\n  $(\".row_\"+row_no).removeClass(\"active\");\r\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\r\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\r\n  $(this_element).removeClass(\"btn-outline-primary\");\r\n  $(this_element).addClass(\"btn-primary\");\r\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\r\n  response_check(this_element);\r\n}\r\n\r\n\r\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\r\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\r\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\r\n    item_values.reverse();\r\n  }\r\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\r\n  var this_value    = item_values[item_answers.indexOf(this_response)];\r\n  $(\"#survey_\" + item + \"_score\").val(this_value);\r\n  if(typeof(this_value) !== \"undefined\"){\r\n    return parseFloat(this_value);\r\n  }\r\n}\r\n\r\nfunction process_returned_questionnaire(data){\r\n  survey_obj.data = data;\r\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\r\n                      header:true,\r\n                      beforeFirstChunk: function(chunk) {\r\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\r\n                        var headings = rows[0].toLowerCase();\r\n                        rows[0] = headings;\r\n                        return rows.join(\"\\r\\n\");\r\n                      },\r\n                    }).data;\r\n\r\n  var col_headers = Object.keys(survey_obj.data[0]);\r\n  survey_obj.scales = {};\r\n\r\n  col_headers.forEach(function(header){\r\n    if(header.indexOf(\"score:\")==0){\r\n      var original_header = header;\r\n      header = header.replace(\"score: \",\"\");\r\n      header = header.replace(\"score:\",\"\");\r\n\r\n      survey_obj.scales[header] = {};\r\n      survey_obj.scales[header].questions = {};\r\n\r\n      //identify which questions\r\n      for(var i = 1; i< survey_obj.data.length; i++){\r\n        row = survey_obj.data[i];\r\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\r\n          survey_obj.scales[header].questions[i] = row[original_header];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  write_survey(survey_obj.data,\"this_survey_id\");\r\n  $(\"#please_wait_div\").hide();\r\n  $(\"#proceed_button\").show();\r\n\r\n  $('html, body').animate({\r\n    scrollTop: $(\"#survey_outline\").offset().top\r\n  }, 1000);\r\n}\r\n\r\nfunction process_survey_question(this_row,row_no){\r\n\r\n  if(this_row.values == \"\"){\r\n    this_row.values = this_row.answers;\r\n  }\r\n\r\n  if(typeof(this_row[\"text\"]) !== \"undefined\" &&\r\n\t\t typeof(this_row[\"type\"]) !== \"undefined\" &&\r\n\t\t this_row['text'].toLowerCase() == \"page_break\" |\r\n\t\t this_row['type'].toLowerCase() == \"page_break\"){\r\n        page_break_management.breaks_remaining++;\r\n        question_td = \"</tr></table><table id='table\" + page_break_management.breaks_remaining + \"' style='display:none' class='table_break'></tr>\";\r\n  } else {\r\n\r\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\r\n      value_array = this_row[\"values\"].split(\"|\");\r\n    } else {\r\n      value_array='';\r\n    }\r\n\r\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\r\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\r\n    }\r\n\r\n    // class for scoring\r\n    this_class = \"\";\r\n    for(var i=0;i<scoring_object.scales.length;i++){\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\r\n      }\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\r\n      }\r\n    }\r\n\r\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\r\n\r\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\r\n\r\n\r\n    // Survey settings\r\n    ////////////////////\r\n\r\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(this_row[\"question_width\"]);\r\n\r\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\r\n        settings.feedback_before_response = true;\r\n    }\r\n\r\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\r\n        settings.lock_after_feedback = false;\r\n    }\r\n    var question_td='';\r\n\r\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    // Item types\r\n    ///////////////\r\n\r\n    if(typeof(survey_obj.mods) !== \"undefined\" &&\r\n\t\t\t typeof(survey_obj.mods[this_row.type]) !== \"undefined\"){\r\n\r\n      var mod_html = survey_obj.mods[this_row.type].contents;\r\n\r\n      //for each row variable, insert it into the mod if possible?\r\n      Object.keys(this_row).forEach(function(attribute){\r\n        mod_html = mod_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\r\n      });\r\n      question_td += mod_html;\r\n    } else {\r\n\r\n      switch(this_row[\"type\"].toLowerCase()){\r\n        case \"page_start\":\r\n          var tabs_html = $(\"#survey_tabs\").html();\r\n          if(settings.tab_hor_vert == \"horizontal\"){\r\n            span_div = \"span\";\r\n          } else if(settings.tab_hor_vert == \"vertical\"){\r\n            span_div = \"div\";\r\n          }\r\n          if(typeof(survey_obj.tabs) == \"undefined\"){\r\n            survey_obj.tabs = 0;\r\n          } else {\r\n            survey_obj.tabs++;\r\n          }\r\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\r\n            active_button = \"btn-outline-primary active\";\r\n          } else {\r\n            active_button = \"btn-secondary disabled\";\r\n          }\r\n          if(settings.tab_hor_vert == \"vertical\"){\r\n            var vert_btn_block = \"btn-block\";\r\n          } else {\r\n            var vert_btn_block = \"\";\r\n          }\r\n\r\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\r\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\r\n            '</label>'+\r\n          '</'+span_div+'>';\r\n\r\n          $(\"#survey_tabs\").html(tabs_html);\r\n\r\n          page_break_indexes = [];\r\n          survey_obj.data.forEach(function(this_row,this_index){\r\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\r\n              page_break_indexes.push(this_index);\r\n            }\r\n          });\r\n\r\n          if(survey_obj.tabs > 0){\r\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          } else {\r\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          }\r\n        break;\r\n\r\n        case \"checkbox\":\r\n        case \"checkbox_vertical\":\r\n          var options = this_row[\"answers\"].split(\"|\");\r\n          question_td +=  response_html;\r\n          for(var i=0; i<options.length;i++){\r\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\r\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                feedback_string +\r\n            '</div>';\r\n          }\r\n          break;\r\n\r\n          case \"checkbox_horizontal\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            question_td += response_html;\r\n            question_td += '<table><tr>';\r\n            for(var i=0; i<options.length;i++){\r\n              question_td +=  '<td>'+\r\n                                '<div class=\"custom-control custom-checkbox\">'+\r\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                '</div>'+\r\n                              '</td>';\r\n            }\r\n            question_td += '</tr></table>'+feedback_string;\r\n          break;\r\n\r\n          case \"checkbox_single\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var this_option = this_row[\"answers\"];\r\n            question_td +=  response_html +\r\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n                                '<label class=\"btn btn-outline-primary\">'+\r\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\r\n                                '</label>'+\r\n                            '</div>' + feedback_string;\r\n          break;\r\n\r\n          case \"date\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td+=   response_html+\r\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\r\n                              feedback_string;\r\n          break;\r\n\r\n          case \"dropdown\":\r\n\t\t\t\t\tcase \"select\":\r\n              feedback_string = generate_feedback_string(feedback_array,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t feedback_color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t row_no,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td += response_html +\r\n\t\t\t\t\t\t\t\t'<select ' +\r\n\t\t\t\t\t\t\t\t\t'class=\"custom-select ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"item_name\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'collector_button \"' +\r\n\t\t\t\t\t\t\t\t\t\t'onchange=\"response_check(this)\" ' +\r\n\t\t\t\t\t\t\t\t\t\t'name=\"survey_' + this_row[\"item_name\"].toLowerCase() + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<option selected disabled hidden>-- no option selected --</option>';\r\n              for(var i=0; i<options.length;i++){\r\n\t\t\t\t\t\t\t\tquestion_td += \"<option>\" + options[i] + \"</option>\";\r\n              }\r\n              question_td += '</select>' + feedback_string;\r\n          break;\r\n\r\n          case \"email\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"google_slide\":\r\n          case \"instruct\":\r\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\r\n          break;\r\n\r\n          // tidy up this code for nice looking buttons\r\n          case \"likert\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options  = this_row[\"answers\"].split(\"|\");\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"values\"]) == \"undefined\"){\r\n                this_row[\"values\"] = this_row[\"answers\"];\r\n              }\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"btn_width\"]) !== \"undefined\" && this_row[\"btn-width\"]  !== \"\"){\r\n\t\t\t\t\t\t\t\tvar btn_style = \"width:\" + this_row[\"btn_width\"];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar btn_style = \"\";\r\n\t\t\t\t\t\t\t}\r\n\r\n              if(typeof(this_row[\"side_width\"]) !== \"undefined\"){\r\n                var side_width = \"max-width:\" + this_row[\"side_width\"] + \";\" +\r\n                                 \"min-width:\" + this_row[\"side_width\"] + \";\";\r\n              } else {\r\n                var side_width = \"\";\r\n              }\r\n\r\n              var values   = this_row[\"values\"].split(\"|\");\r\n              question_td += \t\"<table class='likert_table'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td style='\" + side_width + \"'>\";\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t* Add side_text if it exists\r\n\t\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"side_text\"]) !== \"undefined\" &&\r\n\t\t\t\t\t\t\t\tthis_row[\"side_text\"] !== \"\"){\r\n\t\t\t\t\t\t\t\tside_text = this_row[\"side_text\"].split(\"|\");\r\n\t\t\t\t\t\t\t\tside_text = side_text.map(function(this_side){\r\n\t\t\t\t\t\t\t\t\treturn \"<span style='\" + side_width + \" padding:20px;' class='text-primary'><b>\" + this_side + \"</b></span></td><td>\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tside_text = [\"\",\"\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tquestion_td += side_text[0];\r\n\r\n\t\t\t\t\t\t\tquestion_td +=  response_html +\r\n                              '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\r\n\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<options.length;i++){\r\n                var this_option = clean_item(options[i]);\r\n                question_td +=  '<button type=\"button\" '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'class=\"btn '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'survey_btn ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'btn-outline-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row[\"item_name\"] + '_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t '\"autocomplete=\"off\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'id = \"likert_' + row_no + '_' + i + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'style = \"' + btn_style + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'onclick=\"likert_update(this,\\''+this_option+'\\',\\''+values[i]+'\\')\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_option +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</button>';\r\n\r\n              }\r\n\t\t\t\t\t\t\tquestion_td +=  \"</div></td><td  style='\" + side_width + \"'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tside_text[1] +\r\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'></td>\"+\r\n                          \"</td>\"+\r\n                      \"</tr>\"+\r\n                  \"</table>\"+feedback_string;\r\n          break;\r\n\r\n          case \"number\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\r\n          break;\r\n\r\n          case \"para\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"radio\":\r\n          case \"radio_vertical\":\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            var values   = this_row[\"values\"].split(\"|\");\r\n            question_td +=  response_html;\r\n            for(var i=0; i<options.length;i++){\r\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n\r\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\r\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                  feedback_string +\r\n                              '</div>';\r\n\r\n\r\n            }\r\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\r\n          break;\r\n\r\n          case \"radio_horizontal\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td +=  response_html;\r\n              for(var i=0; i<options.length;i++){\r\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\r\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\r\n                                  '</div>'\r\n              }\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"report_score\":\r\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n          break;\r\n\r\n          case \"text\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n      }\r\n    }\r\n    if(feedback_array){\r\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\r\n    }\r\n  }\r\n//  question_td += '</td>';\r\n\r\n  if(typeof(this_row[\"type\"])== \"undefined\"){\r\n      return '';\r\n  } else {\r\n    if(this_row[\"type\"].toLowerCase() == \"instruct\"){\r\n      var this_row_html = \"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\";\r\n\t\t} else if(this_row[\"type\"].toLowerCase() == \"likert\"){\r\n\r\n\t\t\tif(typeof(this_row[\"side_by_side\"]) !== \"undefined\" &&\r\n\t\t\t\t this_row[\"side_by_side\"].toLowerCase() == \"yes\"){\r\n\r\n\t\t\t\tvar this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar this_row_html = \"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2' align='center'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquestion_td +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\";\r\n\r\n\t\t\t}\r\n\r\n\r\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\r\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\r\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\r\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\r\n    } else {\r\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\r\n        this_row_html = question_td;\r\n      }else {\r\n        var this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n      }\r\n    }\r\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\r\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\r\n        proceed_object.name.push(this_row[\"item_name\"]);\r\n        proceed_object.type.push(this_row[\"type\"]);\r\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\r\n      }\r\n    }\r\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\r\n      this_shuffle='none';\r\n    } else {\r\n      this_shuffle=this_row[\"shuffle\"];\r\n    }\r\n    return [this_row_html,this_shuffle];\r\n  }\r\n}\r\n\r\nfunction quest_resp_perc(quest_resp_rat){\r\n\tif(typeof(quest_resp_rat) == \"undefined\"){\r\n    row_resp_perc = \"50%\";\r\n    row_ques_perc = \"50%\";\r\n  } else {\r\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n  }\r\n  return [row_ques_perc,row_resp_perc];\r\n}\r\n\r\nfunction response_check(submitted_element){\r\n  console.dir(\"submitted_element\");\r\n  console.dir(submitted_element);\r\n  switch(submitted_element.type){\r\n    case \"checkbox\":\r\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\r\n      if(checked_responses.length){ //i.e. more than 0\r\n        var values = [];\r\n        for(var i = 0; i < checked_responses.length; i++){\r\n          values.push(checked_responses[i].value);\r\n        }\r\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\r\n      } else {\r\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\r\n      }\r\n      break;\r\n\r\n      case \"button\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\r\n      break;\r\n\r\n      case \"number\":\r\n      case \"select-one\":\r\n      case \"text\":\r\n      case \"textarea\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n\r\n\r\n      case \"radio\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n    }\r\n    update_score();\r\n}\r\n\r\nfunction retrieve_feedback(this_row){\r\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\r\n    feedback_array = this_row[\"feedback\"].split(\"|\");\r\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\r\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\r\n    }\r\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\r\n  } else {\r\n    feedback_array = null;\r\n    feedback_color = '';\r\n  }\r\n  return [feedback_array,feedback_color];\r\n}\r\n\r\nfunction retrieve_row_no_item_name(this_element){\r\n  var these_classes = this_element.className.split(\" \");\r\n  var row_no;\r\n  var item_name;\r\n  these_classes.forEach(function(this_class){\r\n    if (this_class.indexOf('row_') > -1) {\r\n      row_no = this_class.replace(\"row_\",\"\");\r\n    }\r\n    if (this_class.indexOf('_item') > -1) {\r\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\r\n    }\r\n  });\r\n  return [row_no,item_name];\r\n}\r\n\r\nfunction reveal_answers(this_element){\r\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\r\n  response_present = this_response == \"\" ? false : true;\r\n\r\n  if(settings.feedback_before_response == false && response_present == false){\r\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\r\n  } else {\r\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\r\n      if(settings.lock_after_feedback){\r\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\r\n        $(\".\"+item_class).prop(\"disabled\",true);\r\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).html(\"Locked\");\r\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\r\n        $(\"#\"+this_element.id).addClass(\"disabled\");\r\n      } else {\r\n        $(\"#\"+this_element.id).html(\"Hide\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n      }\r\n    } else {\r\n      $(\"#\"+this_element.id).html(\"Show\");\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\r\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\r\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\r\n    }\r\n  }\r\n}\r\n\r\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\r\n  var tmp, current, top = array.length;\r\n  if(top) while(--top) {\r\n    current = Math.floor(Math.random() * (top + 1));\r\n    tmp = array[current];\r\n    array[current] = array[top];\r\n    array[top] = tmp;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction update_score(){\r\n  var scales = Object.keys(survey_obj.scales);\r\n  scales.forEach(function(scale){\r\n    this_scale = survey_obj.scales[scale];\r\n    var questions = Object.keys(this_scale.questions);\r\n    var this_score = 0;\r\n    complete_score = true;\r\n\r\n    questions.forEach(function(row_no){\r\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\r\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\r\n      var normal_reverse = this_scale.questions[row_no];\r\n\r\n      if(normal_reverse.indexOf(\"-\") == -1){\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\r\n        }\r\n      } else {\r\n        values_reverse = normal_reverse.split(\"-\");\r\n        values_col     = values_reverse[0].toLowerCase();\r\n        normal_reverse = values_reverse[1];\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\r\n        }\r\n      }\r\n      if(typeof(this_value) !== \"undefined\"){\r\n        this_score += multiplier * this_value;\r\n      } else {\r\n        complete_score = false;\r\n      }\r\n    });\r\n    if(complete_score){\r\n      $(\".score_\"+scale).addClass(\"bg-success\");\r\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\r\n    } else {\r\n      $(\".score_\"+scale).removeClass(\"text-success\");\r\n      $(\".score_\"+scale).addClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\r\n    }\r\n    $(\".score_\"+scale).val(this_score);\r\n  });\r\n}\r\n\r\nfunction write_survey(this_survey,this_id){\r\n  scoring_object.update_scales(this_survey);\r\n  this_survey_html = \"<table class='table_break' id='table0'>\";\r\n  this_survey_object={\r\n    content:[],\r\n    shuffle:[],\r\n    content_new_order:[],\r\n    shuffled_content:[],\r\n    shuffled_arrays:{},\r\n  }\r\n\r\n  this_survey_html += \"<tr>\";\r\n  for(i = 0; i < this_survey.length; i++){\r\n    this_row = this_survey[i];\r\n    row_html = process_survey_question(this_row,i);\r\n\t\tthis_survey_object.content.push(row_html[0]);\r\n    this_survey_object.shuffle.push(row_html[1]);\r\n\t}\r\n\r\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\r\n\r\n\tfor(var i=0;i<unique_shuffles.length;i++){\r\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\r\n      unique_shuffles[i] !== \"none\" &&\r\n      unique_shuffles[i] !== \"\"){\r\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\r\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\r\n  \t       return this_survey_object.content[index];\r\n    \t   }\r\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\r\n    \tnew_order = shuffle(shuffled_content);\r\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\r\n    }\r\n\t}\r\n\r\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\r\n\tfor(var i=0;i<this_survey_object.content.length;i++){\r\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\r\n    if(this_index !== -1){\r\n      //take first item off relevant list and delete item\r\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\r\n      this_survey_object.content_new_order[i]=this_item;\r\n    } else {\r\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\r\n    }\r\n\t}\r\n\r\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\r\n\tquestions_in_order += \"</tr>\";\r\n\r\n\tthis_survey_html += questions_in_order;\r\n\tthis_survey_html += \"</table>\";\r\n\r\n\t$(\"#\" + this_id).html(this_survey_html);\r\n\r\n\t$(\"#\" + this_id).show(1000,function(){\r\n\t\t// Set all buttons to the max width\r\n\t\t/*\r\n\t\tvar maxWidth = 0;\r\n\t\t$('.btn').each(function(index, element) {\r\n\t\t\tvar curWidth = $(element).width();\r\n\t\t\tif (maxWidth < curWidth ) {\r\n\t\t\t\tmaxWidth = curWidth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.survey_btn').each(function(i) {\r\n\t\t\t$(this).delay(200).animate({\r\n\t\t\t\t\"width\" : maxWidth\r\n\t\t\t});\r\n\t\t});\r\n\t\t*/\r\n\t});\r\n\r\n\t//scroll to top\r\n\r\n\r\n\t$(\".show_tab\").on(\"click\",function(){\r\n    if(this.className.indexOf(\"disabled\") == -1){\r\n      $(\".show_tab\").removeClass(\"active\");\r\n      $(\".survey_page\").hide();\r\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\r\n    } else {\r\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\r\n    }\r\n\t});\r\n  $('[data-toggle=\"tooltip\"]').tooltip();\r\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\r\n}\r\n\r\n//////////////////\r\n// Load survey  //\r\n//////////////////\r\ncurrent_survey = \"{{survey}}\";\r\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\r\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\r\n    load_survey(current_survey);\r\n  },100);\r\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\r\n  load_survey(current_survey);\r\n}\r\n\r\n\r\n</script>\r\n",
      "instruct_keyboard": "<!--\r\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\r\n    A program for running experiments on the web\r\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\r\n\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU General Public License version 3 as published by\r\n    the Free Software Foundation.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU General Public License for more details.\r\n\r\n    You should have received a copy of the GNU General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n \t\t\r\n\t\tKitten release (2019-20) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n*/\r\n-->\r\n<style>\r\n#instruct_text{\r\n  margin:auto;\r\n  width:500px;\r\n  padding:50px;\r\n  max-height:600px;\r\n  text-align: center;  \r\n}\r\n#trial_contents{\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:600;\r\n  height:600;\r\n}\r\n* {\r\ncursor: none;\r\n}\r\n</style>\r\n<div id=\"trial_contents\">\r\n  <div id=\"instruct_text\">{{text}}</div>\r\n</div>\r\n\r\n<script>\r\n$(window).bind('keydown', function(event) {\r\n  Trial.submit();\r\n});\r\n</script>",
      "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>"
    },
    "trialtype": "",
    "filetype": "",
    "version": 0,
    "user_trialtypes": {
      "nback": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2020) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\n*/\n-->\n<style>\n#current_letter{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  height:600px;\n  text-align: center;\n  font-size:100px;\n  display:none;\n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  margin:auto;\n  width:600px;\n  height:600px;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"current_letter\">{{cue}}</div>\n</div>\n<input type=\"hidden\" name=\"response_letter\" id=\"response_letter\"/>\n<input type=\"hidden\" name=\"nback_rt\" id=\"nback_rt\"/>\n<script>\nTrial.set_timer(function(){\n  //Show the stimulus\n  $(\"#current_letter\").show();\n  baseline_time = (new Date()).getTime();  // this is just what the time is right now\n  //Accept the responses\n  var first_response = false;\n  $(window).bind('keydown', function(event) {\n    var this_key = String.fromCharCode(event.which).toLowerCase();\n  \tswitch(this_key){\n  \t  case \"m\":\n  \t  case \"n\":\n  \t    if(first_response == false){\n  \t      response_time = (new Date()).getTime();  // this is just what the time is right now\n  \t      $(\"#nback_rt\").val(response_time - baseline_time);\n  \t      first_response = true;\n  \t      $(\"#response_letter\").val(this_key);\n  \t    }\n  \t    break;\n  \t}\n  });\n  setTimeout(function(){\n    $(\"#current_letter\").hide();\n    \n    setTimeout(function(){\n      Trial.submit();\n    },2500);\n  },500);\n},0);\n\n\nsetTimeout(function(){\n    \n    \n    \n    \n    \n  },500);\n\n</script>\n\n",
      "practice": null,
      "nback_prepare": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2020) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\n*/\n-->\n<script>\nif(typeof(parent.parent.exp_json.storage) == \"undefined\"){\n  //prepare all trials\n  \n  letter_array = \"{{characters}}\".split(\"\");\n  \n  number_of_trials = {{number_of_trials}};\n  \n  array_repeats = Math.ceil(number_of_trials/letter_array.length);\n  \n  shuffled_letters = [];\n  for(var i = 0; i < array_repeats; i++){\n    shuffled_letters.concat(letter_array);\n  }\n  shuffled_letters = shuffle(shuffled_letters);\n  \n  \n  // insert matches\n  \n  \n  \n  \n\n  \n  for(var i = 0; i < {{letter_gap}}; i++){\n    letter_array.push(null);\n  }\n  letter_array.push(this_letter);\n  response_letter = null;\n} else {\n  letter_array = Trial.get(\"letter_array\");\n  letter_array.push(this_letter);\n  response_letter = letter_array.splice(0,1);\n}\n\n\nvar this_letter = \"{{cue}}\";\nvar letter_array;\n$(\"#current_letter\").html(this_letter);\n\n\n//solution from https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\nfunction shuffle(array) {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\n\n\n</script>\n\n",
      "approach": "<style>\r\n#show_image_btn{\r\n  display:none;\r\n  position: absolute;\r\n  top:500;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:150px;\r\n  height:50px;\r\n  display:none;\r\n}\r\n#trial_image{\r\n  display:none;\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:400px;\r\n  height:400px;\r\n}\r\n</style>\r\n\r\n<img src=\"{{image}}\" id=\"trial_image\"/>\r\n<button class=\"btn btn-primary\" id=\"show_image_btn\">Show Image</button>\r\n<input type=\"hidden\" id=\"approach_clicks\" name=\"approach_clicks\"/>\r\n<script>\r\ntotal_approach_clicks = 0;\r\n\r\nTrial.set_timer(function(){\r\n  $(\"#trial_image\").show();\r\n  setTimeout(function(){\r\n    $(\"#trial_image\").hide();\r\n    $(\"#show_image_btn\").show();\r\n    setTimeout(function(){\r\n      Trial.submit();\r\n    },5200);\r\n  },800);\r\n},1000);\r\n\r\n$(\"#show_image_btn\").on(\"click\",function(){\r\n  $(\"#trial_image\").show();\r\n  if(typeof(hide_timer) == \"undefined\"){\r\n    hide_timer = new Trial.timer(function(){\r\n      $(\"#trial_image\").hide();\r\n      delete(hide_timer);\r\n    },{{hide_show_duration}});\r\n  } else {\r\n    hide_timer.add({{hide_show_duration}});\r\n  }\r\n});\r\n  \r\n\r\n/* in case I've misunderstood\r\nfunction bind_show_button(){\r\n  $(\"#show_image_btn\").on(\"click\",function(){\r\n    $(\"#trial_image\").show();\r\n    setTimeout(function(){\r\n      $(\"#trial_image\").hide();\r\n      $(\"#show_image_btn\").unbind();\r\n      total_approach_clicks++;\r\n      $(\"#approach_clicks\").val(total_approach_clicks)\r\n      setTimeout(function(){\r\n        bind_show_button();\r\n      },33);\r\n    },33);\r\n  });\r\n}\r\nbind_show_button();\r\n*/\r\n\r\n  \r\n  \r\n</script>",
      "arithmetic": "<style>\r\n.trial_no{\r\n  width:150px;\r\n  height:50px;\r\n}\r\n#everything{\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:600;\r\n  height:600;\r\n}\r\n#proceed_btn{\r\n  display:none;\r\n}\r\ntd {\r\n  padding:10px;\r\n  margin:5px;\r\n}\r\ninput{\r\n  float: right;\r\n  clear: both;\r\n  text-align: right;\r\n  letter-spacing: 1em;\r\n}\r\n.form-control {\r\n  display: inline-block;\r\n}\r\n</style>\r\n\r\n<div id=\"everything\">\r\n  <h2 class=\"text-primary\">{{row_1_tens}}{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}{{row_2_units}}</h2>\r\n\r\n  <table>\r\n    <tr>\r\n      <td>\r\n        <h5>{{row_1_tens}}<u>{{row_1_units}}</u> {{add_sub_mult}} {{row_2_tens}}<u>{{row_2_units}}</u>:</h5>\r\n      </td>\r\n      <td>\r\n        <h5>{{row_1_units}} {{add_sub_mult}} {{row_2_units}}</h5>\r\n      </td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_1_answer\" class=\"trial_no form-control pull-right\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_1\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td><h5>{{row_1_tens}}<u>{{row_1_units}}</u> {{add_sub_mult}} <u>{{row_2_tens}}</u>{{row_2_units}}: </h5></td>\r\n      <td><h5>{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}0</h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_2_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_2\"></h3>\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr>\r\n      <td><h5><u>{{row_1_tens}}</u>{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}<u>{{row_2_units}}</u>: </h5></td>\r\n      <td><h5>{{row_1_tens}}0 {{add_sub_mult}} {{row_2_units}}</h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_3_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_3\"></h3>\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr>\r\n      <td><h5><u>{{row_1_tens}}</u>{{row_1_units}} {{add_sub_mult}} <u>{{row_2_tens}}</u>{{row_2_units}}: </h5></td>\r\n      <td><h5>{{row_1_tens}}0 {{add_sub_mult}} {{row_2_tens}}0 </h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_4_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_4\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td><hr></rd>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_5_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_5\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td><hr></rd>\r\n    </tr>\r\n  </table>\r\n  <button class=\"btn btn-large btn-primary\" id=\"check_answers_btn\">Check Answers</button>\r\n  <button class=\"btn btn-large btn-primary\" onclick=\"Trial.submit()\" id=\"proceed_btn\">Proceed</button>\r\n</div>\r\n\r\n<input type=\"hidden\" id=\"question_1_attempts\" name=\"question_1_attempts\"/>\r\n<input type=\"hidden\" id=\"question_2_attempts\" name=\"question_2_attempts\"/>\r\n<input type=\"hidden\" id=\"question_3_attempts\" name=\"question_3_attempts\"/>\r\n<input type=\"hidden\" id=\"question_4_attempts\" name=\"question_4_attempts\"/>\r\n<input type=\"hidden\" id=\"question_5_attempts\" name=\"question_5_attempts\"/>\r\n\r\n<script>\r\n/*\r\n* Work out what is going on with your blocks etc.\r\n*/\r\n\r\nvar answer_array = [\r\n  null,\r\n  \"{{answer_1}}\",\r\n  \"{{answer_2}}\",\r\n  \"{{answer_3}}\",\r\n  \"{{answer_4}}\",\r\n  \"{{answer_5}}\"\r\n];\r\n\r\n\r\n$(\"#check_answers_btn\").on(\"click\",function(){\r\n  for(var i=1; i<6; i++){\r\n    var attempts_so_far = $(\"#question_\" +i  + \"_attempts\").val();\r\n        attempts_so_far += \";\" + $(\"#row_\" + i + \"_answer\").val();\r\n        $(\"#question_\" +i  + \"_attempts\").val(attempts_so_far);\r\n    if($(\"#row_\" + i + \"_answer\").val() == answer_array[i]){\r\n      $(\"#feedback_\" + i).html(\"<span class='text-success'>Correct</span>\");\r\n    } else {\r\n      $(\"#feedback_\" + i).html(\"<span class='text-danger'>Incorrect</span>\");\r\n    }\r\n  }\r\n  $(\"#proceed_btn\").show();\r\n});\r\n</script>",
      "arithmetic_feedback": "<style>\r\n.trial_no{\r\n  width:150px;\r\n  height:50px;\r\n}\r\n#everything{\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:600;\r\n  height:600;\r\n}\r\n#proceed_btn{\r\n  display:none;\r\n}\r\ntd {\r\n  padding:10px;\r\n  margin:5px;\r\n}\r\ninput{\r\n  float: right;\r\n  clear: both;\r\n  text-align: right;\r\n  letter-spacing: 1em;\r\n}\r\n.form-control {\r\n  display: inline-block;\r\n}\r\n</style>\r\n\r\n<div id=\"everything\">\r\n  <h2 class=\"text-primary\">{{row_1_tens}}{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}{{row_2_units}}</h2>\r\n\r\n  <table>\r\n    <tr>\r\n      <td>\r\n        <h5>{{row_1_tens}}<u>{{row_1_units}}</u> {{add_sub_mult}} {{row_2_tens}}<u>{{row_2_units}}</u>:</h5>\r\n      </td>\r\n      <td>\r\n        <h5>{{row_1_units}} {{add_sub_mult}} {{row_2_units}}</h5>\r\n      </td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_1_answer\" class=\"trial_no form-control pull-right\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_1\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td><h5>{{row_1_tens}}<u>{{row_1_units}}</u> {{add_sub_mult}} <u>{{row_2_tens}}</u>{{row_2_units}}: </h5></td>\r\n      <td><h5>{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}0</h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_2_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_2\"></h3>\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr>\r\n      <td><h5><u>{{row_1_tens}}</u>{{row_1_units}} {{add_sub_mult}} {{row_2_tens}}<u>{{row_2_units}}</u>: </h5></td>\r\n      <td><h5>{{row_1_tens}}0 {{add_sub_mult}} {{row_2_units}}</h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_3_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_3\"></h3>\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr>\r\n      <td><h5><u>{{row_1_tens}}</u>{{row_1_units}} {{add_sub_mult}} <u>{{row_2_tens}}</u>{{row_2_units}}: </h5></td>\r\n      <td><h5>{{row_1_tens}}0 {{add_sub_mult}} {{row_2_tens}}0 </h5></td>\r\n      <td>=</td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_4_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_4\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td><hr></rd>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td>\r\n        <input type=\"number\" id=\"row_5_answer\" class=\"trial_no\"/>\r\n      </td>\r\n      <td>\r\n        <h3 id=\"feedback_5\"></h3>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan = \"3\"></td>\r\n      <td><hr></rd>\r\n    </tr>\r\n  </table>\r\n  <button class=\"btn btn-large btn-primary\" id=\"check_answers_btn\">Check Answers</button>\r\n  <button class=\"btn btn-large btn-primary\" onclick=\"Trial.submit()\" id=\"proceed_btn\">Proceed</button>\r\n</div>\r\n<script>\r\n\r\n\r\n/*\r\n* Work out what is going on with your blocks etc.\r\n*/\r\nTrial.set_timer(function(){\r\n  var block_types    = Trial.get(\"feedback_blocks\");\r\n  var block_type     = block_types[0];\r\n  var block_feedback = Trial.get(block_type + \"_feedback\");\r\n  \r\n  if(block_feedback.length == 0){\r\n    block_type = block_types[1];\r\n    block_feedback = Trial.get(block_type + \"_feedback\");\r\n  }\r\n  \r\n  var trial_feedback = block_feedback.pop();\r\n  \r\n  Trial.set(block_type + \"_feedback\", block_feedback);\r\n  \r\n  var answer_array = [\r\n    null,\r\n    \"{{answer_1}}\",\r\n    \"{{answer_2}}\",\r\n    \"{{answer_3}}\",\r\n    \"{{answer_4}}\",\r\n    \"{{answer_5}}\"\r\n  ];\r\n  \r\n  \r\n  $(\"#check_answers_btn\").on(\"click\",function(){\r\n    for(var i=1; i<5; i++){\r\n      console.dir(i);\r\n      console.dir($('#row_' + i + '_answer').val());\r\n      if($(\"#row_\" + i + \"_answer\").val() == answer_array[i]){\r\n        $(\"#feedback_\" + i).html(\"<span class='text-success'>Correct</span>\");\r\n      } else {\r\n        $(\"#feedback_\" + i).html(\"<span class='text-danger'>Incorrect</span>\");\r\n      }\r\n    }\r\n    if($(\"#row_\" + i + \"_answer\").val() == answer_array[i]){\r\n      $(\"#feedback_5\").html(\"<span class='text-success'>\" + trial_feedback.correct + \"</span>\");\r\n    } else {\r\n      $(\"#feedback_5\").html(\"<span class='text-danger'>\" + trial_feedback.incorrect + \"</span>\");\r\n    }\r\n    $(\"#proceed_btn\").show();\r\n  });\r\n},100);\r\n</script>",
      "asdf": "a = 5\r\n",
      "avoidance": "<style>\r\n#hide_image_btn{\r\n  display:none;\r\n  position: absolute;\r\n  top:500;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:150px;\r\n  height:50px;\r\n  display:none;\r\n}\r\n#trial_image{\r\n  display:none;\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:400px;\r\n  height:400px;\r\n}\r\nbody{\r\n  background-color: black;\r\n}\r\n</style>\r\n\r\n<img src=\"{{image}}\" id=\"trial_image\"/>\r\n<button class=\"btn btn-primary\" id=\"hide_image_btn\">Hide Image</button>\r\n<input type=\"hidden\" id=\"approach_clicks\" name=\"approach_clicks\"/>\r\n<script>\r\ntotal_approach_clicks = 0;\r\n\r\nTrial.set_timer(function(){\r\n  $(\"#trial_image\").show();\r\n  setTimeout(function(){\r\n    $(\"#hide_image_btn\").show();\r\n    setTimeout(function(){\r\n      Trial.submit();\r\n    },5200);\r\n  },800);\r\n},1000)\r\n\r\n\r\n$(\"#hide_image_btn\").on(\"click\",function(){\r\n  $(\"#trial_image\").hide();\r\n  if(typeof(hide_timer) == \"undefined\"){\r\n    hide_timer = new Trial.timer(function(){\r\n      $(\"#trial_image\").show();\r\n      delete(hide_timer);\r\n    },{{hide_show_duration}});\r\n  } else {\r\n    hide_timer.add({{hide_show_duration}});\r\n  }\r\n});\r\n  \r\n\r\n/*\r\nfunction bind_hide_button(){\r\n  $(\"#hide_image_btn\").on(\"click\",function(){\r\n    $(\"#trial_image\").hide();\r\n    setTimeout(function(){\r\n      $(\"#trial_image\").show();\r\n      $(\"#hide_image_btn\").unbind();\r\n      total_approach_clicks++;\r\n      $(\"#approach_clicks\").val(total_approach_clicks)\r\n      setTimeout(function(){\r\n        bind_hide_button();\r\n      },33);\r\n    },33);\r\n  });\r\n}\r\nbind_hide_button();\r\n*/\r\n  \r\n  \r\n</script>",
      "cam_3": "\r\n<style>\r\n#everything_div{\r\n  margin:auto;\r\n  width:725px;\r\n  /* padding:50px; */\r\n  height:400px;\r\n  text-align: center;\r\n  position:absolute;\r\n  top:0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n}\r\n\r\n#left_img{\r\n  position:absolute;\r\n  left:0px;\r\n  top:0px;\r\n}\r\n#right_img{\r\n  position:absolute;\r\n  left:400px;\r\n  top:0px;\r\n}\r\n\r\n#block_left_lock_1{\r\n  left:125px;\r\n}\r\n#block_left_lock_2{\r\n  left:0px;\r\n}\r\n#block_left_lock_3{\r\n  left:250px;\r\n}\r\n#block_right_lock_1{\r\n  left:525px;\r\n}\r\n#block_right_lock_2{\r\n  left:400px;\r\n}\r\n#block_right_lock_3{\r\n  left:650px;\r\n}\r\n#left_lock_1{\r\n  left:125px;\r\n}\r\n#left_lock_2{\r\n  left:0px;\r\n}\r\n#left_lock_3{\r\n  left:250px;\r\n}\r\n#right_lock_1{\r\n  left:525px;\r\n}\r\n#right_lock_2{\r\n  left:400px;\r\n}\r\n#right_lock_3{\r\n  left:650px;\r\n}\r\n.block_lock{\r\n  position:absolute;\r\n  width:50px;\r\n  height:50px;\r\n  z-index:2;\r\n  display:none;\r\n  top:0px;\r\n}\r\n.lock_img{\r\n  position:absolute;\r\n  width:50px;\r\n  height:50px;\r\n  z-index:2;\r\n  display:none;\r\n  top:0px;\r\n}\r\n.stim_style{\r\n  height:325px;\r\n  width:325px;\r\n  z-index:1;\r\n}\r\n.video_stim{\r\n  margin:auto;\r\n  display:none;\r\n  height:400px;\r\n  width:600px;\r\n  text-align: center;\r\n  position:absolute;\r\n  top:0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tz-index:5;\r\n}\r\n</style>\r\n<div id=\"everything_div\">\r\n  <img id='left_img' src=\"{{left_back}}\" class=\"stim_style\" />\r\n  <video id=\"left_video\" class=\"stim_style video_stim\" muted>\r\n    <source src=\"{{left_video}}\" type=\"video/mp4\">\r\n  Your browser does not support the video tag.\r\n  </video>\r\n  <img id='right_img' src=\"{{right_back}}\" class=\"stim_style\" />\r\n  <video id=\"right_video\"  class=\"stim_style video_stim\" muted>\r\n    <source src=\"{{right_video}}\" type=\"video/mp4\">\r\n  Your browser does not support the video tag.\r\n  </video>\r\n  <img id=\"left_lock_1\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"left_lock_2\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"left_lock_3\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_1\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_2\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_3\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"block_left_lock_1\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_left_lock_2\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_left_lock_3\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_1\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_2\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_3\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n</div>\r\n<input type=\"hidden\" id=\"left_right_chosen\" name=\"left_right_chosen\">\r\n<input type=\"hidden\" id=\"type_chosen\"       name=\"type_chosen\">\r\n<input type=\"hidden\" id=\"lock_1_rt\"         name=\"lock_1_rt\">\r\n<input type=\"hidden\" id=\"lock_2_rt\"         name=\"lock_2_rt\">\r\n<input type=\"hidden\" id=\"lock_3_rt\"         name=\"lock_3_rt\">\r\n<input type=\"hidden\" id=\"vid_rt\"            name=\"vid_rt\">\r\n\r\n<script>\r\nlocks_obj = {\r\n  left_locks:   \"{{left_locks}}\",\r\n  right_locks:  \"{{right_locks}}\",\r\n  left_type:  \"{{left_type}}\",\r\n  right_type: \"{{right_type}}\",\r\n  locks_clicked: 0\r\n}\r\n$(\"#left_lock_1\").show();                                                       // always show at least 1 left lock\r\n$(\"#right_lock_1\").show();                                                      // always show at least 1 right lock\r\n\r\nif(locks_obj.left_locks > 1){                                                   // show a second left lock if there are at least 2 locks on the left\r\n  $(\"#left_lock_2\").show();\r\n}\r\nif(locks_obj.right_locks > 1){                                                  // show a second right lock if there are at least 2 locks on the right\r\n  $(\"#right_lock_2\").show();\r\n}\r\n\r\nif(locks_obj.left_locks == 3){                                                  // show the third left lock if there are 3 left locks\r\n  $(\"#left_lock_3\").show();\r\n}\r\nif(locks_obj.right_locks == 3){                                                 // show the third right lock if there are 3 right locks\r\n  $(\"#right_lock_3\").show();\r\n}\r\n\r\nfunction lock_click(this_id){\r\n  $(\".lock_img\").unbind();                                                      // nothing should now happen if you click on the locks\r\n  var left_right_lock = this_id.split(\"_\")[0];                                  // identifying whether this is the left or right lock that has just been clicked\r\n  var opposite_lock = left_right_lock == \"left\" ? \"right\" : \"left\";             // identifying what the opposite side to the clicked lock is\r\n  $(\".\" + opposite_lock + \"_lock\").hide();                                      // hide the opposite lock(s)\r\n  \r\n  \r\n  var locks_loop = parseFloat(locks_obj[opposite_lock + \"_locks\"]) + 1;         // count how many opposite locks there are\r\n  for(var i = 1; i < locks_loop; i++){                                          //////////////////////////////\r\n    $(\"#block_\" + opposite_lock + \"_lock_\" + i).show();                         // block the opposite locks //\r\n  }                                                                             //////////////////////////////\r\n  \r\n  locks_obj.locks_clicked++;                                                    // identify which lock has just been clicked          \r\n  $(\"#lock_\" + locks_obj.locks_clicked + \"_rt\").val(Trial.elapsed());           // store the time since the trial started as a response time in relation to this lock number (1 or 2 or 3)\r\n  $(\"#\" + this_id).fadeOut({{lock_time}}, function(){                           // hide the current lock; lock_time is how long the user needs to wait before doing the following:\r\n    bind_lock();                                                                // allow users to click the locks again\r\n    if($(\".\" + left_right_lock + \"_lock:visible\").length == 0){                 // if there are now no visible locks, it's time to show the video:\r\n      $(\"#left_right_chosen\").val(left_right_lock);                             // storing which side the user chose\r\n      $(\"#type_chosen\").val(locks_obj[left_right_lock + \"_type\"]);              // storing what type of stimuli the user chose (e.g. social vs. nonsocial)\r\n      $(\".block_lock\").hide();                                                  // hide all the block locks\r\n      $(\"#\" + left_right_lock + \"_img\").css(\"z-index\",3);                       // give the background pattern for the chosen side priority\r\n      $(\"#\" + left_right_lock + \"_img\").animate({                               // enlarge the backgrounf pattern to cover the whole of the div\r\n        left :  \"0px\",\r\n        top  :  \"0px\",\r\n        width:  \"100%\",\r\n        height: \"100%\"\r\n      },function(){                                                             // once the animation of the background pattern is complete:\r\n        $(\"#\" + left_right_lock + \"_video\").show();                             // show the chosen video\r\n        $(\"#\" + left_right_lock + \"_video\")[0].play();                          // play the chosen video\r\n        $(\"#\" + left_right_lock  +\"_video\").on('ended',function(){              // when the video finishes:\r\n          $(\"#vid_rt\").val(Trial.elapsed());                                    // store the time it took to get to this point\r\n          Trial.submit();                                                       // move on to the next trial\r\n        });    \r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction bind_lock(){                                                           ////////////////////////////////////////////////////////\r\n  $(\".lock_img\").on(\"click\",function(){                                         // make the locks responsive when they are clicked on //\r\n    this_id = $(this)[0].id;                                                    ////////////////////////////////////////////////////////\r\n    lock_click(this_id);\r\n  });\r\n}\r\nbind_lock()\r\n</script>",
      "cam_uncertainty": "<!--\r\n-- Once Ant hears from Indu - finalise the stimuli list\r\n\r\n-- choose up to three times to unlock a video\r\n\r\n-- 1 vs. 1\r\n-- 1 vs. 2\r\n-- 1 vs. 3\r\n-- 2 vs. 2\r\n-- 2 vs. 3\r\n-- 3 vs. 3\r\n\r\nLocks are counterbalanced between social vs. nonsocial\r\n\r\n(look at Indu's matlab script to confirm). \r\n\r\n--look through a datasheet after collecting one participant (make sure it's all gdpr)\r\n\r\n\r\n\r\nDebrief - give the participant a \"withdrawal\" code (e.g. their completion code). Make it clear to them that they can use this to withdraw.\r\n\r\n\r\n\r\n--ask Indu to send me the info and consent sheets (or the whole ethics; and debrief).\r\n\r\nwrite a protocol for Indu and her undergrad\r\n-->\r\n\r\n<style>\r\n#everything_div{\r\n  margin:auto;\r\n  width:725px;\r\n  /* padding:50px; */\r\n  height:400px;\r\n  text-align: center;\r\n  position:absolute;\r\n  top:0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n}\r\n\r\n#left_img{\r\n  position:absolute;\r\n  left:0px;\r\n  top:0px;\r\n}\r\n\r\n#right_img{\r\n  position:absolute;\r\n  left:400px;\r\n  top:0px;\r\n}\r\n#block_left_lock_1{\r\n  left:125px;\r\n}\r\n#block_left_lock_2{\r\n  left:0px;\r\n}\r\n#block_left_lock_3{\r\n  left:250px;\r\n}\r\n#block_right_lock_1{\r\n  left:525px;\r\n}\r\n#block_right_lock_2{\r\n  left:400px;\r\n}\r\n#block_right_lock_3{\r\n  left:650px;\r\n}\r\n#countdown_div{\r\n  text-align: center;\r\n  padding:150px;\r\n  z-index:10;\r\n  font-size:100px;\r\n  background-color:white;\r\n  position:relative;\r\n  display:none;\r\n}\r\n#left_lock_1{\r\n  left:125px;\r\n}\r\n#left_lock_2{\r\n  left:0px;\r\n}\r\n#left_lock_3{\r\n  left:250px;\r\n}\r\n#right_lock_1{\r\n  left:525px;\r\n}\r\n#right_lock_2{\r\n  left:400px;\r\n}\r\n#right_lock_3{\r\n  left:650px;\r\n}\r\n.block_lock{\r\n  position:absolute;\r\n  width:50px;\r\n  height:50px;\r\n  z-index:2;\r\n  display:none;\r\n  top:0px;\r\n}\r\n.lock_img{\r\n  position:absolute;\r\n  width:50px;\r\n  height:50px;\r\n  z-index:2;\r\n  display:none;\r\n  top:0px;\r\n}\r\n.stim_style{\r\n  height:325px;\r\n  width:325px;\r\n  z-index:1;\r\n}\r\n.video_stim{\r\n  margin:auto;\r\n  display:none;\r\n  height:400px;\r\n  width:600px;\r\n  text-align: center;\r\n  position:absolute;\r\n  top:0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tz-index:5;\r\n}\r\n</style>\r\n<div id=\"everything_div\">\r\n  \r\n  <img id='left_img' src=\"{{left_back}}\" class=\"stim_style\" />\r\n  <video id=\"left_video\" class=\"stim_style video_stim\" muted>\r\n    <source src=\"{{left_video}}\" type=\"video/mp4\">\r\n  Your browser does not support the video tag.\r\n  </video>\r\n  <img id='right_img' src=\"{{right_back}}\" class=\"stim_style\" />\r\n  <video id=\"right_video\"  class=\"stim_style video_stim\" muted>\r\n    <source src=\"{{right_video}}\" type=\"video/mp4\">\r\n  Your browser does not support the video tag.\r\n  </video>\r\n  <img id=\"left_lock_1\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"left_lock_2\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"left_lock_3\"        class=\"lock_img left_lock\"  src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_1\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_2\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"right_lock_3\"       class=\"lock_img right_lock\" src=\"{{lock_img}}\"/>\r\n  <img id=\"block_left_lock_1\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_left_lock_2\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_left_lock_3\"  class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_1\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_2\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <img id=\"block_right_lock_3\" class=\"block_lock\"          src=\"{{block_lock_img}}\"/>\r\n  <div id=\"countdown_div\"></div>\r\n</div>\r\n<input type=\"hidden\" id=\"left_right_chosen\" name=\"left_right_chosen\">\r\n<input type=\"hidden\" id=\"social_chosen\"     name=\"social_chosen\">\r\n<input type=\"hidden\" id=\"lock_1_rt\"         name=\"lock_1_rt\">\r\n<input type=\"hidden\" id=\"lock_2_rt\"         name=\"lock_2_rt\">\r\n<input type=\"hidden\" id=\"lock_3_rt\"         name=\"lock_3_rt\">\r\n<input type=\"hidden\" id=\"vid_rt\"            name=\"vid_rt\">\r\n\r\n<script>\r\nlocks_obj = {\r\n  left_locks:   \"{{left_locks}}\",\r\n  right_locks:  \"{{right_locks}}\",\r\n  left_social:  \"{{left_social}}\",\r\n  right_social: \"{{right_social}}\",\r\n  locks_clicked: 0\r\n}\r\n\r\n$(\"#left_lock_1\").show();\r\nif(locks_obj.left_locks > 1){\r\n  $(\"#left_lock_2\").show();\r\n}\r\nif(locks_obj.left_locks == 3){\r\n  $(\"#left_lock_3\").show();\r\n}\r\n\r\n\r\n$(\"#right_lock_1\").show();\r\nif(locks_obj.right_locks > 1){\r\n  $(\"#right_lock_2\").show();\r\n}\r\nif(locks_obj.right_locks == 3){\r\n  $(\"#right_lock_3\").show();\r\n}\r\n\r\nfunction lock_click(this_id){\r\n  $(\".lock_img\").unbind();\r\n  setTimeout(function(){\r\n    bind_lock();\r\n  },{{lock_time}});\r\n  \r\n  \r\n  var left_right_lock = this_id.split(\"_\")[0];\r\n  \r\n  var opposite_lock = left_right_lock == \"left\" ? \"right\" : \"left\";\r\n  \r\n  $(\".\" + opposite_lock + \"_lock\").hide();\r\n  \r\n  //block_left_lock_1\r\n  var locks_loop = parseFloat(locks_obj[opposite_lock + \"_locks\"]) + 1;\r\n  for(var i = 1; i < locks_loop; i++){\r\n    \r\n    $(\"#block_\" + opposite_lock + \"_lock_\" + i).show();\r\n    \r\n  }\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  locks_obj.locks_clicked++;                                                    // identify which lock has just been clicked          \r\n  $(\"#lock_\" + locks_obj.locks_clicked + \"_rt\").val(Trial.elapsed());           // store the time since the trial started as a response time in relation to this lock number (1 or 2 or 3)\r\n  $(\"#\" + this_id).fadeOut({{lock_time}}, function(){                           // hide the current lock; lock_time is how long the user needs to wait before doing the following:\r\n    if($(\".\" + left_right_lock + \"_lock:visible\").length == 0){                 // if there are now no visible locks, it's time to show the video:\r\n      $(\".lock_img\").unbind();\r\n    \r\n      $(\"#left_right_chosen\").val(left_right_lock);\r\n      $(\"#social_chosen\").val(locks_obj[left_right_lock + \"_social\"]);\r\n      $(\".block_lock\").hide();\r\n      setTimeout(function(){\r\n        $(\"#\" + left_right_lock + \"_img\").css(\"z-index\",3);\r\n        $(\"#\" + left_right_lock + \"_img\").animate({\r\n          left :  \"0px\",\r\n          top  :  \"0px\",\r\n          width:  \"100%\",\r\n          height: \"100%\"\r\n        },function(){\r\n          \r\n          \r\n          if(left_right_lock == \"left\"){\r\n            var countdown = \"{{left_timer}}\";\r\n          } else {\r\n            var countdown = \"{{right_timer}}\";\r\n          }\r\n          // add countdown here\r\n          $(\"#countdown_div\").show();\r\n          $(\"#countdown_div\").html(countdown);\r\n          var countdown_interval = setInterval(function(){\r\n            countdown--;\r\n            $(\"#countdown_div\").html(countdown);\r\n            if(countdown < 0){\r\n              $(\"#countdown_div\").hide();\r\n              clearInterval(countdown_interval);\r\n              $(\"#\" + left_right_lock + \"_video\").show();\r\n              $(\"#\" + left_right_lock + \"_video\")[0].play();\r\n              $(\"#\" + left_right_lock  +\"_video\").on('ended',function(){\r\n                $(\"#vid_rt\").val(Trial.elapsed());\r\n                Trial.submit();\r\n              });    \r\n            }\r\n          },1000);\r\n        });\r\n      },0);    //\"{{lock_time}}\" \r\n    }\r\n  });\r\n}\r\n\r\nfunction bind_lock(){\r\n  $(\".lock_img\").on(\"click\",function(){\r\n    this_id = $(this)[0].id;\r\n    lock_click(this_id);\r\n  });\r\n}\r\nbind_lock()\r\n</script>",
      "create_feedback": "<script>\r\n\r\n// based on https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\r\nfunction shuffle(array) {\r\n  var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nvar growth_feedback = [{\r\n  \"correct\":   \"Correct: Apply that effort to the next one too\",\r\n  \"incorrect\": \"Incorrect: You need to apply more effort to the next one\"\r\n},{\r\n  \"correct\": \"Correct: Your work paid off\",\r\n  \"incorrect\": \"Incorrect: If you work harder it'll pay off\"\r\n},{\r\n  \"correct\": \"Correct: You must have tried hard on that one\",\r\n  \"incorrect\": \"Incorrect: You must try harder next time\"\r\n},{\r\n  \"correct\": \"Correct: I can see you have put in effort to get that right\",\r\n  \"incorrect\": \"Incorrect: You didn't put in enough effort\"\r\n},{\r\n  \"correct\": \"Correct: If you keep this up you'll be able to do even harder ones\",\r\n  \"incorrect\": \"Incorrect: Keep trying and you'll get there\" \r\n},{\r\n  \"correct\": \"Correct: The more you do the better you'll get\",\r\n  \"incorrect\": \"Incorrect: But you'll get better the more you do\"\r\n},{\r\n  \"correct\": \"Correct: Hard work is needed to do well on this\",\r\n  \"incorrect\": \"Incorrect: Hard work is needed to do well on this\"\r\n},{\r\n  \"correct\": \"Correct: You clearly worked hard\",\r\n  \"incorrect\": \"Incorrect: You needed to work harder\"\r\n},{\r\n  \"correct\": \"Correct: Practice makes perfect\",\r\n  \"incorrect\": \"Incorrect: But practice makes perfect\"\r\n},{\r\n  \"correct\": \"Correct: Keep up the good work\",\r\n  \"incorrect\": \"Incorrect: With a bit more work you'll get the next one\"\r\n}];\r\n\r\nvar fixed_feedback = [{\r\n  \"correct\": \"Correct: You must be really smart\",\r\n  \"incorrect\": \"Incorrect: That was probably too difficult\"\r\n},{\r\n  \"correct\": \"Correct: You're really good at this\",\r\n  \"incorrect\": \"Incorrect: Hopefully the next one will be easier\"\r\n},{\r\n  \"correct\": \"Correct: You're a natural at this\",\r\n  \"incorrect\": \"Incorrect: This seems beyond your ability\"\r\n},{\r\n  \"correct\": \"Correct: You must be good at maths\",\r\n  \"incorrect\": \"Incorrect: It is hard for some people to grasp this\"\r\n},{\r\n  \"correct\": \"Correct: This must be your strength\",\r\n  \"incorrect\": \"Incorrect: Maths might not be one of your strengths\"\r\n},{\r\n  \"correct\": \"Correct: Well done, you made that look easy\",\r\n  \"incorrect\": \"Incorrect: That wasn't an easy one\"\r\n},{\r\n  \"correct\": \"Correct: You are clearly very gifted at this\",\r\n  \"incorrect\": \"Incorrect: You might be gifted at something else\"\r\n},{\r\n  \"correct\": \"Correct: Intelligent people find these easy\",\r\n  \"incorrect\": \"Incorrect: Intelligent people find these easy\"\r\n},{\r\n  \"correct\": \"Correct: You're an arithmetic genius\",\r\n  \"incorrect\": \"Incorrect: Arithmetic isn't for everyone\"\r\n},{\r\n  \"correct\": \"Correct: Some people are talented at this\",\r\n  \"incorrect\": \"Incorrect: Some people are talented at this\"\r\n}];\r\n\r\nvar feedback_blocks = [\"fixed\", \"growth\"];\r\n\r\n/*\r\n* Shuffle the above arrays\r\n*/\r\n\r\nshuffle(feedback_blocks);\r\nshuffle(fixed_feedback);\r\nshuffle(growth_feedback);\r\nTrial.set(\"feedback_blocks\", feedback_blocks);\r\nTrial.set(\"fixed_feedback\",  fixed_feedback);\r\nTrial.set(\"growth_feedback\", growth_feedback);\r\n\r\nTrial.set_timer(function(){\r\n  Trial.submit();\r\n},100);\r\n\r\n\r\n\r\n\r\n\r\n</script>",
      "mousetracker": "<!--\r\n\r\n/*\r\n* Mousetracking code for running experiments on Collector.\r\n* This code should also hopefully be helpful for running mousetracking without Collector\r\n* Stimuli in the default version of this based on videos by Dr. Robrecht van der Wel\r\n* Authors: Dr Kristian Tempelmans Plat, Prasannajeet Mane, Dr. Anthony Haffey\r\n*/\r\n\r\n-->\r\n<style>\r\n/* elements by class */\r\n.movie_area{\r\n\tposition:      absolute;\r\n\twidth:         1024px;\r\n\theight:        768px;\r\n\ttop:           1px;\r\n\tleft:          0px;\r\n\tz-index:       4;\r\n}\r\n\r\n.start_tracking{\r\n\tposition:      absolute;\r\n\ttop:           726px;\r\n\tleft:          502px;\r\n\tz-index:       5;\r\n\tborder-style:  solid;\r\n\tborder-color:  red;\r\n\twidth:         20px;\r\n\theight:        20px;\r\n\tborder-radius: 10px;\r\n\tdisplay:       none;\r\n}\r\n\r\n.start_video{\r\n  position:         absolute;\r\n  top:              726px;\r\n  left:             502px;\r\n\tz-index:          5;\r\n\tborder:           none;\r\n\theight:           20px;\r\n\twidth:            20px;\r\n\tdisplay:          none;\r\n\tborder-radius:    50%;\r\n\tbackground-color: green;\r\n}\r\n\r\n/* elements by id */\r\n\r\n#background{\r\n\tposition: absolute;\r\n\ttop:      1px;\r\n\twidth:    1024px;\r\n\theight:   768px;\r\n\tz-index:  2;\r\n}\r\n#correct_button{\r\n\tposition: absolute;\r\n\ttop:      400px;\r\n\tleft:     437px;\r\n\tz-index:  6;\r\n}\r\n#error_button{\r\n\tposition: absolute;\r\n\ttop:      400px;\r\n\tleft:     390px;\r\n\tz-index:  6;\r\n}\r\n#error_feedback{\r\n\tposition: absolute;\r\n\ttop:      234px;\r\n\tleft:     362px;\r\n\twidth:    300;\r\n\theight:   300px;\r\n\tz-index:  7;\r\n\tdisplay:  none;\r\n}\r\n#loading_vid{\r\n  position: absolute;\r\n\tmargin:   auto;\r\n\twidth:    400px;\r\n\ttop:      50%;\r\n}\r\n#pic_default{\r\n\tposition: absolute;\r\n\twidth:    1024px;\r\n\theight:   768px;\r\n\tz-index:  2;\r\n}\r\n#prepare_screen{\r\n\tposition: absolute;\r\n\ttop:      1px;\r\n\tleft:     1px;\r\n\twidth:    1024px;\r\n\theight:   768px;\r\n}\r\n#processing_div{\r\n  display:  none;\r\n}\r\n#response_area{\r\n\tposition: absolute;\r\n  width:    1024px;\r\n  height:   768px;\r\n\ttop:      1px;\r\n\tleft:     1px;\r\n\tz-index:  1;\r\n}\r\n#response_area_target{\r\n\tposition: absolute;\r\n  width:    1024px;\r\n  height:   768px;\r\n\ttop:      1px;\r\n\tleft:     1px;\r\n\tz-index:  2;\r\n}\r\n#resp_left{\r\n\tposition:         absolute;\r\n\twidth:            190px;\r\n\theight:           70px;\r\n\ttop:              128px;\r\n\tleft:             70px;\r\n\tz-index:          5;\r\n\tbackground-color: transparent;\r\n\tborder:           none;\r\n}\r\n#resp_right{\r\n\tposition:         absolute;\r\n\twidth:            190px;\r\n\theight:           70px;\r\n\ttop:              128px;\r\n\tleft:             766px;\r\n\tz-index:          5;\r\n\tbackground-color: transparent;\r\n\tborder:           none;\r\n}\r\n#rotated_canvas{\r\n  position:     relative;\r\n  border-style: solid;\r\n  border-color: black;\r\n  height:       1024px;\r\n  width:        768px;\r\n}\r\n#too_slow_button{\r\n\tposition: absolute;\r\n\ttop:      400px;\r\n\tleft:     390px;\r\n\tz-index:  6;\r\n}\r\n#too_slow_feedback{\r\n\tposition: absolute;\r\n\ttop:      234px;\r\n\tleft:     362px;\r\n\tz-index:  7;\r\n\tdisplay:  none;\r\n}\r\n#trial_content_div{\r\n  position: absolute;\r\n  top:      0;\r\n  bottom:   0;\r\n  left:     0;\r\n  right:    0;\r\n  margin:   auto;\r\n  height:   768px;\r\n  width:    1024px;\r\n  position: relative;\r\n}\r\n</style>\r\n\r\n\r\n<div id=\"trial_content_div\">\r\n  <span id=\"replaceable_movie_span\"></span>\r\n  <input id=\"resp_left\"        type=\"button\"                       value = \"\"                                                           style=\"display:none\">\r\n  <input id=\"resp_right\"       type=\"button\"                       value = \"\"                                                           style=\"display:none\">\r\n  <input id=\"too_slow_button\"  type=\"button\" class=\"process_trial\" value = \"Please respond faster next time\"                            style=\"display:none\">\r\n  <input id=\"error_button\"     type=\"button\" class=\"process_trial\" value = \"Please click on the ball next time\"                         style=\"display:none\">\r\n  <input id=\"correct_button\"   type=\"button\" class=\"process_trial\" value = \"Click here to continue\"                                     style=\"display:none\">\r\n  <input id=\"RequiredResponse\" type=\"text\"                         value = \"{{correctid}}\"                      name=\"RequiredResponse\" style=\"display:none\">\r\n    \t\t\t\r\n  <div id=\"prepare_screen\">\r\n  \t<img id=\"response_area\"         src = \"{{pic_now}}\"       style = \"display:none\">\r\n  \t<img id=\"response_area_target\"  src = \"{{pic_target}}\"    style = \"display:none\">\r\n  \t<img id=\"pic_default\"           src = \"{{pic_default}}\"   style = \"display:none\">\r\n  \t<img id=\"background\"            src = \"{{background}}\"    style = \"display:none\">\r\n  </div>\r\n  \r\n  <div id=\"error_feedback\">\r\n    <img id=\"ErrorImg\"   src = \"../User/Stimuli/mt_exemplar/Errorimg.png\">\r\n  </div>\r\n    \r\n  <div id=\"too_slow_feedback\">\r\n    <img id=\"TooSlowImg\" src = \"../User/Stimuli/mt_exemplar/TooSlow.png?dl=0\">\r\n  </div>\r\n    \r\n  <textarea name=\"x_array\" style=\"display:none\" id=\"x_array_textarea\"></textarea>\r\n  <textarea name=\"y_array\" style=\"display:none\" id=\"y_array_textarea\"></textarea>\r\n    \r\n  <textarea name=\"ActualResponseId\"    id=\"ActualResponseId\"    style=\"display:none\"></textarea>\r\n  <textarea name=\"correct_response_id\" id=\"correct_response_id\" style=\"display:none\"></textarea>\r\n  <!-- ActualResponse will be stored as follows: 0 = too slow; 1 = left; 2 = right; -->\r\n  <!-- CorrectResponse will be stored as follows: 1 = should be left; 2 = should be right -->\r\n    \r\n  <input type=\"hidden\" name=\"time_to_start_tracking\" id=\"start_tracking_input\">\r\n</div>   \r\n\r\n<div id='loading_vid'>Loading the trial... If it doesn't load within 30 seconds the task will try to reload the stimuli. \r\n                      If it doesn't load within a couple of minutes, please contact the researcher who recruited you. \r\n                      DO not refresh the page! </div>\r\n\r\n<input type=\"hidden\" name=\"error_message\"     id=\"error_message\">\r\n<input type=\"hidden\" name=\"trial_accuracy\"    id=\"trial_accuracy\">\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\r\n<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\r\n\r\n\r\n\r\n<script>\r\nCorrectSide          = \"{{correctid}}\";\r\nskip_processing_view = \"{{skip_line_display}}\";\r\nphase_type           = \"{{phase}}\";\r\nshuffle_type         = \"{{shuffle 1}}\";\r\nbackground_img       = \"{{background}}\";\r\nvideo_src            = \"{{movie}}\";\r\n\r\nx_array              = [];\r\ny_array              = [];\r\n\r\n\r\ndraw_trial();\r\n\r\nvar viewportWidth  = $(\"body\").innerWidth();\r\nvar viewportHeight = $(\"body\").innerHeight();\r\n\r\nvar response_window_timeout;\r\n\r\nTracker_stopper             = 1;                                                // to stop attempts at tracking before the task is ready.\r\nbackground_and_video_loaded = 0;\r\n\r\nif (CorrectSide == \"Left\") {\r\n  CorrectResponseVal = 1;\r\n} else if (CorrectSide == \"Right\") {\r\n  CorrectResponseVal = 2;\r\n}\r\n\r\n$(\"#correct_response_id\").val(CorrectResponseVal);\r\n\r\ntimed_check_of_video_loading = setInterval (function(){\r\n  if(background_and_video_loaded !== 2){\r\n    bootbox.alert(\"video slow to load, trying to reload it\");\r\n    draw_trial();\r\n  } else {\r\n    clearInterval(timed_check_of_video_loading);\r\n  }\r\n},30000);\r\n\r\n/*\r\n* Functions\r\n*/\r\n\r\nfunction auto_start_tracking(){\r\n  clicked_start = 1;\r\n  $(\".movie_area\").hide();\r\n  $(\".start_tracking\").hide();\r\n  \r\n  if (Slow_state == 0){\r\n    $(\"#resp_left\").show();\r\n    $(\"#resp_right\").show();\r\n  }\r\n  \r\n  Tracker_stopper         = 0;\r\n  baseline_time           = (new Date()).getTime();\r\n  timestamp_array         = [];\r\n  response_window_timeout = setTimeout(response_window,3000);\r\n  $(\".start_tracking_input\").val(baseline_time-post_video_baseline_time);\r\n  \r\n  $(\"#background, #resp_left, #resp_right,#prepare_screen\").mousemove(function(event){\r\n    if(Tracker_stopper == 0){\r\n      var offset = $(\"#trial_content_div\").offset();\r\n      var _mouseX =  event.clientX;\r\n      var _mouseY =  event.clientY;      \r\n          _mouseX -= offset.left;      \r\n          _mouseY -= offset.top;\r\n          \r\n      console.dir(\"_mouseX\");\r\n      console.dir(_mouseX);\r\n      \r\n      \r\n      x_array.push(_mouseX);\r\n      y_array.push(_mouseY);\r\n      this_timestamp = (new Date()).getTime()-baseline_time;\r\n      timestamp_array.push(this_timestamp);\r\n      $(\"#x_array_textarea\").val(x_array);\r\n      $(\"#y_array_textarea\").val(y_array);\r\n      if(_mouseY < 686 & changed_pic == 0){      //this is 50px above the midpoint of the .start_tracking button.\r\n        changed_pic = 1;  \r\n        $('#response_area_target').show();\r\n      }      \r\n    }\r\n  });\r\n};\r\n\r\nfunction draw_movie(){\r\n  var video_html = '<video id=\"movie_area\" class=\"movie_area\" style = \"display:none\">'+\r\n                      '<source src=\"{{movie}}\" type=\"video/mp4\">'+\r\n                       ' Your browser does not support the video tag.'+\r\n                    '</video>'+\r\n                    '<input id=\"start_video\"    class=\"start_video\"     type=\"button\" style=\"display:none\">'+ \r\n                    '<input id=\"start_tracking\" class=\"start_tracking\"  type=\"button\" style=\"display:none\">';\r\n  $(\"#replaceable_movie_span\").html(video_html);\r\n\r\n  $(\".movie_area\").on('loadstart', function() { \r\n    if(background_and_video_loaded > 0){\r\n      background_and_video_loaded = 2;\r\n      $(\"#loading_vid\").hide();\r\n      $(\"#background\").show();\r\n      $(\".start_video\").show();\r\n    } else {\r\n      background_and_video_loaded = 1;\r\n    }\r\n  })\r\n  .on('error', function() { \r\n    console.log(\"error loading movie\");\r\n  });\r\n  myVideo = document.getElementById(\"movie_area\");\r\n}\r\n\r\n\r\nfunction draw_trial(){\r\n  draw_movie();\r\n  $(\".start_video\").on(\"click\", function(){\r\n    function playPause() { \r\n      if (myVideo.paused) {\r\n        myVideo.play(); \r\n      } else {\r\n        myVideo.pause(); \r\n      }\r\n    }\r\n    changed_pic = 0;\r\n    clicked_start = 0;\r\n    $(\"#background\").hide();\r\n    $(\".start_tracking\").hide();\r\n    $(\".start_video\").hide();\r\n    $(\"#response_area\").hide();\r\n    $(\"#response_area_target\").hide();                                          //for quick movement specifically\r\n    $(\".movie_area\").show();\r\n    playPause();\r\n    $('.movie_area').show().trigger(\"play\").bind('ended', function () {\r\n      post_video_baseline_time = (new Date()).getTime();\r\n      $('.start_tracking').show();\r\n      $(\"#response_area\").show();\r\n      $(\".movie_area\").hide();\r\n    });\r\n  \tSlow_state = 0;\r\n  \tTimeLimit_stopper = 0;\r\n  });\r\n  $('.start_tracking').on('click', function(){\r\n    auto_start_tracking();\r\n  });    \r\n}\r\n\r\nfunction participant_error(long_message,short_error){\r\n  clearTimeout(response_window_timeout);                                        // cancel timer \r\n  if(phase_type.toLowerCase().indexOf(\"prac\") !== -1){\r\n    bootbox.alert (\"Restarting practice trial\");\r\n    $(\"#too_slow_feedback\").hide();                                             //only necessary for the too slow click trials\r\n    $(\"#too_slow_button\").hide();                                               //only necessary for the too slow click trials\r\n    $(\"#error_button\").hide();                                                  //only necessary for wrong trials\r\n    draw_trial();\r\n  } else {\r\n    bootbox.alert(\"Moving on to next trial.\", function(){                       //these errors always have mouse co-ordinates, so need to be reported before processing the trial.\r\n      process_trial_function(short_error);\r\n    }); \r\n  }\r\n  bootbox.alert(long_message);\r\n}\r\n\r\nfunction process_trial_function(error_message){\r\n  $(\"#error_message\").val(error_message);\r\n\r\n  if(typeof(x_array) !== \"undefined\"){\r\n    Trial.submit();\r\n  }\r\n}\r\n\r\nfunction response_window() {\r\n\tif (TimeLimit_stopper == 0){\r\n\t\t$(\"#too_slow_feedback\").show();\r\n\t\tTracker_stopper = 1;\r\n\t\t$(\"#too_slow_feedback\").delay(3000).hide(0);\r\n\t\t$(\"#too_slow_button\").show();\r\n\t\t$(\"#trial_accuracy\").val(0);\r\n\t\t$(\"#resp_left\").hide();\r\n\t\t$(\"#resp_right\").hide();\r\n\t\tSlow_state = 1;\r\n\t\tActualResponseVal = 0;\r\n\t\t$(\"#ActualResponseId\").val(ActualResponseVal);\r\n\t\tvar message = \"Too slow!\";\r\n\t\tparticipant_error(message,\"slow_click\");\r\n\t}\r\n}\r\n\r\n\r\n/*\r\n* Actions by id\r\n*/\r\n$(\"#background\").on('load', function() {\r\n  if(background_and_video_loaded == 1){\r\n    background_and_video_loaded = 2;\r\n    $(\"#loading_vid\").hide();\r\n    $(\"#background\").show();\r\n\r\n    if(response_area.complete == 0){\r\n      $(\"#response_area\").on(\"load\",function(){\r\n        $(\".start_video\").show();\r\n      })\r\n    } else {\r\n      $(\".start_video\").show();\r\n    }\r\n  } else {\r\n    background_and_video_loaded = 1;\r\n  }\r\n}).on('error', function() { \r\n  console.log(\"error loading image\"); \r\n});\r\n$('#resp_left').on('click', function(){\r\n  ActualResponseVal = 1;\r\n  TimeLimit_stopper = 1;\r\n  Tracker_stopper = 1;\r\n  $(\"#resp_left\").hide();\r\n  $(\"#resp_right\").hide();\r\n  $(\"#ActualResponseId\").val(ActualResponseVal);\r\n    \r\n\tif (CorrectSide == \"Left\") {\r\n\t  $(\"#trial_accuracy\").val(1);\r\n    $(\"#correct_button\").show();\r\n  } else if (CorrectSide == \"Right\") {\r\n    $(\"#trial_accuracy\").val(0);\r\n    $(\"#error_button\").show();\r\n    $(\"#error_feedback\").show(0);\r\n    $(\"#error_feedback\").delay(3000).hide(0);\r\n    participant_error(\"Incorrect response. Please click on the box with the ball in it.\",\r\n                      \"incorrect_response\");\r\n\t}\r\n});\r\n  \r\n$('#resp_right').on('click', function(){\r\n\tActualResponseVal = 2;\r\n  TimeLimit_stopper = 1;\r\n  Tracker_stopper = 1;\r\n  $(\"#resp_left\").hide();\r\n  $(\"#resp_right\").hide();\r\n  $(\"#ActualResponseId\").val(ActualResponseVal);    \r\n\t\r\n\tif (CorrectSide == \"Left\") {\r\n    $(\"#trial_accuracy\").val(0);\r\n    $(\"#error_button\").show();\r\n    $(\"#error_feedback\").show(0);\r\n    $(\"#error_feedback\").delay(3000).hide(0);\r\n    participant_error(\"Incorrect response. Please click on the box with the ball in it.\",\r\n                      \"incorrect_response\");\r\n\t}\telse if (CorrectSide == \"Right\") {\r\n    $(\"#trial_accuracy\").val(1);\r\n    $(\"#correct_button\").show();\r\n\t}\r\n});\r\n\r\n/*\r\n* Actions by class\r\n*/\r\n$(\".process_trial\").on(\"click\",function(){\r\n  $(\"#trial_content_div\").hide();\r\n  if(skip_processing_view.toLowerCase() == \"no\"){\r\n    $(\"#processing_div\").hide();\r\n\t}\r\n  process_trial_function();\r\n});\r\n</script>",
      "rate_image": "<!--\r\nThis is from Borcsok, Fitzgibbins and Haffey (2020) investigation into gambling and alcohol behaviour\r\n-->\r\n<style>\r\n#face_img{\r\n  width:{{cue_width}};\r\n  height:{{cue_height}};\r\n  display: block;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n#instructions{\r\n  text-align: center;\r\n  font-size:20px;\r\n}\r\n#response_div{\r\n  margin: auto;\r\n  width: 100%;\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n#submit_btn{\r\n  margin:0 auto;\r\n  display:none;\r\n}\r\n.response_btn{\r\n  margin:5px;\r\n  width:{{btn_width}};\r\n}\r\n</style>\r\n<img src=\"{{cue}}\" id=\"face_img\"/>  <!-- if you want to refer to a local image, you need to identify it's relative location to RunStudy.html -->\r\n<div id=\"response_div\"></div>\r\n<div id=\"button_container\">\r\n  <button class=\"btn btn-danger\" onclick=\"Trial.submit()\" id=\"submit_btn\">Submit</button>\r\n</div>\r\n<input type=\"hidden\" name=\"face_response\" id=\"face_response\"/>\r\n<script>\r\nno_stims = 0;\r\nresp_div_html = \"\";\r\nresp_upper    = 0;\r\nresponses_array =   [\"{{responses_1}}\",\r\n                     \"{{responses_2}}\",\r\n                     \"{{responses_3}}\"];\r\ninstruction_array = [\"{{instruct_1}}\",\r\n                     \"{{instruct_2}}\",\r\n                     \"{{instruct_3}}\"];\r\n\r\nrow_classes = [\"primary\",\r\n               \"info\",\r\n               \"secondary\"];\r\n\r\nfor(var i = 0; i < 3; i++){\r\n  responses = responses_array[i];\r\n  if(responses == \"\"){\r\n    break;\r\n  }\r\n  no_stims++;\r\n  \r\n  responses = responses.split(\"|\");\r\n  resp_div_html += \"<h3 class='text-\" + row_classes[i] + \"'>\" +  instruction_array[i] + \"</h3>\";\r\n  resp_div_html += \"<div style='margin:10px'>\";\r\n  resp_div_html += responses.map(function(response){\r\n    return \"<button name='face_rating_\" + (i+1) + \"' class='btn btn-\" + row_classes[i] + \" response_btn'>\" + response + \"</button>\";\r\n  }).join(\"\");\r\n  resp_div_html += \"<input type='hidden' id='face_response_\" + (i+1) + \"' name='face_response_\" + (i+1) + \"'>\";\r\n  resp_div_html += \"</div>\";\r\n};\r\n\r\n$(\"#response_div\").html(resp_div_html);\r\n$(\".response_btn\").on(\"click\",function(){\r\n  var response_id = $(this).attr(\"name\").replace(\"rating\",\"response\");\r\n  $(\"#\" + response_id).val(this.innerHTML);\r\n  $('[name=\"' + $(this).attr(\"name\") + '\"]').removeClass(\"btn-danger\");\r\n  $(this).addClass(\"btn-danger\");\r\n  check_responses();\r\n});\r\nfunction check_responses(){\r\n  valid_responses = 0;\r\n  for(var i = 1; i < no_stims + 1; i++){\r\n    if($(\"#face_response_\" + i).val() !== \"\"){\r\n      valid_responses++;\r\n    }\r\n  }\r\n  if(valid_responses == no_stims){\r\n    $(\"#submit_btn\").css(\"display\", \"block\");\r\n  }\r\n}\r\n</script>",
      "webgazer": "<!--\r\n    This is based on code from OSF repository https://osf.io/jmz79/ that accompanies the publication \"Online webcam-based eye tracking in cognitive science: a first look\" by Semmelmann & Weigelt, published in Behavior Research Methods in 2017.\r\n\r\n    Updates by Anthony Haffey (a.haffey@reading.ac.uk) 2020 to make this a freeviewing task that works on Collector\r\n-->\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <link href=\"libraries/webgazer/css/jquery-ui.css\" type=\"text/css\" rel=\"stylesheet\">\r\n    <link href=\"libraries/webgazer/css/jquery.mobile-1.4.5.css\" type=\"text/css\" rel=\"stylesheet\">\r\n    <link href=\"libraries/webgazer/css/tolcam.css\" type=\"text/css\" rel=\"stylesheet\">\r\n    <script src=\"libraries/webgazer/js/jquery-1.12.3.min.js\"></script>\r\n    <script src=\"libraries/webgazer/js/jquery-ui.js\"></script>\r\n    <script src=\"libraries/webgazer/js/jquery.mobile-1.4.2.min.js\"></script>\r\n    <script src=\"libraries/webgazer/js/simpleheat.js\"></script>\r\n</head>\r\n<style>\r\n.stimuli_img{\r\n  width: {{image_width}};\r\n  object-fit: fill;\r\n  vertical-align: middle;\r\n  height: {{image_height}};\r\n  position: absolute;\r\n  transform: translate(-50%, 0);\r\n  left: 50%;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n}\r\n#stimuli_fixation{\r\n\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  -moz-transform: translateX(-50%) translateY(-50%);\r\n  -webkit-transform: translateX(-50%) translateY(-50%);\r\n  transform: translateX(-50%) translateY(-50%);\r\n  font-size:100px;\r\n  text-align:center;\r\n  height:150px;\r\n}\r\n#stimuli_img_left{\r\n  margin-left: {{left_position}};\r\n}\r\n#stimuli_img_right{\r\n  /* left:  75%; */\r\n  margin-left: {{right_position}};\r\n}\r\n</style>\r\n<body>\r\n  <div id=\"instruction\">\r\n      <div id=\"instruction_1\" class=\"instruction_page\">\r\n        This experiment is based on code from the OSF repository <a href=\"https://osf.io/jmz79/\" target=\"_blank\">https://osf.io/jmz79/</a> which accompanies the publication \"Online webcam-based eye tracking in cognitive science: a first look\" by Semmelmann & Weigelt, published in Behavior Research Methods in 2017. Please find the abstract and information about the code, analyses, and data below. This work is intended for scientific use only.\r\n  Written by Kilian Semmelmann, tolcam@ksemmelm.de, 2017. <br><br>\r\n\r\n  Updates by Anthony Haffey (a.haffey@reading.ac.uk) 2020 to make this a task that works on Collector.\r\n      </div>\r\n\r\n      <div id=\"instruction_2\" class=\"instruction_page\">\r\n          <h1>Webcam Setup</h1>\r\n          <br />\r\n          <div id=\"setup_after\">\r\n              You can take a short break and move your head. Before continuing, please follow the instructions noted below.<br />\r\n          </div>\r\n          <br />\r\n          Please turn off your mobile phone and close all other programs and websites. Then carefully read and follow these instructions:<br />\r\n          <img src=\"libraries/webgazer/imgs/instructions_donttilt.png\" style = \"width: 100%; margin-top: 20px; margin-bottom: 20px;\"/>\r\n          <br />\r\n          <span id=\"webcam_insert\"></span>\r\n          <br />\r\n          <button class=\"btn btn-primary\" id=\"flip_cam_btn\" style=\"display:none\">Flip cam</button>\r\n          <div id=\"setup_first\">\r\n              This study consists of multiple five-minute parts with pauses inbetween. After you clicked \"start\", please avoid moving your head. If you move too much, the calibration can fail and you might not be able to finish the study.\r\n          </div>\r\n          <br />\r\n      </div>\r\n\r\n      <div id=\"instruction_3\" class=\"instruction_page\">\r\n        <div id=\"beforetherest\">\r\n          <h1>Proceed</h1>\r\n          <br />\r\n          Click \"Proceed\" to move onto the next trial\r\n          <button onclick=\"Trial.submit()\" class=\"btn\">Proceed</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"instruction_back\" class=\"instruction_navigation\">\r\n        <div id=\"instruction_back_text\">\r\n          &lt;\r\n        </div>\r\n      </div>\r\n      <div id=\"instruction_continue\" class=\"instruction_navigation\">\r\n        <div id=\"instruction_continue_text\">\r\n          &gt;\r\n        </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div id=\"calibration_dot\" class=\"stimuli\"><div id=\"calibration_cnt\">0</div></div>\r\n  <div id=\"stimulus\" class=\"stimuli\"><img src=\"libraries/webgazer/imgs/talking.jpg\" /></div>\r\n  <div id=\"stimuli_dot\" class=\"stimuli\"></div>\r\n  <div id=\"stimuli_bar\" class=\"stimuli\"></div>\r\n  <div id=\"stimuli_fixation\" class=\"stimuli\">+</div>\r\n  <div id=\"stimuli_prime\" class=\"stimuli\"></div>\r\n  <div id=\"stimuli_target\" class=\"stimuli\">X</div>\r\n  <img id=\"stimuli_img_left\" class=\"stimuli stimuli_img\"/>\r\n  <img id=\"stimuli_img_right\" class=\"stimuli stimuli_img\"/>\r\n  <div id=\"instruction_message\"></div>\r\n\r\n  <div id=\"message\">\r\n    no message\r\n  </div>\r\n</body>\r\n</html>\r\n<script>\r\n\r\n//////////////////////\r\n// Borcsok variables\r\n//////////////////////\r\n\r\nvar image_pair;\r\nTrial.set_timer(function(){\r\n  function refuse_height(){\r\n    bootbox.confirm(\"Your window height needs to be at least {{min_height}} before starting. Please make your window as big as possible before proceeding.\", function(result){\r\n      if(window.innerHeight < parseFloat(\"{{min_height}}\".replace(\"px\",\"\"))){\r\n        refuse_height();\r\n      }\r\n    });\r\n  };\r\n  function refuse_width(){\r\n    bootbox.confirm(\"Your window width needs to be at least {{min_width}} before starting. Please make your window as big as possible before proceeding.\", function(result){\r\n      if(window.innerWidth < parseFloat(\"{{min_width}}\".replace(\"px\",\"\"))){\r\n        refuse_width();\r\n      }\r\n    });\r\n  }\r\n  if(window.innerHeight < parseFloat(\"{{min_height}}\".replace(\"px\",\"\"))){\r\n    refuse_height();\r\n  }\r\n  if(window.innerWidth <  parseFloat(\"{{min_width}}\".replace(\"px\",\"\"))){\r\n    refuse_width();\r\n  }\r\n},0);\r\n\r\n\r\n//////////////////////\r\n// default settings //\r\n//////////////////////\r\n\r\nvar calibrations = \"{{calibrations}}\";\r\nvar freeview_image_file = \"{{freeview_image_file}}\".toLowerCase();\r\nvar design_type = \"{{design_type}}\";\r\nvar calibration_skip = \"{{calibration_skip}}\";\r\nvar image_height = \"{{image_height}}\";\r\nvar image_width = \"{{image_width}}\";\r\nvar left_side = \"{{left_side}}\";\r\nvar save_script = \"{{save_script}}\";\r\nvar stim_duration = \"{{stim_duration}}\";\r\nvar trials = \"{{trials}}\";\r\nvar trial_order = \"{{trial_order}}\";\r\n\r\n\r\nif(calibrations.indexOf(\"calibrations\") !== -1){\r\n  calibrations = 13;\r\n}\r\nif(calibration_skip.indexOf(\"calibration_skip\") !== -1){\r\n  calibration_skip = \"no\";\r\n}\r\nif(stim_duration.indexOf(\"stim_duration\") !== -1){\r\n  stim_duration = 2000;\r\n}\r\nif(left_side.indexOf(\"left_side\") !== -1){\r\n  left_side = \"counterbalance\";\r\n}\r\n\r\n\r\n\r\n\r\n/************************************\r\n * HELPER FUNCTIONS\r\n ************************************/\r\n/**\r\n * Shuffles array in place.\r\n * @param {Array} a items The array containing the items.\r\n * @author http://stackoverflow.com/a/2450976/4175553\r\n */\r\nfunction shuffle(array) {\r\n    var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n\r\n        // And swap it with the current element.\r\n        temporaryValue = array[currentIndex];\r\n        array[currentIndex] = array[randomIndex];\r\n        array[randomIndex] = temporaryValue;\r\n    }\r\n\r\n    return array;\r\n}\r\n\r\n/************************************\r\n * WEBCAM PARAMETERS\r\n ************************************/\r\nvar cam = {};\r\ncam.overlay = '';\r\ncam.width = 400;\r\ncam.height = 300;\r\ncam.topDist = '0px';\r\ncam.leftDist = '0px';\r\ncam.recording = 0;\r\ncam.validating = 0;\r\ncam.calibrating = 0;\r\ncam.initialized = 0;\r\n\r\n/************************************\r\n * CALIBRATION PARAMETERS\r\n ************************************/\r\nvar calibrating = 0;\r\nvar t_calibration_start;\r\nvar calibration_no = 0;\r\nvar calibration = {};\r\ncalibration.points = [];\r\ncalibration.method = \"watch\"; // click or watch\r\ncalibration.calibrations = calibrations // how many calibration dots\r\ncalibration.duration = 20; // how often does one position get sampled\r\ncalibration.instruction = 'Please fixate on the dot <br />that will appear. <br /><br />Do not move your head,<br />only use your eyes.';\r\nif(\"{{skip_instruct}}\" == \"on\"){\r\n  calibration.instruction_duration = 0;\r\n} else {\r\n  calibration.instruction_duration = 5000;\r\n}\r\n\r\n/************************************\r\n * VALIDATION PARAMETERS\r\n ************************************/\r\nvar validating = 0;\r\nvar validation_no = 0;\r\nvar validation_current = {\"x\": 0, \"y\": 0};\r\nvar validation_attempt = 1;\r\nvar validation = {};\r\nvalidation.validations = 5;\r\nvalidation.duration = 20;\r\nvalidation.points = [];\r\nvalidation.timeout = 20000; // if no validation happens within X ms, validation will be ended and re-calibrated\r\nvalidation.attempts = 5; // how often can validation be failed PER validation\r\nvalidation.distance = 200; // offset distance in pixel to be a valid validation sample\r\n\r\n\r\n/************************************\r\n * DESIGN\r\n ************************************/\r\nvar design = {};\r\nvar block_no = 0;\r\nvar trial_no = 0;\r\n\r\neyetrack_designs = {\r\n  freeview:   {'type': 'freeview', 'trials': trials, 'iti': 500, 'instruction': '{{text}}', 'instruction_duration': 5000},\r\n  simple: {'type': 'simple', 'trials': 24, 'iti': 500, 'instruction': 'Please look at the cross.<br />When the dot appears, please look at it.<br /><br /><br />Do not move your head, <br />only use your eyes.', 'instruction_duration': 5000},\r\n  pursuit: {'type': 'pursuit', 'trials': 24, 'iti': 500, 'instruction': 'A black dot will appear. Please <br />look at it. When it turns <span style=\"color: #dd494b;\">red</span>,<br /> Please follow its movement with your eyes.<br /><br />Do not move your head, <br />only use your eyes.', 'instruction_duration': 7000},\r\n\r\n}\r\n\r\nif(\"{{skip_instruct}}\" == \"on\"){\r\n  eyetrack_designs.freeview.instruction_duration = 0;\r\n}\r\n\r\n\r\ndesign.blocks = [\r\n  eyetrack_designs[[\"{{design_type}}\"]]\r\n];\r\n\r\n//design.blocks = shuffle(design.blocks);\r\ndesign.blocks_randomized = 1; // shall the blocks be shuffled?\r\ndesign.trials_randomized = 1; // same for trials\r\ndesign.calibrate = \"high\";\r\ndesign.recalibrate = 1;\r\n\r\n\r\n\r\n/************************************\r\n * DATA VARIABLES\r\n ************************************/\r\nvar data = [];\r\nvar data_current = {};\r\nvar status = '-';\r\n\r\n/**\r\ndata.design = jQuery.extend(true, {}, design);\r\n **/\r\n\r\n/************************************\r\n * SET UP WEBGAZER\r\n ************************************/\r\nfunction loadWebgazer() {\r\n  $('canvas').remove();\r\n  cam.initialized = 0;\r\n  $.getScript( \"libraries/webgazer/js/webgazer_old.js\" )\r\n    .done(function( script, textStatus ) {\r\n      initializeWebgazer();\r\n      $('#message').html('Please allow for access on your Webcam on the top part of the screen. <br /><br />Remember: We will NOT transmit your video, but only process it locally and transmit numbers to our server.').show();\r\n    })\r\n    .fail(function( jqxhr, settings, exception ) {\r\n      $( \"div.log\" ).text( \"Triggered ajaxError handler.\" );\r\n    });\r\n}\r\n\r\n\r\nfunction initializeWebgazer() {\r\n\r\n  //webgazer.clearData()\r\n  webgazer.setRegression('ridge') /* currently must set regression and tracker */\r\n    .setTracker('clmtrackr')\r\n    .setGazeListener(function(d, clock) {\r\n      //console.log(data); /* data is an object containing an x and y key which are the x and y prediction coordinates (no bounds limiting) */\r\n      //console.log(clock); /* elapsed time in milliseconds since webgazer.begin() was called */\r\n      if (d !== null) {\r\n\r\n        if (cam.calibrating == 1) {\r\n            var $cd = $('#calibration_dot');\r\n            var cx = parseInt(Math.round($cd.offset().left));\r\n            var cy = parseInt(Math.round($cd.offset().top));\r\n            var cp = d;\r\n            var dist = Math.sqrt(((cp.x - cx) * (cp.x - cx)) + ((cp.y - cy) * (cp.y - cy)));\r\n            var c = $('#calibration_cnt').html();\r\n            data_current.raw.push({'time': clock, 'x': cp.x, 'y': cp.y, 'cx': cx, 'cy': cy, 'dist': dist, 'c': c});\r\n        }\r\n\r\n\r\n        if (cam.validating == 1) {\r\n            // see whether dx and dy are within 100px radius of target\r\n            var dist = parseInt(Math.sqrt(((d.x - validation_current.x) * (d.x - validation_current.x)) + ((d.y - validation_current.y) * (d.y - validation_current.y))));\r\n            var c = parseInt($('#calibration_cnt').html());\r\n            if (dist < validation.distance) {\r\n                data_current.raw.push({'time': clock, 'x': d.x, 'y': d.y, 'vx': validation_current.x, 'vy': validation_current.y, 'dist': dist, 'c': c, 'valid': 1});\r\n                if (c < calibration.duration) {\r\n                    $('#calibration_cnt').html(++c);\r\n                } else {\r\n                    cam.validating = 0;\r\n                    clearTimeout(t);\r\n                    $('#calibration_dot').hide();\r\n                    validation_no++;\r\n                    saveData();\r\n                    setTimeout(\"validate();\", 500);\r\n                }\r\n            } else {\r\n                data_current.raw.push({'time': clock, 'x': d.x, 'y': d.y, 'vx': validation_current.x, 'vy': validation_current.y, 'dist': dist, 'c': c, 'valid': 0});\r\n            }\r\n        }\r\n\r\n        if (cam.recording == 1) {\r\n            var tx = -1;\r\n            var ty = -1;\r\n            if (data_current.task == \"simple\" || data_current.task == \"pursuit\") {\r\n                var $sd = $('#stimuli_dot');\r\n                var tx = parseInt(Math.round($sd.offset().left));\r\n                var ty = parseInt(Math.round($sd.offset().top));\r\n            }\r\n            data_current.raw.push({'time': clock, 'x': d.x, 'y': d.y, 'tx': tx, 'ty': ty, 'status': status});\r\n            //console.log(data.trials[trial_no].raw.length + ' ' + d.x + ' ' + d.y);\r\n        }\r\n      }\r\n    })\r\n    .begin()\r\n    .showPredictionPoints(false); /* shows a square every 100 milliseconds where current prediction is */\r\n\r\n  cl = webgazer.getTracker().clm;\r\n\r\n  checkWebgazer();\r\n}\r\n\r\n\r\nfunction checkWebgazer() {\r\n  if (webgazer.isReady()) {\r\n    console.log('webgazer is ready.');\r\n    initializeCam();\r\n  } else {\r\n    setTimeout(checkWebgazer, 100);\r\n  }\r\n}\r\n\r\n/************************************\r\n * SET UP WEBCAM\r\n ************************************/\r\nfunction initializeCam() {\r\n  var video = document.getElementById('webgazerVideoFeed');\r\n  video.style.display = 'block'; // block\r\n  video.style.position = 'relative';\r\n  video.width = cam.width;\r\n  video.height = cam.height;\r\n  video.style.margin = '0px';\r\n  $('#webgazerVideoFeed').css({\r\n    'left': '50%',\r\n    'transform': 'translate(-50%, 0)',\r\n    'margin': '20px'\r\n  }).detach().insertAfter('#webcam_insert').get(0).play();\r\n  flipped = false;\r\n  $(\"#flip_cam_btn\").show();\r\n  $(\"#flip_cam_btn\").on(\"click\",function(){\r\n    if(flipped == false){\r\n      flipped = true;\r\n      $(\"#webgazerVideoFeed\").css(\"transform\",\"scaleX(-1)\");\r\n      $(\"#webgazerVideoFeed\").css(\"-webkit-transform\", \"scaleX(-1)\");\r\n    } else {\r\n      flipped = false;\r\n      $(\"#webgazerVideoFeed\").css(\"transform\",\"scaleX(1)\");\r\n      $(\"#webgazerVideoFeed\").css(\"-webkit-transform\", \"scaleX(1)\");\r\n    }\r\n  });\r\n\r\n  webgazer.params.imgWidth = cam.width;\r\n  webgazer.params.imgHeight = cam.height;\r\n\r\n  cam.overlay = document.getElementById('overlay');\r\n  if (cam.overlay === null) {\r\n      cam.overlay = document.createElement('canvas');\r\n      cam.overlay.id = 'overlay';\r\n      document.body.appendChild(cam.overlay);\r\n  }\r\n  cam.overlay.style.position = 'absolute';\r\n  cam.overlay.width = cam.width;\r\n  cam.overlay.height = cam.height;\r\n  cam.overlay.style.top = cam.topDist;\r\n  cam.overlay.style.left = cam.leftDist;\r\n  cam.overlay.style.margin = '0px';\r\n\r\n  cam.initialized = 1;\r\n\r\n  $('#message').html('Webcam access successful.').delay(1000).fadeOut(1000);\r\n}\r\n\r\n/************************************\r\n * START BLOCKS\r\n ************************************/\r\nfunction prepareBlock() {\r\n  if (cam.initialized == 1) {\r\n    if (block_no < design.blocks.length) {\r\n      trial_no = 0;\r\n\r\n      webgazer.resume();\r\n      if (design.recalibrate == 1 || block_no == 0) {\r\n        $('#instruction_message').html(calibration.instruction).show();\r\n        setTimeout(\"$('#instruction_message').fadeOut(1000);\", calibration.instruction_duration);\r\n        setTimeout(\"startCalibration();\", design.blocks[block_no].instruction_duration + 2000);\r\n      } else {\r\n        $('#instruction_message').html(design.blocks[block_no].instruction).show();\r\n        setTimeout(\"$('#instruction_message').fadeOut(1000);\", design.blocks[block_no].instruction_duration);\r\n        setTimeout(\"prepareTrial();\", design.blocks[block_no].instruction_duration + 2000);\r\n      }\r\n    } else {\r\n      endExperiment();\r\n    }\r\n  } else {\r\n    setTimeout(\"prepareBlock();\", 500);\r\n  }\r\n}\r\n\r\n\r\n/************************************\r\n * CALIBRATE\r\n ************************************/\r\nfunction startCalibration() {\r\n  if(calibration_skip == \"skip\" ||\r\n     calibration_skip == \"on\" ||\r\n     calibration_skip == \"true\"){\r\n    endValidation()\r\n  } else {\r\n    $('.stimuli').hide();\r\n    $('#calibration_dot').hide();\r\n    if (block_no == 0) {\r\n        $('#calibration_dot').click(function() {\r\n            calibrateHit();\r\n        });\r\n    }\r\n    calibration_no = 0;\r\n    //webgazer.clearData();\r\n    window.localStorage.clear();\r\n    //webgazer.begin();\r\n    t_calibration_start = new Date().getTime();\r\n    calibrate();\r\n  }\r\n}\r\n\r\nfunction calibrate() {\r\n    clearTimeout(t);\r\n    if (calibration_no < calibration.calibrations) {\r\n        $('#calibration_cnt').html(calibration.duration);\r\n        $c = $('#calibration_dot');\r\n        //var c = Math.floor(Math.random() * calibration.points.length);\r\n        //var p = calibration.points.splice(c, 1)[0];\r\n        if (calibration.points.length == 0) {\r\n            calibration.points = shuffle([\r\n                {x: \"20%\", y: \"20%\"},\r\n                {x: \"50%\", y: \"20%\"},\r\n                {x: \"80%\", y: \"20%\"},\r\n                {x: \"20%\", y: \"50%\"},\r\n                {x: \"50%\", y: \"50%\"},\r\n                {x: \"80%\", y: \"50%\"},\r\n                {x: \"20%\", y: \"80%\"},\r\n                {x: \"50%\", y: \"80%\"},\r\n                {x: \"80%\", y: \"80%\"},\r\n                {x: \"35%\", y: \"35%\"},\r\n                {x: \"65%\", y: \"35%\"},\r\n                {x: \"35%\", y: \"65%\"},\r\n                {x: \"65%\", y: \"65%\"}\r\n            ]);\r\n        }\r\n        var p = calibration.points.pop();\r\n        $c.css({\r\n            'left' : p.x,\r\n            'top' : p.y\r\n        });\r\n\r\n        data_current = {\r\n            'type': 'calibration',\r\n            'block': block_no,\r\n            'trial': calibration_no,\r\n            'x': p.x,\r\n            'y': p.y,\r\n            'raw': []\r\n        };\r\n\r\n        cam.calibrating = 1;\r\n        $c.show();\r\n        if (calibration.method == 'watch') {\r\n            t = setTimeout(\"autoCalibration();\", 750);\r\n        }\r\n    } else {\r\n        endCalibration();\r\n    }\r\n}\r\n\r\nfunction calibrateHit() {\r\n    var c = $('#calibration_cnt').html();\r\n    /*\r\n    if ($('#webgazerVideoFeed').css('display') == 'block') {\r\n        $('#webgazerVideoFeed').css({\r\n            top: cam.topDist,\r\n            left: cam.leftDist,\r\n            display: 'none',\r\n            transform: '0'\r\n        });\r\n    }*/\r\n    if (c > 1 && cam.calibrating == 1) {\r\n        $('#calibration_cnt').html(--c);\r\n        if (calibration.method == \"watch\") {\r\n            t = setTimeout(\"autoCalibration();\", 100);\r\n            //requestAnimationFrame(autoCalibration);\r\n        }\r\n    } else {\r\n        $('#calibration_cnt').html(9999);\r\n        clearTimeout(t);\r\n        cam.calibrating = 0;\r\n        $('#calibration_dot').hide();\r\n        calibration_no++;\r\n        saveData();\r\n        calibrate();\r\n    }\r\n    return false;\r\n}\r\n\r\nvar t;\r\nfunction autoCalibration() {\r\n    calibrateLog();\r\n    if (cam.calibrating == 1) {\r\n        calibrateHit();\r\n    }\r\n}\r\n\r\nfunction calibrateLog() {\r\n    var $cd = $('#calibration_dot');\r\n    var cx = parseInt(Math.round($cd.offset().left));\r\n    var cy = parseInt(Math.round($cd.offset().top));\r\n    webgazer.watchListener(cx, cy);\r\n}\r\n\r\n\r\nfunction endCalibration() {\r\n    clearTimeout(t);\r\n    $('#calibration_dot').unbind(\"click\");\r\n    startValidation();\r\n}\r\n\r\n\r\n\r\n/************************************\r\n * VALIDATE\r\n ************************************/\r\nfunction startValidation() {\r\n    validation_no = 0;\r\n    validate();\r\n}\r\n\r\nfunction validate() {\r\n    clearTimeout(t);\r\n    if (validation_no < validation.validations) { // if we there are validations left\r\n        $('#calibration_cnt').html(0);\r\n        var $c = $('#calibration_dot');\r\n        if (validation.points.length == 0) {\r\n            validation.points = shuffle([\r\n                {x: \"20%\", y: \"20%\"},\r\n                {x: \"80%\", y: \"20%\"},\r\n                {x: \"50%\", y: \"50%\"},\r\n                {x: \"20%\", y: \"80%\"},\r\n                {x: \"80%\", y: \"80%\"}\r\n                                        ]);\r\n        }\r\n        var vp = validation.points.pop();\r\n        $c.css({\r\n            'left' : vp.x,\r\n            'top' : vp.y\r\n        });\r\n        $c.show();\r\n        validation_current.x = Math.round($c.offset().left);\r\n        validation_current.y = Math.round($c.offset().top);\r\n\r\n        data_current = {\r\n            'type': 'validation',\r\n            'block': block_no,\r\n            'trial': validation_no,\r\n            'x': validation_current.x,\r\n            'y': validation_current.y,\r\n            'raw': []\r\n        };\r\n        cam.validating = 1;\r\n        t = setTimeout(\"validateFail();\", validation.timeout);\r\n//t = setTimeout('validation = 0;', 3000);\r\n    } else {\r\n        endValidation();\r\n    }\r\n}\r\n\r\nfunction validateFail() {\r\n  data_current.type = 'validationfail';\r\n  data_current.attempt = validation_attempt;\r\n  saveData();\r\n\r\n\r\n  cam.validating = 0;\r\n  webgazer.pause();\r\n\r\n  $('.stimuli').hide();\r\n  if (validation_attempt >= validation.attempts) {\r\n      $('#message').html('Unforuntately, the calibration failed too many times. Therefore, you can not participate in this study. Please contact <a href=\"mailto:kilian.semmelmann@rub.de\">kilian.semmelmann@rub.de</a> if you have any questions. Thanks for your interest.').show();\r\n  } else {\r\n      validation_attempt++;\r\n      $('#message').html('The calibration failed. <br />Please follow the instructions and try again (try ' + (validation_attempt) + ' of ' + validation.attempts + ').').show().delay(5000).fadeOut(1000);\r\n      $('#instruction').show();\r\n  }\r\n  // TOOD: log validation-fail\r\n}\r\n\r\nfunction endValidation() {\r\n    cam.validating = 0\r\n    validation_attempt = 1;\r\n    webgazer.pause();\r\n    $('#instruction_message').html(design.blocks[block_no].instruction).show();\r\n    setTimeout(\"$('#instruction_message').fadeOut(1000);\", design.blocks[block_no].instruction_duration);\r\n    setTimeout(\"prepareTrial();\", design.blocks[block_no].instruction_duration + 2000);\r\n}\r\n\r\n\r\n\r\n/************************************\r\n * START EXPERIMENT\r\n ************************************/\r\nvar t_trial_start;\r\nfunction prepareTrial() {\r\n    status = \"prepare\";\r\n    $('.stimuli').hide();\r\n    data_current = {\r\n        'type': 'trial',\r\n        'block': block_no,\r\n        'trial': trial_no,\r\n        'raw': []\r\n    };\r\n    webgazer.resume();\r\n    startTrial();\r\n}\r\n\r\n\r\nfunction startTrial() {\r\n    t_trial_start = new Date().getTime();\r\n    $('#stimuli_fixation').show();\r\n    status = \"fixation_onset\";\r\n    // use start function of block-type name\r\n    var fn = design.blocks[block_no].type+\"Start\";\r\n    window[fn]();\r\n}\r\n\r\n\r\nvar heat;\r\nfunction endTrial() {\r\n    clearTimeout(t);\r\n    cam.recording = 0;\r\n    webgazer.pause();\r\n    status = \"end\";\r\n    $('.stimuli').hide();\r\n    trial_no++;\r\n    saveData();\r\n\r\n    if (trial_no < design.blocks[block_no].trials) {\r\n        setTimeout(\"prepareTrial();\", design.blocks[block_no].iti);\r\n    } else {\r\n        block_no++;\r\n        if (block_no < design.blocks.length) {\r\n            window.localStorage.clear();\r\n            webgazer.clearData();\r\n            //loadWebgazer();\r\n            //prepareBlock();\r\n            navigation('pause');\r\n        } else {\r\n            endExperiment();\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction saveData() {\r\n\r\n  data_current.raw = data_current.raw.map(function(row){\r\n    row.x = row.x - window.innerWidth/2;\r\n    row.y = row.y - window.innerHeight/2;\r\n\r\n    if(typeof(image_pair) !== \"undefined\"){\r\n      Object.keys(image_pair).forEach(function(key){\r\n        row[key] = image_pair[key];\r\n      });\r\n    }\r\n    row.screen_width  = screen.width;\r\n    row.screen_height = screen.height;\r\n    //row.left_image  = image_pair.image_1;\r\n    //row.right_image = image_pair.image_2;\r\n\r\n    return row;\r\n  });\r\n\r\n  data.push(data_current);\r\n  data_current = {};\r\n  sendData();\r\n}\r\n\r\nfunction sendData() {\r\n  switch(parent.parent.dev_obj.context){\r\n    case \"localhost\":\r\n      data.forEach(function(trial,trial_no){\r\n        if (trial !== null){\r\n          parent\r\n            .parent\r\n            .Collector\r\n            .electron\r\n            .write_file(\"Data\",\r\n              parent.parent.Study.get_vars.location,\r\n              parent.parent.$(\"#participant_code\").val(),\r\n              \"freeviewing-\" + trial_no,\r\n              Papa.unparse(data[trial_no].raw))\r\n           parent\r\n            .parent\r\n            .online_save(parent.parent.Study.get_vars.location,\r\n              parent.parent.$(\"#participant_code\").val() +\r\n                \"-trial-\" + trial_no,\r\n              parent.parent.$(\"#completion_code\").val(),\r\n              parent.parent.$(\"#prehashed_code\").val(),\r\n              Papa.unparse(data[trial_no].raw),          //the data\r\n          save_script.split(\"|\"),\r\n          function(){\r\n            parent.parent.online_data_obj.saves_ended ++;\r\n          });\r\n          data[trial_no] = null;\r\n        }\r\n      });\r\n      break;\r\n    case \"github\":\r\n      data.forEach(function(trial,trial_no){\r\n        if (trial !== null){\r\n                   parent.parent.online_save(parent.parent.Study.get_vars.location,\r\n                    parent.parent.$(\"#participant_code\").val() + \"-trial-\" + trial_no,\r\n                    parent.parent.$(\"#completion_code\").val(),\r\n                    parent.parent.$(\"#prehashed_code\").val(),\r\n                    Papa.unparse(data[trial_no].raw),          //the data\r\n          save_script.split(\"|\"),\r\n          function(){\r\n            parent.parent.online_data_obj.saves_ended ++;\r\n          });\r\n          data[trial_no] = null;\r\n        }\r\n      });\r\n      break;\r\n  }\r\n}\r\n\r\n\r\nfunction endExperiment() {\r\n  Trial.submit();\r\n}\r\n\r\n\r\n/************************************\r\n * SIMPLE DOT VIEWING PARADIGM\r\n * If you want to introduce your own paradigms, follow the same structure and extend the design array above.\r\n ************************************/\r\nvar tSimple = {};\r\ntSimple.positions = [];\r\nfunction simpleStart() {\r\n    // if we don't have dot-positions any more, refill the array\r\n    if (tSimple.positions.length == 0) {\r\n        tSimple.positions = shuffle([\r\n            {x: \"20%\", y: \"20%\"},\r\n            {x: \"50%\", y: \"20%\"},\r\n            {x: \"80%\", y: \"20%\"},\r\n            {x: \"20%\", y: \"50%\"},\r\n            {x: \"80%\", y: \"50%\"},\r\n            {x: \"20%\", y: \"80%\"},\r\n            {x: \"50%\", y: \"80%\"},\r\n            {x: \"80%\", y: \"80%\"}\r\n        ]);\r\n    }\r\n    var pos = tSimple.positions.pop();\r\n    $('#stimuli_dot').css({\r\n        'top': pos.y,\r\n        'left': pos.x\r\n    });\r\n    data_current.task = 'simple';\r\n    data_current.x = pos.x;\r\n    data_current.y = pos.y;\r\n    data_current.condition = 'dot_' + pos.x + '_' + pos.y;\r\n\r\n    cam.recording = 1;\r\n    setTimeout('$(\"#stimuli_fixation\").hide(); status = \"fixation_offset\";', 1500);\r\n    setTimeout('simpleShowdot();', 2000);\r\n}\r\n\r\nfunction simpleShowdot() {\r\n    status = \"stimulus_onset\";\r\n    $(\"#stimuli_dot\").show();\r\n    setTimeout('status = \"stimulus_offset\"; endTrial();',  2000);\r\n}\r\n\r\n\r\n/************************************\r\n * POSNER VIEWING PARADIGM\r\n ************************************/\r\nfunction posnerStart() {\r\n    var p = Math.random() >= 0.5 ? '&gt;&gt;&gt;' : '&lt;&lt;&lt;';\r\n    $('#stimuli_prime').html(p);\r\n\r\n    var t = Math.random() >= 0.5 ? 'X' : 'N';\r\n    $('#stimuli_target').html(t);\r\n\r\n    var cond = Math.random() >= 0.7 ? 'incongruent' : 'congruent';\r\n\r\n    var tpos = 'left';\r\n    if ((cond == 'incongruent' && p == '&lt;&lt;&lt;') || ((cond == 'congruent' && p == '&gt;&gt;&gt;'))) {\r\n        tpos = 'right';\r\n    }\r\n\r\n    var pos = {};\r\n    if (tpos == 'left') {\r\n        pos.x = '20%';\r\n        pos.y = '30%';\r\n    } else {\r\n        pos.x = '80%';\r\n        pos.y = '30%';\r\n    }\r\n\r\n\r\n    $('#stimuli_target').css({\r\n        'top': pos.x,\r\n        'left': pos.y\r\n    });\r\n\r\n\r\n    data_current.task = 'posner';\r\n    data_current.x = pos.x;\r\n    data_current.y = pos.y;\r\n    data_current.condition = 'posner_' + pos.x + '_' + pos.y + '_' + tpos;\r\n\r\n    cam.recording = 1;\r\n    setTimeout(\"$('#stimuli_fixation').hide();\", 1000);\r\n    setTimeout('posnerShowprime();', 1500);\r\n}\r\n\r\nfunction posnerShowprime() {\r\n    $('#stimuli_prime').show();\r\n    setTimeout(\"posnerShowTarget();\", 300);\r\n}\r\n\r\nfunction posnerShowTarget() {\r\n    $('#stimuli_prime').hide();\r\n    $('#stimuli_target').show();\r\n    setTimeout(\"endTrial();\", 1500);\r\n}\r\n\r\n\r\n/************************************\r\n * SMOOTH PURSUIT PARADIGM\r\n ************************************/\r\nvar tPursuit = {};\r\nfunction pursuitStart() {\r\n    $('#stimuli_fixation').hide();\r\n    var pos_possible = shuffle([\r\n        {x: \"20%\", y: \"20%\", tx: \"80%\", ty: \"20%\"},\r\n        {x: \"20%\", y: \"20%\", tx: \"20%\", ty: \"80%\"},\r\n        {x: \"20%\", y: \"20%\", tx: \"80%\", ty: \"80%\"},\r\n\r\n        {x: \"80%\", y: \"20%\", tx: \"20%\", ty: \"20%\"},\r\n        {x: \"80%\", y: \"20%\", tx: \"20%\", ty: \"80%\"},\r\n        {x: \"80%\", y: \"20%\", tx: \"80%\", ty: \"80%\"},\r\n\r\n        {x: \"20%\", y: \"80%\", tx: \"20%\", ty: \"20%\"},\r\n        {x: \"20%\", y: \"80%\", tx: \"80%\", ty: \"20%\"},\r\n        {x: \"20%\", y: \"80%\", tx: \"80%\", ty: \"80%\"},\r\n\r\n        {x: \"80%\", y: \"80%\", tx: \"20%\", ty: \"20%\"},\r\n        {x: \"80%\", y: \"80%\", tx: \"80%\", ty: \"20%\"},\r\n        {x: \"80%\", y: \"80%\", tx: \"20%\", ty: \"80%\"}\r\n    ]);\r\n    var pos = pos_possible[0];\r\n    $s = $('#stimuli_dot');\r\n    $s.css({\r\n        'top': pos.y,\r\n        'left': pos.x\r\n    });\r\n\r\n    $s.css({\r\n        'background-color': '#000'\r\n    });\r\n\r\n\r\n    data_current.task = 'pursuit';\r\n    data_current.x = pos.x;\r\n    data_current.y = pos.y;\r\n    data_current.condition = 'pursuit_' + pos.x + '_' + pos.y + '_' + pos.tx + '_' + pos.ty;\r\n\r\n    cam.recording = 1;\r\n    $s.show();\r\n    setTimeout(function() {\r\n        status = \"pursuit_start\";\r\n        $('#stimuli_dot').css({\r\n            'background-color': '#dd494b'\r\n        }).animate({ \"left\": pos.tx, \"top\": pos.ty },\r\n            2000,\r\n            'linear',\r\n        function() {\r\n            status = \"pursuit_end\";\r\n            setTimeout(\"endTrial();\", 500);\r\n        });\r\n    }, 1500);\r\n}\r\n\r\n\r\n\r\n/************************************\r\n * FREE VIEWING PARADIGM\r\n ************************************/\r\nvar tFreeview = {};\r\n\r\n\r\ntFreeview.stimuli = [];\r\n\r\n\r\n\r\nfunction process_freeview_image_file(){\r\n  console.dir(\"tFreeview\");\r\n  console.dir(tFreeview);\r\n  if(trial_order == \"random\"){\r\n    tFreeview.stimuli = shuffle(tFreeview.stimuli);\r\n  }\r\n\r\n\r\n  if(left_side == \"random\"){\r\n    for(var i = 0; i < tFreeview.stimuli.length; i++){\r\n      [left_image,right_image] = shuffle([tFreeview.stimuli[i].image_1,\r\n                                          tFreeview.stimuli[i].image_2]);\r\n      tFreeview.stimuli[i].image_1 = left_image;\r\n      tFreeview.stimuli[i].image_2 = right_image;\r\n    }\r\n  } else if(left_side == \"equal\" | left_side == \"counterbalance\"){\r\n    // select indexes to swap left and right for half the indexes\r\n    // all indexes:\r\n    var indexes = Array.from({length:tFreeview.stimuli.length},(v,k)=>k);\r\n        indexes = shuffle(indexes);\r\n\r\n    //assign the first half left to right\r\n    for(var i = 0; i < Math.floor(tFreeview.stimuli.length / 2); i++){          //this will only loop through half of the randomised indexes\r\n      var this_index = indexes[i];\r\n      var right_image = tFreeview.stimuli[this_index].image_1;\r\n      var left_image = tFreeview.stimuli[this_index].image_2;\r\n      tFreeview.stimuli[this_index].image_1 = left_image;\r\n      tFreeview.stimuli[this_index].image_2 = right_image;\r\n    }\r\n  } else if(left_side == \"image_1\"){\r\n    // do nothing\r\n  } else if(left_side == \"image_2\"){\r\n    for(var i = 0; i < Math.floor(tFreeview.stimuli.length / 2); i++){\r\n      var right_image = tFreeview.stimuli[i].image_1;\r\n      var left_image = tFreeview.stimuli[i].image_2;\r\n      tFreeview.stimuli[i].image_1 = left_image;\r\n      tFreeview.stimuli[i].image_2 = right_image;\r\n    }\r\n  } else {\r\n    alert(\"there's a problem in the 'left_side' column - fix this before testing.\");\r\n  }\r\n};\r\n\r\n//check if the freeview file matches one of the stimuli files\r\nif(typeof(parent.parent.exp_json.all_stims[freeview_image_file]) !== \"undefined\"){\r\n  var freeview_contents = parent.parent.exp_json.all_stims[freeview_image_file];\r\n  var freeview_clean    = freeview_contents.map(function(row){\r\n    return row.filter(item => item !== null);\r\n  });\r\n  tFreeview.stimuli = Papa.parse(Papa.unparse(freeview_clean),{\r\n    header:true,\r\n    skipEmptyLines:true\r\n  }).data;\r\n  process_freeview_image_file();\r\n} else {\r\n  if(freeview_image_file.toLowerCase().indexOf(\"https://\") == -1){                //i.e. isn't stored on dropbox or some other remote location\r\n    freeview_image_file = \"../User/\" + freeview_image_file;\r\n  }\r\n  $.get(freeview_image_file,function(result){\r\n    tFreeview.stimuli = Papa.parse(result,{\r\n      header:true,\r\n      skipEmptyLines:true\r\n    }).data;\r\n    process_freeview_image_file();\r\n  });\r\n}\r\n\r\nimages_loaded = 0;\r\n\r\nfunction freeviewStart() {\r\n\r\n  function freeview_loaded(left_image, right_image){\r\n    data_current.task = 'freeviewing';\r\n    data_current.x = $('#stimuli_img_left').css('left');\r\n    data_current.y = \"0%\";\r\n    data_current.condition = 'view_' + left_image + '_' + right_image;\r\n\r\n    //wait until the image is loaded before proceeding\r\n    $(\"#stimuli_img_left\")\r\n\r\n    cam.recording = 1;\r\n    setTimeout(\"$('#stimuli_fixation').hide(); status = 'fixation_offset';\", 1000);\r\n    setTimeout(\"freeviewShow();\", 1500);\r\n  }\r\n\r\n  document.body.style.cursor = 'none';\r\n\r\n\r\n  image_pair = tFreeview.stimuli.shift();\r\n\r\n  [left_image,right_image] = [image_pair.image_1,image_pair.image_2];\r\n\r\n  var baseline_time = new Date().getTime();\r\n\r\n\r\n  // Make sure the images are loaded before going past fixation\r\n  /////////////////////////////////////////////////////////////\r\n\r\n  $(\"#stimuli_img_left\").off(\"load\");\r\n  $(\"#stimuli_img_right\").off(\"load\");\r\n  $(\"#stimuli_img_left\").attr(\"src\" , left_image);\r\n  $(\"#stimuli_img_right\").attr(\"src\" , right_image);\r\n\r\n  images_loaded = 0;\r\n\r\n  $(\"#stimuli_img_left\").on(\"load\",function(){\r\n    images_loaded = images_loaded + 1;\r\n    if(images_loaded == 2){\r\n      freeview_loaded(left_image, right_image);\r\n    }\r\n  });\r\n\r\n  $(\"#stimuli_img_right\").on(\"load\",function(){\r\n    images_loaded = images_loaded + 1;\r\n    if(images_loaded == 2){\r\n      freeview_loaded(left_image, right_image);\r\n    }\r\n  });\r\n}\r\n\r\nfunction freeviewShow() {\r\n    status = 'stimulus_onset';\r\n    $('#stimuli_img_left').show();\r\n    $('#stimuli_img_right').show();\r\n    setTimeout(\"status = 'stimulus_offset'; endTrial();\", stim_duration);\r\n}\r\n\r\n\r\n\r\n/************************************\r\n * GENERATE AND SHOW HEATMAP\r\n ************************************/\r\nfunction heatmap() {\r\n    // preprocess data for heatmap\r\n    var bins = []; // create bins and fill them\r\n    for (var y = 0; y < window.innerHeight; y++) {\r\n        for (var x = 0; x < window.innerWidth; x++) {\r\n            bins.push([x, y, 0]);\r\n        }\r\n    }\r\n    // sort fixations into bins and get max\r\n    var max = 0;\r\n    for (var i = 0; i < data[data.length - 1].raw.length; i++) {\r\n        var d = data[data.length - 1].raw[i];\r\n        var dx = Math.round(d.x);\r\n        var dy = Math.round(d.y);\r\n        var pos = (dy * window.innerWidth) + dx;\r\n        if (pos <= bins.length && pos >= 0) {\r\n            bins[pos][2] += 1;\r\n            if (bins[pos][2] > max) {\r\n                max = bins[pos][2];\r\n            }\r\n        } else {\r\n            console.log('dropped ' + pos);\r\n        }\r\n    }\r\n\r\n    // remove empty bins\r\n    var binsc = [];\r\n    for (var i = 0; i < bins.length; i++) {\r\n        if (bins[i][2] != 0) {\r\n            binsc.push(bins[i]);\r\n        }\r\n    }\r\n\r\n    // create heatmap\r\n    $('body').append(\"<canvas id=\\\"heatmap\\\"></canvas>\");\r\n    $('#heatmap').attr('width', window.innerWidth);\r\n    $('#heatmap').attr('height', window.innerHeight);\r\n    heat = simpleheat('heatmap');\r\n    heat.resize();\r\n    heat.radius(30,50);\r\n    heat.max(max).data(binsc).draw();\r\n\r\n    $('#stimuli_img').show();\r\n}\r\n\r\n\r\n/**\r\n * navigation\r\n */\r\nvar page = 1;\r\nvar oldpage = -1;\r\nvar d_consent = undefined;\r\nfunction navigation(direction) {\r\n  $('#message').hide();\r\n\r\n  $('#instruction_continue_text').html(\"&gt;\");\r\n\r\n\r\n\r\n\tif (page == 2 && direction == 'continue') {\r\n    if (cam.initialized == 1) {\r\n      $('#instruction').fadeOut(1000);\r\n      setTimeout(\"prepareBlock();\", 2000);\r\n    }\r\n  } else if (page == 2 && direction == 'pause') {\r\n    $('#instruction_continue').html(\"continue\").css({'font-size': '1.7em'});\r\n    $('#instruction_2').find(\"h1\").html('short pause (block ' + block_no + ' of ' + design.blocks.length + \")\");\r\n    $('#setup_first').hide();\r\n    $('#setup_after').show();\r\n\r\n    $('#instruction').show(function() {\r\n      if (block_no == design.blocks.length) {\r\n        page++;\r\n      } else {\r\n        $('#instruction_2').fadeIn(300);\r\n        $('#webgazerVideoFeed').show();\r\n      }\r\n    });\r\n  } else if  (direction == 'continue') {\r\n    page++;\r\n  } else if (direction == 'back') {\r\n    page--;\r\n  }\r\n  page = page < 1 ? 1 : page;\r\n  page = page > $('.instruction_page').length ? $('.instruction_page').length : page;\r\n  page <= 1 ? $('#instruction_back').hide() : $('#instruction_back').show();\r\n  page >= $('.instruction_page').length ? $('#instruction_continue').hide() : $('#instruction_continue').show();\r\n  page >= 3 ? $('#instruction_back,#instruction_continue').hide() : \"\";\r\n  block_no > 0 ? $('#instruction_back').hide() : \"\";\r\n\r\n  if (oldpage != page) { // if we stay at the same page, we avoid unnecessary animations\r\n    $('.instruction_page').hide();\r\n    $('#instruction_'+page).fadeIn(300);\r\n  }\r\n  // start up webcam\r\n  if (page == 2 && cam.initialized == 0) {\r\n      loadWebgazer();\r\n  }\r\n  oldpage = page;\r\n}\r\n\r\n\r\nvar cl;\r\nvar t_start = new Date().getTime();\r\n$('document').ready(function() {\r\n  $('#stimulus').hide();\r\n  $('#calibration_dot').hide();\r\n  $('#setup_after').hide();\r\n  $('#instruction_message').hide();\r\n  $('#therest').hide();\r\n\r\n\r\n  $('#start_button').click(function() {\r\n    $(this).hide();\r\n    prepareBlock();\r\n  });\r\n\r\n  $('body').keypress(function(e) {\r\n    //e.preventDefault();\r\n    switch(e.keyCode) {\r\n\r\n    }\r\n  });\r\n\r\n  $('#instruction_continue').click(function() {\r\n    navigation('continue');\r\n  });\r\n\r\n  $('#instruction_back').click(function() {\r\n    navigation('back');\r\n  });\r\n\r\n  $( \"#f_crowdflowerid\" ).tooltip({\r\n    show: {\r\n      effect: \"slideDown\",\r\n      delay: 250\r\n    }\r\n  });\r\n\r\n\r\n  /*\r\n  $('#f_birthday').datepicker({\r\n      dateFormat: 'yy/mm/dd',\r\n      changeYear: true,\r\n      changeMonth: true,\r\n      yearRange: \"-100:+0\"\r\n  });\r\n  */\r\n  var select = $('#f_birthday');\r\n  for (var i=18;i <= 100; i++){\r\n    select.append('<option value=\"'+i+'\">'+i+'</option>')\r\n  }\r\n\r\n  window.localStorage.clear();\r\n\r\n  var ss = window.location.hash.substring(1);\r\n  $('#cf_reference,#asd_reference,#rub_reference,#cf_code').hide();\r\n  if (ss == \"cf\") { // crowdflower-reference\r\n    $('#cf_reference,#cf_code').show();\r\n  } else if (ss == \"rub\") {\r\n    $('#rub_reference').show();\r\n\t} else {\r\n    $('#asd_reference').show();\r\n\t}\r\n\r\n  var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;\r\n  var is_firefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\r\n  if (is_chrome || is_firefox) {\r\n    page = 0;\r\n    navigation('start');\r\n  } else {\r\n    $('#instruction').hide();\r\n    $('#message').html('Thank you very much for your interest in our study.<br /><br />Unfortunately, your browser is not supported by our website. To participate, you need either the browser \"Google Chrome\" or \"Firefox\".<br /><br />Do download one of these securely and free of charge, please follow one of these links: <a href=\"https://www.google.com/chrome/browser/desktop/\" target=\"_blank\">Google Chrome</a> or <a href=\"https://www.mozilla.org/de/firefox/new/\" target=\"_blank\">Mozilla Firefox</a>').show();\r\n  }\r\n});\r\n\r\n\r\n/**\r\n function drawLoop() {\r\n    requestAnimFrame(drawLoop);\r\n    var p = webgazer.getCurrentPrediction();\r\n    if (p !== null) {\r\n        console.log(p);\r\n        $('body').append('<span class=\"p\" style=\"top: '+p.y+'px; left: '+p.x+'px\"></span>');\r\n        measurements++;\r\n    }\r\n    t = (new Date().getTime() - start)/1000;\r\n    cam.overlay.getContext('2d').clearRect(0,0,cam.width,cam.height);\r\n    if (cl.getCurrentPosition()) {\r\n        //console.log(cl.getCurrentPosition()[0]);\r\n        //cl.draw(overlay);\r\n    }\r\n}\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\nwindow.onbeforeunload = function() {\r\n  //webgazer.end(); //Uncomment if you want to save the data even if you reload the page.\r\n}\r\n</script>\r\n"
    },
    "graphic": {
      "trialtype": "",
      "trialtypes": {},
      "hovered_element": "",
      "relevant_styles": [
        "background-color",
        "border-color",
        "border-radius",
        "border-style",
        "border-width",
        "color",
        "font-size",
        "height",
        "left",
        "top",
        "width",
        "z-index"
      ]
    }
  },
  "data": {
    "scripts": {},
    "servers": {
      "ocollector.org": {
        "server": "ocollector.org",
        "registration_url": "https://ocollector.org/Register11_ausnwey63gsjd89.php",
        "storage_url": "https://ocollector.org/StoreData10_aodirnkcu73hsjd8.php"
      },
      "open-collector.org": {
        "server": "open-collector.org",
        "registration_url": "https://open-collector.org/Register10_jshenkfdhwber82gfm374b.php",
        "storage_url": "https://open-collector.org/StoreData10_jshenkfdhwber82gfm374b.php"
      }
    }
  },
  "autoloaded_mods": {},
  "keys": {
    "archived": [
      {
        "public_key": "jK3XlfuOim8cy3IKn4XiJhJLput3jhWFZRLFNc84vx0=",
        "encrypted_private_key": "U2FsdGVkX19SmxynastfgIz5kvYypXvB4Xn4IQDNQHXf2NfaSum4RyTvb/aFpM/ZI378wDGJoClh92aihBEVPg=="
      },
      {
        "public_key": "76AZZxNLkpGuNMJCx/r2QAfmj7b+M21hPG2XIolHAiU=",
        "encrypted_private_key": "U2FsdGVkX19rRBsVK9hWWVMDovHOlV264QL8zX2vydOI9nv9NCOWmXTfhSQBNq1EP/DaidkxVdzLhFhJadMQJg=="
      }
    ],
    "public_key": "HiuOHuPSLVabH6VS3kRG4dPh/S+hpGhmvsOZoZlZNzM=",
    "encrypted_private_key": "U2FsdGVkX18z2xl4wzdzzF38jXxfX/LPMew4raZJAs8lD1u9CuHRokmi92mJWKcE+R+TxYid2hAxsRxaMPp0mw=="
  }
}